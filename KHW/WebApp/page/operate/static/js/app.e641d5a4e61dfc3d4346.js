webpackJsonp([1],{"+rXm":function(e,t){},"+zMR":function(e,t){},0:function(e,t){},"07B9":function(e,t){},"0KBX":function(e,t){},1:function(e,t){},2:function(e,t){},"2imy":function(e,t){},"2xw3":function(e,t){},"4veD":function(e,t){},"58y6":function(e,t){},"6XFZ":function(e,t,a){e.exports=a.p+"static/img/cost_1.81b8494.png"},"7yoR":function(e,t){},"81/5":function(e,t){},"8qtV":function(e,t){},AW7O:function(e,t){},BD7u:function(e,t){},CKWw:function(e,t){},D7T3:function(e,t){},DUmt:function(e,t){},Ezn8:function(e,t){},FBKL:function(e,t){},"Fz+/":function(e,t){},Gg5S:function(e,t){},HBSQ:function(e,t){},HHPE:function(e,t){},I0oz:function(e,t){},ICD9:function(e,t){},ITc8:function(e,t){},Ifxe:function(e,t){},IzAu:function(e,t){},J90x:function(e,t){},"KK//":function(e,t){},"L+Gw":function(e,t){},LlmC:function(e,t){},LpLg:function(e,t){},LsSL:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("BD7u"),a("yAd9");var n=a("NDuB"),i=a.n(n),o=(a("rY1A"),a("/5iI")),l=a.n(o),s=(a("XSlk"),a("A/+R")),r=a.n(s),c=(a("s6as"),a("XPoA")),d=a.n(c),u=(a("CKWw"),a("kdsS")),p=a.n(u),h=(a("dqi2"),a("VpdV")),f=a.n(h),m=(a("LlmC"),a("+M2V")),v=a.n(m),b=(a("qBOo"),a("mEv3")),g=a.n(b),_=(a("Q56g"),a("PyHn")),y=a.n(_),I=(a("Ezn8"),a("jMXL")),C=a.n(I),x=(a("ar6X"),a("Nuzl")),D=a.n(x),w=(a("Gg5S"),a("JIyG")),S=a.n(w),k=(a("O1AO"),a("t+Nd")),T=a.n(k),N=(a("cT+Q"),a("3E+j")),z=a.n(N),P=(a("2imy"),a("OSAd")),F=a.n(P),L=(a("VI7t"),a("Ik3b")),$=a.n(L),A=(a("UgjM"),a("kzam")),q=a.n(A),R=(a("8qtV"),a("ucDp")),M=a.n(R),B=(a("D7T3"),a("uv/5")),E=a.n(B),O=(a("cgky"),a("ebVz")),H=a.n(O),G=(a("OYV6"),a("fPXA")),Q=a.n(G),U=(a("SYDC"),a("JfoE")),V=a.n(U),j=(a("PNTh"),a("04p/")),W=a.n(j),J=(a("J90x"),a("c7r5")),Y=a.n(J),X=(a("Z1FY"),a("/Q9a")),K=a.n(X),Z=(a("58y6"),a("vUnh")),ee=a.n(Z),te=(a("dNAP"),a("95vm")),ae=a.n(te),ne=(a("QJ/b"),a("TnRQ")),ie=a.n(ne),oe=(a("FBKL"),a("SPYR")),le=a.n(oe),se=(a("Fz+/"),a("hOE7")),re=a.n(se),ce=(a("mgiI"),a("g1fa")),de=a.n(ce),ue=(a("OB/q"),a("g9bk")),pe=a.n(ue),he=(a("7yoR"),a("q/yv")),fe=a.n(he),me=a("MVMM"),ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var be=a("vSla")({name:"App"},ve,!1,function(e){a("lOZR")},null,null).exports,ge=a("zO6J"),_e={data:function(){return{sysName:"运营后台管理系统",collapsed:!1,sysUserName:""}},methods:{handleopen:function(){},handleclose:function(){},handleselect:function(e,t){},logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{}).then(function(){sessionStorage.removeItem("user"),localStorage.removeItem("loginStatus"),localStorage.removeItem("userperadmin"),sessionStorage.removeItem("userPermiss"),e.$router.push("/login")}).catch(function(){})},showMenu:function(e,t){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=t?"block":"none"},collapse:function(){this.collapsed=!this.collapsed;var e=document.getElementById("lastclass");0===e.offsetWidth&&(e.style.width="230px")}},mounted:function(){var e=JSON.parse(localStorage.getItem("userperadmin")),t=JSON.parse(unescape(sessionStorage.getItem("userPermiss")));e&&t||this.$router.replace("/login"),this.sysUserName=e.admin.email||"";var a=this.$router.options.routes;try{for(var n=0;n<t.data.length;n++)for(var i=0;i<a.length;i++)if(t.data[n].meta===a[i].meta){a[i].hidden="0"==t.data[n].show;for(var o=0;o<t.data[n].children.length;o++)for(var l=0;l<a[i].children.length;l++)if(t.data[n].children[o].meta==a[i].children[l].meta&&(a[i].children[l].hidden="0"==t.data[n].children[o].show,"0204"===a[i].children[l].meta&&a[i].children[l].children&&a[i].children[l].children.length>0))for(var s=0;s<a[i].children[l].children.length;s++)for(var r=0;r<t.data[n].children[o].children.length;r++)a[i].children[l].children[s].meta===t.data[n].children[o].children[r].meta&&(a[i].children[l].children[s].hidden="0"==t.data[n].children[o].children[r].show)}}catch(e){}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"container"},[a("el-col",{staticClass:"header",attrs:{span:24}},[a("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n        "+e._s(e.collapsed?"":e.sysName)+"\n      ")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"tools",on:{click:function(t){return t.preventDefault(),e.collapse(t)}}},[a("i",{staticClass:"el-icon-menu"})])]),e._v(" "),a("el-col",{staticClass:"userinfo",attrs:{span:10}},[a("el-dropdown",{attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[e._v(e._s(e.sysUserName))]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"main",attrs:{span:24}},[a("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[a("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,id:"lastclass","unique-opened":"",router:"","background-color":"#324057","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():[t.leaf?e._e():a("el-submenu",{attrs:{index:n+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden||t.children?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),e._v(" "),e._l(t.children,function(t,n){return t.children&&!t.hidden?a("el-submenu",{key:t.path,attrs:{index:t.path}},[a("template",{slot:"title"},[e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])})],2):e._e()})],2),e._v(" "),t.leaf&&t.children.length>0?a("el-menu-item",{attrs:{index:t.children[0].path}},[a("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e()]})],2),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"menuCollapsed",staticClass:"el-menu el-menu-vertical-demo collapsed"},e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():a("li",{staticClass:"el-submenu item"},[t.leaf?[a("li",{staticClass:"el-submenu"},[a("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(a){e.$router.push(t.children[0].path)}}},[a("i",{class:t.iconCls})])])]:[a("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},[a("i",{class:t.iconCls})]),e._v(" "),a("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+n,on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},e._l(t.children,function(t){return t.hidden?e._e():a("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(a){e.$router.push(t.path)}}},[e._v(e._s(t.name))])}))]],2)}))],1),e._v(" "),a("section",{staticClass:"content-container"},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[a("keep-alive",[a("router-view")],1)],1)],1)])])],1)},staticRenderFns:[]};var Ie,Ce,xe,De,we,Se,ke=a("vSla")(_e,ye,!1,function(e){a("Nvu4")},"data-v-2070a9d4",null).exports,Te=a("3cXf"),Ne=a.n(Te),ze=a("2sCs"),Pe=a.n(ze),Fe="http://localhost:8080/operate/op/",Le=function(e){return Pe.a.post(Fe+"getAppList",e)},$e=function(e){return Pe.a.post(Fe+"getConclusionData",e)},Ae=function(e){return Pe.a.post(Fe+"getCommentList",e)},qe=function(e){return Pe.a.post(Fe+"addComment ",e)},Re=function(e){return Pe()({method:"post",url:Fe+"exportOperateData",data:e,responseType:"blob"})},Me=function(e){return Pe()({method:"post",url:Fe+"exportSecondData",data:e,responseType:"blob"})},Be=function(e){return Pe()({method:"post",url:Fe+"exportBdData",data:e,responseType:"blob"})},Ee=function(e){return Pe()({method:"post",url:Fe+"exportMarketData",data:e,responseType:"blob"})},Oe=function(e){return Pe()({method:"post",url:Fe+"exportOperateAndSecondData",data:e,responseType:"blob"})},He=function(e){return Pe()({method:"post",url:Fe+"exportgetBdAndMarketData",data:e,responseType:"blob"})},Ge=function(e){return Pe()({method:"post",url:Fe+"exportBdAndMarketDeatailData",data:e,responseType:"blob"})},Qe=function(e){return Pe.a.post(Fe+"getProxyNameList",e)},Ue=function(e){return Pe.a.post(Fe+"getProxy",e)},Ve=function(e){return Pe.a.post(Fe+"getChannelParameter",e)},je=function(e){return Pe.a.post(Fe+"getChannel",e)},We=function(e){return Pe.a.post(Fe+"getChannelValue",e)},Je=function(e){return Pe.a.post(Fe+"getReward",e)},Ye=function(e){return Pe.a.post(Fe+"getRewardMain",e)},Xe=function(e){return Pe.a.post(Fe+"getOptimization",e)},Ke=function(e){return Pe.a.post(Fe+"addOptimization",e)},Ze=function(e){return Pe.a.post(Fe+"getReward",e)},et=function(e){return Pe.a.post(Fe+"setChannelAttribute",e)},tt=function(e){return Pe.a.post(Fe+"getPayCompany",e)},at=function(e){return Pe.a.post(Fe+"getChannelHistory",e)},nt=function(e){return Pe.a.post(Fe+"getChannelParameter",e)},it=function(e){return Pe.a.post(Fe+"getChannelAttribute",e)},ot=function(e){return Pe.a.post(Fe+"getReportform",e)},lt=function(e){return Pe()({method:"post",url:Fe+"exportData",data:e,responseType:"blob"})},st=function(e){return Pe.a.post(Fe+"updateTableColumns",e)},rt=function(e){return Pe.a.post(Fe+"micro/actionYamTime",e)},ct=function(e){return Pe.a.post(Fe+"micro/actionPageTime",e)},dt=function(e){return Pe.a.post(Fe+"getPermissionType",e)},ut=function(e){return Pe.a.post(Fe+"partnerManager",e)},pt={data:function(){return{forgetPws:!0,uesrEmail:"",logining:!1,ruleForm2:{email:"",pwd:""},rules2:{email:[{required:!0,message:"请输入账号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},mounted:function(){var e=localStorage.getItem("userInfo");e?(this.ruleForm2.email=e,this.uesrEmail=e):(this.ruleForm2={email:"",pwd:""},this.uesrEmail=""),Ie=document.createElement("div"),this.$refs.can.appendChild(Ie),(Ce=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4)).position.z=1e3,xe=new THREE.Scene,we=new Array;for(var t=2*Math.PI,a=new THREE.ParticleCanvasMaterial({color:30942,program:function(e){e.beginPath(),e.arc(0,0,1,0,t,!0),e.fill()}}),n=0,i=0;i<ft;i++)for(var o=0;o<mt;o++)(Se=we[n++]=new THREE.Particle(a)).position.x=i*ht-ft*ht/2,Se.position.z=o*ht-mt*ht/2,xe.add(Se);(De=new THREE.CanvasRenderer).setSize(window.innerWidth,window.innerHeight),Ie.appendChild(De.domElement),document.addEventListener("mousemove",It,!1),window.addEventListener("resize",yt,!1),Ct()},methods:{handleSubmit2:function(){var e=this,t=this;this.$refs.ruleForm2.validate(function(a){if(!a)return!1;e.logining=!0;var n,i=Ne()(e.ruleForm2);(n=i,Pe.a.post(Fe+"login",n)).then(function(a){if(0===a.data.status){if(t.checked)localStorage.setItem("userInfo",e.ruleForm2.email);else localStorage.setItem("userInfo",""),sessionStorage.setItem("userInfosession",e.ruleForm2.email);sessionStorage.setItem("loginStatus","1");var n=Ne()(a.data);localStorage.setItem("userperadmin",n);var i={sessionid:a.data.sessionid};(o=i,Pe.a.post(Fe+"userPermission",o)).then(function(e){if(0===e.data.status){t.logining=!1;var a=Ne()({data:e.data.userPermission});sessionStorage.setItem("userPermiss",escape(a)),t.$router.push("/dailyInfo")}1===e.data.status&&(t.$message.error("登录失败,请重新登录"),t.logining=!1)})}else t.$message.error(a.data.statusMsg),t.logining=!1;var o}).catch(function(e){t.$message.error("登录失败,请联系管理员"),t.logining=!1})})},forgetPwsNum:function(){this.forgetPws=!this.forgetPws},returnLogin:function(){this.forgetPws=!this.forgetPws},keyLogin:function(e){var t=e||window.event||arguments.callee.caller.arguments[0];t&&13==t.keyCode&&this.handleSubmit2()},sendSet:function(){var e,t=this;if(t.uesrEmail){if(/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(t.uesrEmail)){var a={email:t.uesrEmail},n=Ne()(a);(e=n,Pe.a.post(Fe+"updataPwd",e)).then(function(e){0==e.data.status&&t.$message({message:e.data.statusMsg,type:"success"}),1==e.data.status&&t.$message.error("提交失败,请重新提交")})}else t.$refs.isTrueEmail.innerText="邮箱格式不正确",setTimeout(function(){t.$refs.isTrueEmail.innerText=" "},1500)}else t.$refs.isTrueEmail.innerText="用户名不能为空",setTimeout(function(){t.$refs.isTrueEmail.innerText=" "},1500)}}},ht=100,ft=50,mt=50,vt=0,bt=0,gt=-200,_t=window.innerWidth/2;function yt(){_t=window.innerWidth/2,Ce.aspect=window.innerWidth/window.innerHeight,Ce.updateProjectionMatrix(),De.setSize(window.innerWidth,window.innerHeight)}function It(e){bt=e.clientX-_t}function Ct(){requestAnimationFrame(Ct),function(){Ce.position.x+=.05*(bt-Ce.position.x),Ce.position.y+=.05*(-gt-Ce.position.y),Ce.lookAt(xe.position);for(var e=0,t=0;t<ft;t++)for(var a=0;a<mt;a++)(Se=we[e++]).position.y=50*Math.sin(.3*(t+vt))+50*Math.sin(.5*(a+vt)),Se.scale.x=Se.scale.y=2*(Math.sin(.3*(t+vt))+1)+2*(Math.sin(.5*(a+vt))+1);De.render(xe,Ce),vt+=.1}()}var xt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"can",staticClass:"login canvasContaniner"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.forgetPws,expression:"forgetPws"}],ref:"ruleForm2",staticClass:"demo-ruleForm login-container elFormStyle",attrs:{model:e.ruleForm2,rules:e.rules2,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("运营系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm2.email,callback:function(t){e.$set(e.ruleForm2,"email",t)},expression:"ruleForm2.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"pwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},nativeOn:{keydown:function(t){e.keyLogin(t)}},model:{value:e.ruleForm2.pwd,callback:function(t){e.$set(e.ruleForm2,"pwd",t)},expression:"ruleForm2.pwd"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住账号")]),e._v(" "),a("el-button",{staticClass:"forgetPws",on:{click:e.forgetPwsNum}},[e._v("忘记密码?")]),e._v(" "),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){return t.preventDefault(),e.handleSubmit2(t)}}},[e._v("登录")])],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.forgetPws,expression:"!forgetPws"}],staticClass:"demo-ruleForm login-container",staticStyle:{"margin-bottom":"0px"},attrs:{"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("忘记密码")]),e._v(" "),a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"邮箱"},model:{value:e.uesrEmail,callback:function(t){e.uesrEmail=t},expression:"uesrEmail"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"80%"},attrs:{type:"text"},on:{click:e.returnLogin}},[e._v("返回登录")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.sendSet(t)}}},[e._v("提交")])],1),e._v(" "),a("span",{ref:"isTrueEmail",staticClass:"titleInfo"})],1)],1)},staticRenderFns:[]};var Dt=a("vSla")(pt,xt,!1,function(e){a("qo+K")},"data-v-b0548bb8",null).exports,wt=function(e,t){if(void 0===e||""===e||"string"==typeof e)return"";var a=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();if(i=i<10?"0"+i:i,void 0!==t){var o=e.getHours();o=o<10?"0"+o:o;var l=e.getMinutes();l=l<10?"0"+l:l;var s=e.getSeconds();return a+"-"+n+"-"+i+" "+o+":"+l+":"+(s=s<10?"0"+s:s)}return a+"-"+n+"-"+i},St=function(e){var t=new Date(e);return wt(t)},kt=function(e){var t=new Date(e);return wt(t,1)},Tt=function(e){var t=new Date;t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate());return[a,a]},Nt=function(e){var t=new Date;t.setTime(t.getTime());var a=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate());return[a,a]},zt=function(){var e=new Date;e.setTime(e.getTime());var t=e.getFullYear()+"-"+(e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>=10?e.getDate():"0"+e.getDate()),a=new Date,n=a.getDay(),i=n;return 0==n&&(i=7),a.setTime(a.getTime()-24*(i-1)*60*60*1e3),[a.getFullYear()+"-"+(a.getMonth()+1>=10?a.getMonth()+1:"0"+(a.getMonth()+1))+"-"+(a.getDate()>=10?a.getDate():"0"+a.getDate()),t]},Pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"classIfyInfo"},[a("div",{style:{display:6===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loan",label:"提现"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"放款总笔数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现总金额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"放款笔均金额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1),e._v(" "),a("div",{style:{display:7===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondGetPi",label:"续贷笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首提总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondGetSum",label:"续贷总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstPer",label:"首提笔均"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondPer",label:"续贷笔均"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstIncome",label:"首贷收入",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstProfit",label:"首贷毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.firstProfit<0?"colorFont":""},[e._v(e._s(t.row.firstProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"secondIncome",label:"续贷收入",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondProfit",label:"续贷毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.secondProfit<0?"colorFont":""},[e._v(e._s(t.row.secondProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstPrcent",label:"首贷毛利占比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.firstPrcent)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"secondPrcent",label:"续贷毛利占比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.secondPrcent)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1),e._v(" "),a("div",{style:{display:2===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:"300",border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号(一级)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"渠道首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outFirstGetSum",label:"外部首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelPer",label:"渠道笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cost2",label:"优化后成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit2",label:"优化后毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit2<0?"colorFont":""},[e._v(e._s(t.row.grossProfit2))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate2",label:"优化后毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate2<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate2)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"roi"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstIncome",label:"首贷收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROIFirst",label:"roi首贷"}}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return["total"!=t.row.channelName?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})]):e._e()]}}])})],1)],1),e._v(" "),a("div",{style:{display:1===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:"300",border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapital",label:"提现笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"registerCpa",label:"注册CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountCpa",label:"开户CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"ROI"}}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return["total"!=t.row.channelName?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})]):e._e()]}}])})],1)],1)])},staticRenderFns:[]};var Ft={props:["opDataAll","operIndex"],data:function(){return{clientWidth:"1000px"}},mounted:function(){this.windosWidth()},watch:{opDataAll:{handler:function(e,t){this.$nextTick(function(){this.windosWidth(),this.showEarch()})},deep:!0}},methods:{windosWidth:function(){var e=document.documentElement.clientWidth;this.clientWidth=e-300+"px"},showEarch:function(){var e=this.$echarts.init(document.getElementById("main")),t={title:{text:this.opDataAll.name},tooltip:{trigger:this.opDataAll.tooltipTrigger,formatter:this.opDataAll.tooltipFormatter},legend:this.opDataAll.legendData,grid:{left:"3%",right:"12%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{show:!0}}},xAxis:{type:"category",boundaryGap:!1,data:this.opDataAll.xAxisData,axisLabel:{interval:0,rotate:-30}},yAxis:{type:"value",axisLabel:{show:!0,interval:"auto",formatter:this.opDataAll.yAxisFormatter}},series:this.opDataAll.seriesData};e.setOption(t)}}},Lt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"operDataEchart"},[t("div",{style:{width:this.clientWidth,height:"430px"},attrs:{id:"main"}})])},staticRenderFns:[]};var $t={props:["opDataAll","operIndex"],data:function(){return{clientWidth:"1000px"}},mounted:function(){this.windosWidth()},watch:{opDataAll:{handler:function(e,t){this.$nextTick(function(){this.showEarch()})},deep:!0}},methods:{windosWidth:function(){var e=document.documentElement.clientWidth;this.clientWidth=e-300+"px"},showEarch:function(){this.$echarts.init(document.getElementById("main1")).setOption({title:{text:this.opDataAll.name},tooltip:{trigger:this.opDataAll.tooltipTrigger,formatter:this.opDataAll.tooltipFormatter},legend:this.opDataAll.legendData,grid:{left:"3%",right:"20%",bottom:"8%",containLabel:!0},toolbox:{top:-8,feature:{saveAsImage:{show:!0}}},xAxis:{type:"category",boundaryGap:!1,data:this.opDataAll.xAxisData,axisLabel:{interval:0,rotate:-30}},yAxis:{type:"value",axisLabel:{show:!0,interval:"auto",formatter:this.opDataAll.yAxisFormatter}},series:this.opDataAll.seriesData},!0)}}},At={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"operDataEchart"},[t("div",{style:{minWidth:this.clientWidth,height:"430px"},attrs:{id:"main1"}})])},staticRenderFns:[]};var qt={data:function(){return{userInfo:null,loading:!1,comonentUserStatus:"1",chooseDate:"",appOptions:[],appValue:"",activeName2:"6",operData:[],refinanceData:[],BDData:[],marketData:[],operLineData:{},refinanceLineData:{},activeName3:"1",toggleop:!0,togglerefinance:!0,togglereBD:!0,togglerebazaar:!0,rangeDateop:[],rangeDatefinance:[],rangeDateBD:[],rangeDatebazaar:[],statusBDDate:!0,statusbazaarDate:!0,activeName4:"1",activeName5:"1",activeName6:"1",chooseSearch:1,chooserefinance:1,chooseBD:1,bazaar:1,BDgeneralizeQudao:[],BDQudaoOptions:[],BDGetDataInfo:[],BDLineData:[],checkList:[],color:["#FF4500","#FFB90F","#FF34B3","#8B5A00","#66CDAA","#545454","#458B00","#CCC007","#000000"],bazaarData:[],bazaarQudaoOptions:[],bazaarQudao:[],bazaarDataInfo:[],bazaarLineData:[],bazaarcheckList:[],componentGetInfo:null,getCommentInfo:[],commentInfoLength:!0,commentVisible:!1,textareaComment:""}},components:{classlist:a("vSla")({props:["operationData","operationIndex"],data:function(){return{tableloading:!1}},methods:{commentClick:function(e,t){this.$emit("sendParentcommentRow",e)}}},Pt,!1,function(e){a("+zMR")},"data-v-65e5e0c3",null).exports,operDataEchar:a("vSla")(Ft,Lt,!1,function(e){a("vHvv")},"data-v-6469ae6f",null).exports,refinanceDataEchart:a("vSla")($t,At,!1,function(e){a("eKrN")},"data-v-79369919",null).exports},mounted:function(){var e=this;setTimeout(function(){e.userInfo=JSON.parse(localStorage.getItem("userperadmin")),e.chooseDate=Tt()[0],e.getAppAll(e.userInfo.sessionid)},300)},methods:{getAppAll:function(e){var t,a={sessionid:e},n=this;n.loading=!0,(t=a,Pe.a.post(Fe+"getDataDailyPara",t)).then(function(e){0===e.data.status&&(n.appOptions=e.data.appList,n.appValue=e.data.appList[0].id,n.mountedStatr()),1===e.data.status&&n.$router.replace("/login")})},mountedStatr:function(){var e={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:1,channelType:"6"},t=this;$e(e).then(function(e){if(0===e.data.status){t.operData=e.data.firstPage;var a={name:"运营数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["注册数据","进件数据","开户数据","提现数据","放款总笔数","放款笔均","提现总金额","收入","成本","毛利"],selected:{"进件数据":!1,"开户数据":!1,"提现数据":!1,"放款总笔数":!1,"放款笔均":!1,"提现总金额":!1,"收入":!1,"成本":!1,"毛利":!1}}],xAxisData:e.data.reportforms_admin.map(function(e,t){return e.date}),yAxisFormatter:"{value}",seriesData:[{name:"注册数据",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.register})},{name:"进件数据",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.upload})},{name:"开户数据",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.account})},{name:"提现数据",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.loan})},{name:"放款总笔数",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.loaner})},{name:"放款笔均",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.perCapitaCredit})},{name:"提现总金额",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.channelSum})},{name:"收入",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.income})},{name:"成本",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.cost})},{name:"毛利",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.grossProfit})}]};t.operLineData=a,t.loading=!1}1===e.data.status&&t.$router.replace("/login")})},toggleopSelectorFun:function(){this.toggleop=!this.toggleop},defineOpSearchFun:function(){this.chooseSearch=0,this.rangeDateop.length>0?this.getNeedData("6",this.chooseSearch,this.activeName3,this.rangeDateop):this.$message.error("请选择自定义的时间")},handleClick:function(e,t){switch(this.loading=!0,this.activeName3="1",this.activeName4="1",this.activeName5="1",this.activeName6="1",this.activeName2){case"6":this.comonentUserStatus="1",this.chooseSearch;break;case"7":this.comonentUserStatus="2",this.chooserefinance;break;case"2":this.comonentUserStatus="3",this.chooseBD;break;case"1":this.comonentUserStatus="4",this.bazaar;break;default:this.comonentUserStatus="1",1}this.userInfo.sessionid,this.appValue,this.chooseDate,this.activeName2;"6"===this.activeName2&&this.getNeedData("6",this.chooseSearch,this.activeName3,this.rangeDateop),"7"===this.activeName2&&this.financeLineData("7",this.chooserefinance,this.activeName4,this.rangeDatefinance),"2"===this.activeName2&&this.getTableAndChanl("2",this.chooseBD,this.activeName5),"1"===this.activeName2&&this.getTableBazaar("1",this.bazaar,this.activeName6)},handleClickLineOne:function(e,t){this.getNeedData("6",this.chooseSearch,this.activeName3,this.rangeDateop)},chooseDateRange:function(){this.getNeedData("6",this.chooseSearch,this.activeName3,this.rangeDateop)},getNeedData:function(e,t,a,n){this.loading=!0;var i={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:t,channelType:e,minDate:n&&n.length>0?n[0]:"",maxDate:n&&n.length>0?n[1]:""},o=this;$e(i).then(function(e){if(0===e.data.status){if(o.operData=e.data.firstPage,"1"===a&&e.data.reportforms_admin){var t={name:"运营数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["注册数据","进件数据","开户数据","提现数据","放款总笔数","放款笔均","提现总金额","收入","成本","毛利"],selected:{"进件数据":!1,"开户数据":!1,"提现数据":!1,"放款总笔数":!1,"放款笔均":!1,"提现总金额":!1,"收入":!1,"成本":!1,"毛利":!1}}],xAxisData:e.data.reportforms_admin.map(function(e,t){return e.date}),yAxisFormatter:"{value}",seriesData:[{name:"注册数据",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.register})},{name:"进件数据",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.upload})},{name:"开户数据",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.account})},{name:"提现数据",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.loan})},{name:"放款总笔数",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.loaner})},{name:"放款笔均",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.perCapitaCredit})},{name:"提现总金额",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.channelSum})},{name:"收入",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.income})},{name:"成本",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.cost})},{name:"毛利",type:"line",showAllSymbol:!0,label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.grossProfit})}]};o.operLineData=t}if("2"===a){var n={name:"运营数据转化率曲线",tooltipTrigger:"item",tooltipFormatter:"{b}:\n{c}%",legendData:[{x:"center",icon:"rect",data:["进件转化","开户转化","毛利率"],selected:{"开户转化":!1,"毛利率":!1}}],xAxisData:e.data.reportforms_admin.map(function(e,t){return e.date}),yAxisFormatter:"{value} %",seriesData:[{name:"进件转化",type:"line",label:{positiong:"top",formatter:"{c}%",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.uploadConversion})},{name:"开户转化",type:"line",label:{positiong:"top",formatter:"{c}%",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.accountConversion})},{name:"毛利率",type:"line",label:{positiong:"top",formatter:"{c}%",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.grossProfitRate})}]};o.operLineData=n}o.loading=!1}1===e.data.status&&o.$router.replace("/login")})},handleClickLineTow:function(e,t){this.financeLineData("7",this.chooserefinance,this.activeName4,this.rangeDatefinance)},togglerefinanceSelectorFun:function(){this.togglerefinance=!this.togglerefinance},refinanceSearchFun:function(){this.chooserefinance=0,this.rangeDatefinance.length>0?this.financeLineData("7",this.chooserefinance,this.activeName4,this.rangeDatefinance):this.$message.error("请选择自定义的时间")},financeDataChange:function(){this.financeLineData("7",this.chooserefinance,this.activeName4,this.rangeDatefinance)},financeLineData:function(e,t,a,n){this.loading=!0;var i={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:t,channelType:e,minDate:n&&n.length>0?n[0]:"",maxDate:n&&n.length>0?n[1]:""},o=this;$e(i).then(function(e){if(0===e.data.status){if(o.refinanceData=e.data.firstPage,"1"===a){var t={name:"续贷数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["放款总笔数","首提笔数","续贷笔数","提现总额","首提总额","续贷总额","首提笔均","续贷笔均","首贷收入","续贷收入","首贷毛利","续贷毛利"],selected:{"首提笔数":!1,"续贷笔数":!1,"提现总额":!1,"首提总额":!1,"续贷总额":!1,"首提笔均":!1,"续贷笔均":!1,"首贷收入":!1,"续贷收入":!1,"首贷毛利":!1,"续贷毛利":!1}}],xAxisData:e.data.reportforms_admin.map(function(e,t){return e.date}),yAxisFormatter:"{value}",seriesData:[{name:"放款总笔数",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.loaner})},{name:"首提笔数",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstGetPer})},{name:"续贷笔数",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondGetPi})},{name:"提现总额",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.channelSum})},{name:"首提总额",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstGetSum})},{name:"续贷总额",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondGetSum})},{name:"首提笔均",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstPer})},{name:"续贷笔均",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondPer})},{name:"首贷收入",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstIncome})},{name:"续贷收入",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondIncome})},{name:"首贷毛利",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstProfit})},{name:"续贷毛利",type:"line",label:{positiong:"top",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondProfit})}]};o.refinanceLineData=t}if("2"===a){var n={name:"续贷占比曲线",tooltipTrigger:"item",tooltipFormatter:"{a}:\n{b}:\n{c}%",legendData:[{x:"center",icon:"rect",data:["首贷毛利占比","续贷毛利占比"]}],xAxisData:e.data.reportforms_admin.map(function(e,t){return e.date}),yAxisFormatter:"{value} %",seriesData:[{name:"首贷毛利占比",type:"line",label:{positiong:"top",formatter:"{c}%",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.firstPrcent})},{name:"续贷毛利占比",type:"line",label:{positiong:"top",formatter:"{c}%",show:!0},data:e.data.reportforms_admin.map(function(e,t){return e.secondPrcent})}]};o.refinanceLineData=n}o.loading=!1}1===e.data.status&&o.$router.replace("/login")})},handleClickLineThree:function(e,t){this.checkList=this.BDgeneralizeQudao,this.BDLineShowTable(this.activeName5)},togglereBDSelectorFun:function(){this.togglereBD=!this.togglereBD,this.rangeDateBD=[],this.statusBDDate=this.togglereBD},getTableAndChanl:function(e,t,a){this.loading=!0,this.BDQudaoOptions=[],this.BDgeneralizeQudao=[];var n={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:t,channelType:e},i=this;$e(n).then(function(e){if(0===e.data.status){i.BDData=e.data.firstPage;for(var t=0;t<e.data.reportforms_admin.length;t++)i.BDQudaoOptions.push(e.data.reportforms_admin[t].channelName);i.loading=!1}1===e.data.status&&i.$router.replace("/login")})},BDChannelChoose:function(){this.checkList=this.BDgeneralizeQudao},clilcBtnChannel:function(e,t){},checkChange:function(e,t){this.searchLineData(this.checkList,this.rangeDateBD)},searchLineData:function(e){if(this.rangeDateBD&&this.rangeDateBD.length>0&&(this.chooseBD=0),0==this.statusBDDate&&this.rangeDateBD.length<=0)this.$message.error("请选择自定义的时间");else{if(this.loading=!0,this.BDGetDataInfo=[],!(this.BDgeneralizeQudao.length>0))return this.$message.error("推广渠道为必选项"),void(this.loading=!1);var t,a={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:this.chooseBD,channelType:this.activeName2,channelName:e,minDate:this.rangeDateBD&&this.rangeDateBD.length>0?this.rangeDateBD[0]:"",maxDate:this.rangeDateBD&&this.rangeDateBD.length>0?this.rangeDateBD[1]:""},n=this;(t=a,Pe.a.post(Fe+"getBdCurveData",t)).then(function(e){if(0===e.data.status){for(var t=e.data.reportforms_admin,a=0;a<t.length;a++)n.BDGetDataInfo.push({name:t[a].name,value:JSON.parse(t[a].value)});n.BDLineShowTable(n.activeName5)}1===e.data.status&&n.$router.replace("/login")})}},BDLineShowTable:function(e){var t={};if(this.BDGetDataInfo.length<=0)return t={name:"BD数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:[],xAxisData:[],yAxisFormatter:[],seriesData:[]},this.BDLineData=t,void(this.loading=!1);if("1"===e){for(var a=this.color,n=[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["注册数据","进件数据","开户数据","首提人数","首提金额","外部首提金额","放款总笔数","提现总金额","提现笔均","收入","成本","毛利","优化后成本","优化后毛利","首贷收入"],selected:{"进件数据":!1,"开户数据":!1,"首提人数":!1,"首提金额":!1,"外部首提金额":!1,"放款总笔数":!1,"提现总金额":!1,"提现笔均":!1,"收入":!1,"成本":!1,"毛利":!1,"优化后成本":!1,"优化后毛利":!1,"首贷收入":!1}}],i=this.BDGetDataInfo[0].value.map(function(e,t){return e.date}),o=[],l=this.BDGetDataInfo.length,s=0;s<this.BDgeneralizeQudao.length;s++)for(var r=0;r<l;r++)this.BDgeneralizeQudao[s]===this.BDGetDataInfo[r].name&&o.push({name:"注册数据",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.register})},{name:"进件数据",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.upload})},{name:"开户数据",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.account})},{name:"首提人数",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.firstGetPer})},{name:"首提金额",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.firstGetSum})},{name:"外部首提金额",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.outFirstGetSum})},{name:"放款总笔数",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.loaner})},{name:"提现总金额",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.channelSum})},{name:"提现笔均",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.channelPer})},{name:"收入",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.income})},{name:"成本",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.cost})},{name:"毛利",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.grossProfit})},{name:"优化后成本",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.cost2})},{name:"优化后毛利",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.grossProfit2})},{name:"首贷收入",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.firstIncome})});t={name:"BD数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:n,xAxisData:i,yAxisFormatter:"{value}",seriesData:o},this.BDLineData=t,this.$set(this.BDLineData,"BD数据曲线",t.seriesData)}if("2"===e){var c=this.color,d=[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["进件转化率","开户转化率","毛利率","优化后毛利率"],selected:{"开户转化率":!1,"毛利率":!1,"优化后毛利率":!1}}],u=this.BDGetDataInfo[0].value.map(function(e,t){return e.date}),p=(o=[],this.BDGetDataInfo.length);for(s=0;s<this.BDgeneralizeQudao.length;s++)for(r=0;r<p;r++)this.BDgeneralizeQudao[s]===this.BDGetDataInfo[r].name&&o.push({name:"进件转化率",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.uploadConversion})},{name:"开户转化率",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.accountConversion})},{name:"毛利率",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.grossProfitRate})},{name:"优化后毛利率",type:"line",label:{positiong:"top",formatter:this.BDGetDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.BDGetDataInfo[r].value.map(function(e,t){return e.grossProfitRate2})});t={name:"BD数据曲线",tooltipTrigger:"axis",tooltipFormatter:"{a}:\n{b}:\n{c}%",legendData:d,xAxisData:u,yAxisFormatter:"{value}%",seriesData:o},this.BDLineData=t,this.$set(this.BDLineData,"BD数据曲线",t.seriesData)}this.loading=!1},handleClickLineFour:function(e,t){this.bazaarcheckList=this.bazaarQudao,this.BDLineShowTable(this.activeName6)},togglerebazaarSelectorFun:function(){this.togglerebazaar=!this.togglerebazaar,this.rangeDatebazaar=[],this.statusbazaarDate=this.togglerebazaar},getTableBazaar:function(e,t,a){this.loading=!0,this.bazaarQudaoOptions=[],this.bazaarQudao=[];var n={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:t,channelType:e},i=this;$e(n).then(function(e){if(0===e.data.status){i.bazaarData=e.data.firstPage;for(var t=0;t<e.data.reportforms_admin.length;t++)i.bazaarQudaoOptions.push(e.data.reportforms_admin[t].channelName);i.loading=!1}1===e.data.status&&i.$router.replace("/login")})},bazaarQudaochange:function(e){this.bazaarcheckList=e},bazaarSearch:function(e){if(this.rangeDatebazaar&&this.rangeDatebazaar.length>0&&(this.bazaar=0),0==this.statusbazaarDate&&this.rangeDatebazaar.length<=0)this.$message.error("请选择自定义的时间");else{if(this.loading=!0,this.bazaarDataInfo=[],!(this.bazaarQudao.length>0))return this.$message.error("市场推广渠道为必选项"),void(this.loading=!1);var t,a={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,dateType:this.bazaar,channelType:this.activeName2,channelName:e,minDate:this.rangeDatebazaar&&this.rangeDatebazaar.length>0?this.rangeDatebazaar[0]:"",maxDate:this.rangeDatebazaar&&this.rangeDatebazaar.length>0?this.rangeDatebazaar[1]:""},n=this;(t=a,Pe.a.post(Fe+"getMarketCurveData",t)).then(function(e){if(0===e.data.status){for(var t=e.data.reportforms_admin,a=0;a<t.length;a++)n.bazaarDataInfo.push({name:t[a].name,value:JSON.parse(t[a].value)});n.bazaarLineShowTable(n.activeName6)}1===e.data.status&&n.$router.replace("/login")})}},bazaarCheckChange:function(e,t){this.bazaarSearch(this.bazaarcheckList)},bazaarLineShowTable:function(e){var t={};if(this.bazaarDataInfo.length<=0)return t={name:"1"===e?"市场数据曲线":"市场转化率曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:[],xAxisData:[],yAxisFormatter:[],seriesData:[]},this.bazaarLineData=t,void(this.loading=!1);if("1"===e){for(var a=this.color,n=[{y:"center",x:"right",orient:"vertical",icon:"rect",data:["注册数据","进件数据","开户数据","放款总笔数","提现总金额","提现笔均","收入","成本","毛利","注册CPA","开户CPA"],selected:{"进件数据":!1,"开户数据":!1,"放款总笔数":!1,"提现总金额":!1,"提现笔均":!1,"收入":!1,"成本":!1,"毛利":!1,"注册CPA":!1,"开户CPA":!1}}],i=this.bazaarDataInfo[0].value.map(function(e,t){return e.date}),o=[],l=this.bazaarDataInfo.length,s=0;s<this.bazaarQudao.length;s++)for(var r=0;r<l;r++)this.bazaarQudao[s]===this.bazaarDataInfo[r].name&&o.push({name:"注册数据",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.register})},{name:"进件数据",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.upload})},{name:"开户数据",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.account})},{name:"放款总笔数",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.loaner})},{name:"提现总金额",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.channelSum})},{name:"提现笔均",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.perCapital})},{name:"收入",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.income})},{name:"成本",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.cost})},{name:"毛利",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.grossProfit})},{name:"注册CPA",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.registerCpa})},{name:"开户CPA",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}",show:!0},color:a[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.accountCpa})});t={name:"市场数据曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:n,xAxisData:i,yAxisFormatter:"{value}",seriesData:o},this.bazaarLineData=t}if("2"===e){var c=this.color,d=[{x:"center",icon:"rect",data:["进件转化率","开户转化率","毛利率"],selected:{"开户转化率":!1,"毛利率":!1}}],u=this.bazaarDataInfo[0].value.map(function(e,t){return e.date}),p=(o=[],this.bazaarDataInfo.length);for(s=0;s<this.bazaarQudao.length;s++)for(r=0;r<p;r++)this.bazaarQudao[s]===this.bazaarDataInfo[r].name&&o.push({name:"进件转化率",type:"line",label:{positiong:"top",top:"2%",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.uploadConversion})},{name:"开户转化率",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.accountConversion})},{name:"毛利率",type:"line",label:{positiong:"top",formatter:this.bazaarDataInfo[r].name+":\n{a}{c}%",show:!0},color:c[r],data:this.bazaarDataInfo[r].value.map(function(e,t){return e.grossProfitRate})});t={name:"市场转化率曲线",tooltipTrigger:"axis",tooltipFormatter:"",legendData:d,xAxisData:u,yAxisFormatter:"{value}%",seriesData:o},this.bazaarLineData=t}this.loading=!1},clickRowComment:function(e){this.componentGetInfo=e,this.textareaComment="",this.getCommentInfo=[];var t={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,type:this.activeName2,channelName:e.channelName?e.channelName:"",channel:e.channel?e.channel:""},a=this;Ae(t).then(function(e){0===e.data.status&&(e.data.reportforms_admin&&e.data.reportforms_admin.length>0?(a.commentInfoLength=!0,a.getCommentInfo=e.data.reportforms_admin):a.commentInfoLength=!1,a.commentVisible=!0),1===e.data.status&&a.$router.replace("/login")})},saveComment:function(){var e={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,type:this.activeName2,channelName:this.componentGetInfo.channelName?this.componentGetInfo.channelName:"",channel:this.componentGetInfo.channel?this.componentGetInfo.channel:"",comment:this.textareaComment},t=this;qe(e).then(function(e){0===e.data.status&&(t.$message({message:"评论保存成功",type:"success"}),t.commentVisible=!1),1===e.data.status&&t.$router.replace("/login")})},dailyDown:function(){var e,t=void 0,a={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.chooseDate,channelType:this.activeName2};switch(this.activeName2){case"6":t="日报运营数据",e=Re;break;case"7":t="日报续贷数据",e=Me;break;case"2":t="日报BD数据",e=Be;break;case"1":t="日报市场数据",e=Ee}e(a).then(function(e){var a=e.data,n=new Blob([a]),i=t+"统计表.xls";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)})}}},Rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"daily"},[a("div",{staticClass:"header"},[a("el-date-picker",{staticClass:"dateStyle",attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}}),e._v(" "),a("el-select",{staticClass:"dateStyle marginLeft",attrs:{placeholder:"选择APP",size:"small"},model:{value:e.appValue,callback:function(t){e.appValue=t},expression:"appValue"}},e._l(e.appOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"info",icon:"el-icon-search",size:"small"},on:{click:e.handleClick}}),e._v(" "),a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small"},on:{click:e.dailyDown}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"运营数据",name:"6"}},[a("classlist",{attrs:{operationData:e.operData,operationIndex:6},on:{sendParentcommentRow:e.clickRowComment}}),e._v(" "),a("div",{staticClass:"lineStyle",style:{display:"6"==e.activeName2?"block":"none"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickLineOne},model:{value:e.activeName3,callback:function(t){e.activeName3=t},expression:"activeName3"}},[a("el-tab-pane",{attrs:{label:"数据曲线",name:"1"}},[a("div",{staticClass:"chooseOpDate"},[e.toggleop?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.toggleopSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.toggleop,expression:"toggleop"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},on:{change:e.chooseDateRange},model:{value:e.chooseSearch,callback:function(t){e.chooseSearch=t},expression:"chooseSearch"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e(),e._v(" "),e.toggleop?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.toggleopSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDateop,callback:function(t){e.rangeDateop=t},expression:"rangeDateop"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.defineOpSearchFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])],1)]),e._v(" "),a("br"),e._v(" "),"1"===e.activeName3&&"1"===e.comonentUserStatus?a("operDataEchar",{attrs:{opDataAll:e.operLineData,operIndex:1}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"转化率曲线",name:"2"}},[a("div",{staticClass:"chooseOpDate"},[e.toggleop?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.toggleopSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.toggleop,expression:"toggleop"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},on:{change:e.chooseDateRange},model:{value:e.chooseSearch,callback:function(t){e.chooseSearch=t},expression:"chooseSearch"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e(),e._v(" "),e.toggleop?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.toggleopSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDateop,callback:function(t){e.rangeDateop=t},expression:"rangeDateop"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.defineOpSearchFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])],1)]),e._v(" "),a("br"),e._v(" "),"2"===e.activeName3&&"1"===e.comonentUserStatus?a("operDataEchar",{attrs:{opDataAll:e.operLineData,operIndex:2}}):e._e()],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"续贷数据",name:"7"}},[a("classlist",{attrs:{operationData:e.refinanceData,operationIndex:7},on:{sendParentcommentRow:e.clickRowComment}}),e._v(" "),a("div",{staticClass:"lineStyle",style:{display:"7"==e.activeName2?"block":"none"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickLineTow},model:{value:e.activeName4,callback:function(t){e.activeName4=t},expression:"activeName4"}},[a("el-tab-pane",{attrs:{label:"数据曲线",name:"1"}},[a("div",{staticClass:"chooseOpDate"},[e.togglerefinance?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerefinanceSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglerefinance,expression:"togglerefinance"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},on:{change:e.financeDataChange},model:{value:e.chooserefinance,callback:function(t){e.chooserefinance=t},expression:"chooserefinance"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e(),e._v(" "),e.togglerefinance?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerefinanceSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDatefinance,callback:function(t){e.rangeDatefinance=t},expression:"rangeDatefinance"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.refinanceSearchFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])],1)]),e._v(" "),a("br"),e._v(" "),"1"===e.activeName4&&"2"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.refinanceLineData,operIndex:2}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"占比曲线",name:"2"}},[a("div",{staticClass:"chooseOpDate"},[e.togglerefinance?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerefinanceSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglerefinance,expression:"togglerefinance"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},on:{change:e.financeDataChange},model:{value:e.chooserefinance,callback:function(t){e.chooserefinance=t},expression:"chooserefinance"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e(),e._v(" "),e.togglerefinance?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerefinanceSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDatefinance,callback:function(t){e.rangeDatefinance=t},expression:"rangeDatefinance"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.refinanceSearchFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])],1)]),e._v(" "),a("br"),e._v(" "),"2"===e.activeName4&&"2"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.refinanceLineData,operIndex:2}}):e._e()],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"BD数据",name:"2"}},[a("classlist",{attrs:{operationData:e.BDData,operationIndex:2},on:{sendParentcommentRow:e.clickRowComment}}),e._v(" "),a("div",{staticClass:"lineStyle",style:{display:"2"==e.activeName2?"block":"none"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickLineThree},model:{value:e.activeName5,callback:function(t){e.activeName5=t},expression:"activeName5"}},[a("el-tab-pane",{attrs:{label:"数据曲线",name:"1"}},[a("div",{staticClass:"chooseOpDate"},[a("div",{staticClass:"searchOne"},[e.togglereBD?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglereBDSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglereBD,expression:"togglereBD"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},on:{BDchangeDate:function(e){}},model:{value:e.chooseBD,callback:function(t){e.chooseBD=t},expression:"chooseBD"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"searchTow"},[e.togglereBD?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglereBDSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDateBD,callback:function(t){e.rangeDateBD=t},expression:"rangeDateBD"}})],1)]),e._v(" "),a("div",{staticClass:"searchThree"},[a("el-select",{staticStyle:{"margin-left":"20px",width:"260px"},attrs:{multiple:"",filterable:"","collapse-tags":"",size:"small",clearable:"",placeholder:"推广渠道"},on:{change:e.BDChannelChoose},model:{value:e.BDgeneralizeQudao,callback:function(t){e.BDgeneralizeQudao=t},expression:"BDgeneralizeQudao"}},e._l(e.BDQudaoOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:function(t){e.searchLineData(e.BDgeneralizeQudao)}}})],1)]),e._v(" "),a("div",{staticStyle:{height:"60px"}}),e._v(" "),a("div",{staticClass:"channelName"},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.BDgeneralizeQudao,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t},on:{change:function(a){e.checkChange(t,n)}}})}))],1),e._v(" "),a("br"),e._v(" "),"1"===e.activeName5&&"3"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.BDLineData,operIndex:1}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"转化率曲线",name:"2"}},[a("div",{staticClass:"chooseOpDate"},[a("div",{staticClass:"searchOne"},[e.togglereBD?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglereBDSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglereBD,expression:"togglereBD"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},model:{value:e.chooseBD,callback:function(t){e.chooseBD=t},expression:"chooseBD"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"searchTow"},[e.togglereBD?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglereBDSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDateBD,callback:function(t){e.rangeDateBD=t},expression:"rangeDateBD"}})],1)]),e._v(" "),a("div",{staticClass:"searchThree"},[a("el-select",{staticStyle:{"margin-left":"20px",width:"260px"},attrs:{multiple:"",filterable:"","collapse-tags":"",size:"small",clearable:"",placeholder:"推广渠道"},on:{change:e.BDChannelChoose},model:{value:e.BDgeneralizeQudao,callback:function(t){e.BDgeneralizeQudao=t},expression:"BDgeneralizeQudao"}},e._l(e.BDQudaoOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:function(t){e.searchLineData(e.BDgeneralizeQudao)}}})],1)]),e._v(" "),a("div",{staticStyle:{height:"60px"}}),e._v(" "),a("div",{staticClass:"channelName"},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.BDgeneralizeQudao,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t},on:{change:function(a){e.checkChange(t,n)}}})}))],1),e._v(" "),a("br"),e._v(" "),"2"===e.activeName5&&"3"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.BDLineData,operIndex:2}}):e._e()],1)],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"市场数据",name:"1"}},[a("classlist",{attrs:{operationData:e.bazaarData,operationIndex:1},on:{sendParentcommentRow:e.clickRowComment}}),e._v(" "),a("div",{staticClass:"lineStyle",style:{display:"1"==e.activeName2?"block":"none"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClickLineFour},model:{value:e.activeName6,callback:function(t){e.activeName6=t},expression:"activeName6"}},[a("el-tab-pane",{attrs:{label:"数据曲线",name:"1"}},[a("div",{staticClass:"chooseOpDate"},[a("div",{staticClass:"searchOne"},[e.togglerebazaar?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerebazaarSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglerebazaar,expression:"togglerebazaar"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},model:{value:e.bazaar,callback:function(t){e.bazaar=t},expression:"bazaar"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"searchTow"},[e.togglerebazaar?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerebazaarSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDatebazaar,callback:function(t){e.rangeDatebazaar=t},expression:"rangeDatebazaar"}})],1)]),e._v(" "),a("div",{staticClass:"searchThree"},[a("el-select",{staticStyle:{"margin-left":"20px",width:"260px"},attrs:{multiple:"",filterable:"","collapse-tags":"",size:"small",clearable:"",placeholder:"推广渠道"},on:{change:function(t){e.bazaarQudaochange(e.bazaarQudao)}},model:{value:e.bazaarQudao,callback:function(t){e.bazaarQudao=t},expression:"bazaarQudao"}},e._l(e.bazaarQudaoOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:function(t){e.bazaarSearch(e.bazaarQudao)}}})],1)]),e._v(" "),a("div",{staticStyle:{height:"60px"}}),e._v(" "),a("div",{staticClass:"channelName"},[a("el-checkbox-group",{model:{value:e.bazaarcheckList,callback:function(t){e.bazaarcheckList=t},expression:"bazaarcheckList"}},e._l(e.bazaarQudao,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t},on:{change:function(a){e.bazaarCheckChange(t,n)}}})}))],1),e._v(" "),a("br"),e._v(" "),"1"===e.activeName6&&"4"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.bazaarLineData,operIndex:1}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"转化率曲线",name:"2"}},[a("div",{staticClass:"chooseOpDate"},[a("div",{staticClass:"searchOne"},[e.togglerebazaar?a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerebazaarSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("自定义查询")]),e._v(" "),a("el-radio-group",{directives:[{name:"show",rawName:"v-show",value:e.togglerebazaar,expression:"togglerebazaar"}],attrs:{disabled:e.loading,fill:"#409EFF",size:"small"},model:{value:e.bazaar,callback:function(t){e.bazaar=t},expression:"bazaar"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("近7天")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("近五周")]),e._v(" "),a("el-radio-button",{attrs:{label:"3"}},[e._v("近四个月")])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"searchTow"},[e.togglerebazaar?e._e():a("div",{staticClass:"select-wrap"},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.togglerebazaarSelectorFun}},[a("i",{staticClass:"fa fa-exchange"}),e._v("快速查询")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.rangeDatebazaar,callback:function(t){e.rangeDatebazaar=t},expression:"rangeDatebazaar"}})],1)]),e._v(" "),a("div",{staticClass:"searchThree"},[a("el-select",{staticStyle:{"margin-left":"20px",width:"260px"},attrs:{multiple:"",filterable:"","collapse-tags":"",size:"small",clearable:"",placeholder:"推广渠道"},on:{change:function(t){e.bazaarQudaochange(e.bazaarQudao)}},model:{value:e.bazaarQudao,callback:function(t){e.bazaarQudao=t},expression:"bazaarQudao"}},e._l(e.bazaarQudaoOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:function(t){e.bazaarSearch(e.bazaarQudao)}}})],1)]),e._v(" "),a("div",{staticStyle:{height:"60px"}}),e._v(" "),a("div",{staticClass:"channelName"},[a("el-checkbox-group",{model:{value:e.bazaarcheckList,callback:function(t){e.bazaarcheckList=t},expression:"bazaarcheckList"}},e._l(e.bazaarQudao,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t},on:{change:function(a){e.bazaarCheckChange(t,n)}}})}))],1),e._v(" "),a("br"),e._v(" "),"2"===e.activeName6&&"4"===e.comonentUserStatus?a("refinanceDataEchart",{attrs:{opDataAll:e.bazaarLineData,operIndex:2}}):e._e()],1)],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{staticStyle:{overflow:"hidden","min-width":"50%"},attrs:{title:"评论",visible:e.commentVisible,width:"60%"},on:{"update:visible":function(t){e.commentVisible=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.commentInfoLength,expression:"commentInfoLength"}],staticClass:"commentInfo"},e._l(e.getCommentInfo,function(t){return a("div",{staticClass:"boxcomment clearfix"},[a("div",{staticClass:"commentUserNameDate"},[a("div",{staticClass:"uesrName"},[a("span",[e._v("账号:")]),a("span",[e._v(e._s(t.name))])]),e._v(" "),a("div",{staticClass:"commentdate"},[a("span",[e._v(e._s(t.commentTime))])])]),e._v(" "),a("div",{staticClass:"commentline"}),e._v(" "),a("div",{staticClass:"commentConter"},[e._v(e._s(t.comment))])])})),e._v(" "),a("div",{staticClass:"statrComment"},[a("div",{staticClass:"tltleComment"},[e._v("添加评论")]),e._v(" "),a("div",{staticClass:"inputInfoContent"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入评论内容"},model:{value:e.textareaComment,callback:function(t){e.textareaComment=t},expression:"textareaComment"}})],1)]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.commentVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveComment}},[e._v("提交")])],1)])],1)},staticRenderFns:[]};var Mt=a("vSla")(qt,Rt,!1,function(e){a("vyZ2")},"data-v-76c8870d",null).exports,Bt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"classIfyInfo"},[a("div",{style:{display:6===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:e.operationData&&e.operationData.length>0?500:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"loan",label:"提现"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"放款总笔数",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现总金额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"放款笔均金额",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return["total"!=t.row.date?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})]):e._e()]}}])})],1)],1),e._v(" "),a("div",{style:{display:7===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:e.operationData&&e.operationData.length>0?500:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondGetPi",label:"续贷笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首提总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondGetSum",label:"续贷总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstPer",label:"首提笔均"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondPer",label:"续贷笔均"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstIncome",label:"首贷收入",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstProfit",label:"首贷毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.firstProfit<0?"colorFont":""},[e._v(e._s(t.row.firstProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"secondIncome",label:"续贷收入",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondProfit",label:"续贷毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.secondProfit<0?"colorFont":""},[e._v(e._s(t.row.secondProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstPrcent",label:"首贷毛利占比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.firstPrcent<0?"colorFont":""},[e._v(e._s(t.row.firstPrcent)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"secondPrcent",label:"续贷毛利占比",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.secondPrcent<0?"colorFont":""},[e._v(e._s(t.row.secondPrcent)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return["total"!=t.row.date?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})]):e._e()]}}])})],1)],1),e._v(" "),a("div",{style:{display:2===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:e.operationData&&e.operationData.length>0?500:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号(一级)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"渠道首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outFirstGetSum",label:"外部首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"渠道笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cost2",label:"优化后成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit2",label:"优化后毛利",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit2<0?"colorFont":""},[e._v(e._s(t.row.grossProfit2))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate2",label:"优化后毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate2<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate2)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"roi"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstIncome",label:"首贷收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROIFirst",label:"roi首贷"}}),e._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deailClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1),e._v(" "),a("div",{style:{display:1===e.operationIndex?"block":"none"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.operationData,height:e.operationData&&e.operationData.length>0?500:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"提现笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"registerCpa",label:"注册CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountCpa",label:"开户CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"ROI"}}),e._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deailClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.commentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1)])},staticRenderFns:[]};var Et={data:function(){return{userInfo:null,loading:!1,chooseDate:[],appValue:1,appOptions:[],activeName2:"6",getNeedData:[],refinanceData:[],BDData:[],bazaarData:[],componentGetInfo:null,getCommentInfo:[],commentInfoLength:!1,commentVisible:!1,textareaComment:"",deilBDVisible:!1,deilBDRow:null,OPBDData:[],deilbazaarVisible:!1,opbazaarDData:[],tableloading:!1}},components:{dailyHistoryTable:a("vSla")({props:["operationData","operationIndex"],data:function(){return{tableloading:!1}},methods:{commentClick:function(e,t){this.$emit("sendParentcommentRow",e)},deailClick:function(e,t){this.$emit("sendDeilRow",e)}}},Bt,!1,function(e){a("vGfU")},"data-v-3f1a993c",null).exports},mounted:function(){var e=this;setTimeout(function(){e.userInfo=JSON.parse(localStorage.getItem("userperadmin")),e.chooseDate=[Tt()[0],Nt()[0]],e.getAppInfo(e.userInfo.sessionid)},300)},methods:{handleClick:function(e,t){this.loading=!0,this.searchHistory()},getAppInfo:function(e){this.loading=!0;var t,a=this;(t={sessionid:e},Pe.a.post(Fe+"dailyHistory ",t)).then(function(e){0===e.data.status&&(a.appOptions=e.data.appList,a.$nextTick(function(){a.searchHistory()})),1===e.data.status&&a.$router.replace("/login")})},searchHistory:function(){var e=this;this.getNeedData=[],this.refinanceData=[],this.BDData=[],this.bazaarData=[];var t,a={sessionid:this.userInfo.sessionid,channelType:this.activeName2,appId:this.appValue,minDate:this.chooseDate.length>0?this.chooseDate[0]:"",maxDate:this.chooseDate.length>0?this.chooseDate[1]:""},n=this;"6"!==this.activeName2&&"7"!==this.activeName2||(t=a,Pe.a.post(Fe+"getOperateAndSecondData",t)).then(function(t){if(0===t.data.status){switch(e.activeName2){case"6":n.getNeedData=t.data.reportforms_admin;break;case"7":n.refinanceData=t.data.reportforms_admin}n.loading=!1}1===t.data.status&&n.$router.replace("/login")}),"2"!==this.activeName2&&"1"!==this.activeName2||function(e){return Pe.a.post(Fe+"getBdAndMarketData",e)}(a).then(function(t){if(0===t.data.status){switch(e.activeName2){case"2":n.BDData=t.data.reportforms_admin;break;case"1":n.bazaarData=t.data.reportforms_admin}n.loading=!1}1===t.data.status&&n.$router.replace("/login")})},clickRowComment:function(e){this.componentGetInfo=e,this.textareaComment="",this.getCommentInfo=[];var t={sessionid:this.userInfo.sessionid,appId:this.appValue,date:e.date,type:this.activeName2,channelName:e.channelName?e.channelName:"",channel:e.channel?e.channel:""},a=this;Ae(t).then(function(e){0===e.data.status&&(e.data.reportforms_admin&&e.data.reportforms_admin.length>0?(a.commentInfoLength=!0,a.getCommentInfo=e.data.reportforms_admin):a.commentInfoLength=!1,a.commentVisible=!0),1===e.data.status&&a.$router.replace("/login")})},saveComment:function(){var e={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.componentGetInfo.date,type:this.activeName2,channelName:this.componentGetInfo.channelName?this.componentGetInfo.channelName:"",channel:this.componentGetInfo.channel?this.componentGetInfo.channel:"",comment:this.textareaComment},t=this;qe(e).then(function(e){0===e.data.status&&(t.$message({message:"评论保存成功",type:"success"}),t.commentVisible=!1),1===e.data.status&&t.$router.replace("/login")})},clickDeil:function(e){var t,a=this;if(this.tableloading=!0,this.deilBDRow=e,"2"===this.activeName2||"1"===this.activeName2){var n={sessionid:this.userInfo.sessionid,date:e.date,channelType:this.activeName2,appId:this.appValue},i=this;(t=n,Pe.a.post(Fe+"getBdAndMarketDeatailData",t)).then(function(e){0===e.data.status&&("2"===a.activeName2&&(i.OPBDData=e.data.reportforms_admin,i.deilBDVisible=!0),"1"===a.activeName2&&(i.opbazaarDData=e.data.reportforms_admin,i.deilbazaarVisible=!0),i.tableloading=!1),1===e.data.status&&i.$router.replace("/login")})}},detailsCommentClick:function(e,t){this.clickRowComment(e)},bazaarCommentClick:function(e,t){this.clickRowComment(e)},tableDown:function(){var e,t=void 0,a={sessionid:this.userInfo.sessionid,appId:this.appValue,minDate:this.chooseDate.length>0?this.chooseDate[0]:"",maxDate:this.chooseDate.length>0?this.chooseDate[1]:"",channelType:this.activeName2};switch(this.activeName2){case"6":t="日报历史运营数据",e=Oe;break;case"7":t="日报历史续贷数据",e=Oe;break;case"2":t="日报历史BD数据",e=He;break;case"1":t="日报历史市场数据",e=He}e(a).then(function(e){var a=e.data,n=new Blob([a]),i=t+"统计表.xls";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=i,o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,i)})},BDDeilDown:function(){var e={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.deilBDRow.date,channelType:this.activeName2};Ge(e).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="日报历史BD详情统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"日报历史BD详情统计表.xls")})},deilbazaarDown:function(){var e={sessionid:this.userInfo.sessionid,appId:this.appValue,date:this.deilBDRow.date,channelType:this.activeName2};Ge(e).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="日报历史市场详情统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"日报历史市场详情统计表.xls")})}}},Ot={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dailyHistor"},[a("div",{staticClass:"header"},[a("span",{staticClass:"hraderFont"},[e._v("起止时间:")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1},model:{value:e.chooseDate,callback:function(t){e.chooseDate=t},expression:"chooseDate"}}),e._v(" "),a("el-select",{staticClass:"dateStyle marginLeft",attrs:{placeholder:"选择APP",size:"small"},model:{value:e.appValue,callback:function(t){e.appValue=t},expression:"appValue"}},e._l(e.appOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"marginLeft",attrs:{type:"info",icon:"el-icon-search",size:"small"},on:{click:e.searchHistory}}),e._v(" "),a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"small"},on:{click:e.tableDown}})],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"运营数据",name:"6"}},[a("dailyHistoryTable",{attrs:{operationData:e.getNeedData,operationIndex:6},on:{sendParentcommentRow:e.clickRowComment}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"续贷数据",name:"7"}},[a("dailyHistoryTable",{attrs:{operationData:e.refinanceData,operationIndex:7},on:{sendParentcommentRow:e.clickRowComment}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"BD数据",name:"2"}},[a("dailyHistoryTable",{attrs:{operationData:e.BDData,operationIndex:2},on:{sendParentcommentRow:e.clickRowComment,sendDeilRow:e.clickDeil}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"市场数据",name:"1"}},[a("dailyHistoryTable",{attrs:{operationData:e.bazaarData,operationIndex:1},on:{sendParentcommentRow:e.clickRowComment,sendDeilRow:e.clickDeil}})],1)],1)],1),e._v(" "),a("el-dialog",{staticStyle:{overflow:"hidden","min-width":"50%"},attrs:{title:"评论",visible:e.commentVisible,width:"60%"},on:{"update:visible":function(t){e.commentVisible=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.commentInfoLength,expression:"commentInfoLength"}],staticClass:"commentInfo"},e._l(e.getCommentInfo,function(t){return a("div",{staticClass:"boxcomment clearfix"},[a("div",{staticClass:"commentUserNameDate"},[a("div",{staticClass:"uesrName"},[a("span",[e._v("账号:")]),a("span",[e._v(e._s(t.name))])]),e._v(" "),a("div",{staticClass:"commentdate"},[a("span",[e._v(e._s(t.commentTime))])])]),e._v(" "),a("div",{staticClass:"commentline"}),e._v(" "),a("div",{staticClass:"commentConter"},[e._v(e._s(t.comment))])])})),e._v(" "),a("div",{staticClass:"statrComment"},[a("div",{staticClass:"tltleComment"},[e._v("添加评论")]),e._v(" "),a("div",{staticClass:"inputInfoContent"},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入评论内容"},model:{value:e.textareaComment,callback:function(t){e.textareaComment=t},expression:"textareaComment"}})],1)]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.commentVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveComment}},[e._v("提交")])],1)]),e._v(" "),a("el-dialog",{staticStyle:{overflow:"hidden","min-width":"50%"},attrs:{title:"详情",visible:e.deilBDVisible,width:"90%"},on:{"update:visible":function(t){e.deilBDVisible=t}}},[a("el-button",{staticClass:"deilDownStyle",attrs:{type:"primary",size:"small"},on:{click:e.BDDeilDown}},[e._v("下载")]),e._v(" "),a("div",{staticStyle:{height:"50px"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.OPBDData,height:e.OPBDData&&e.OPBDData.length>0?350:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号(一级)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"渠道首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"outFirstGetSum",label:"外部首提总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"渠道笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit<0?"colorFont":""},[e._v(e._s(t.row.grossProfit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cost2",label:"优化后成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit2",label:"优化后毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfit2<0?"colorFont":""},[e._v(e._s(t.row.grossProfit2))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate2",label:"优化后毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.grossProfitRate2<0?"colorFont":""},[e._v(e._s(t.row.grossProfitRate2)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"roi"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstIncome",label:"首贷收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROIFirst",label:"roi首贷"}}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.detailsCommentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1),e._v(" "),a("el-dialog",{staticStyle:{overflow:"hidden","min-width":"50%"},attrs:{title:"详情",visible:e.deilbazaarVisible,width:"90%"},on:{"update:visible":function(t){e.deilbazaarVisible=t}}},[a("el-button",{staticClass:"deilDownStyle",attrs:{type:"primary",size:"small"},on:{click:e.deilbazaarDown}},[e._v("下载")]),e._v(" "),a("div",{staticStyle:{height:"50px"}}),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.opbazaarDData,height:e.opbazaarDData&&e.opbazaarDData.length>0?350:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"推广渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提人数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"提现笔均金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loaner",label:"渠道放款总笔数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利"}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"uploadConversion",label:"进件转化率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.uploadConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"accountConversion",label:"开户转化率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.accountConversion)+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"registerCpa",label:"注册CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountCpa",label:"开户CPA"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ROI",label:"ROI"}}),e._v(" "),a("el-table-column",{attrs:{label:"评论"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.bazaarCommentClick(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1)],1)},staticRenderFns:[]};var Ht=a("vSla")(Et,Ot,!1,function(e){a("lgM4")},"data-v-713c85ca",null).exports,Gt={data:function(){return{clientHeight:"",userInfo:null,loading:!1,channelOp:[{name:"麦广"}],qudaoOp:[{name:"麦广渠道"}],channelNameBecome:[],channelNumBecome:[],channelNumOp:[{name:"maimob"}],fuzherenOp:[{name:"负责人"}],appOp:[{name:"app"}],showAllQudaoOp:[{name:"显示所有渠道",value:1},{name:"仅显示一级渠道",value:2}],resultTheQuery:{qudaoChannel:"",qudao:"",qudaoChannelNum:"",fuzheren:"",appId:1,showQudao:1,getTime:[],checkList:["渠道商","渠道","负责人","外部","APP"]},iconImgIndex:1,fontCheack:{channelNameF:!0,channelQuDao:!0,channelNumber:!0,fuzerenTableShow:!0,externalTableShow:!0,appTableShow:!0},iconImg:"fa fa-sun-o",fbsData:[],tableloading:!1,currentPage:1,pageSizes:[50,150,300,500],dataSize:0,pagesize:50}},mounted:function(){var e=this;setTimeout(function(){e.clientHeightFun(),e.userInfo=JSON.parse(localStorage.getItem("userperadmin")),e.resultTheQuery.getTime=[Tt()[0],Nt()[0]],e.getSearchSelectInfo(e.userInfo.sessionid)},100)},methods:{clientHeightFun:function(){var e=document.documentElement.clientHeight;this.clientHeight=e-300},getSearchSelectInfo:function(e){this.loading=!0;var t,a=this;(t={sessionid:e},Pe.a.post(Fe+"getPerformancePara",t)).then(function(e){0===e.data.status&&(a.channelOp=e.data.proxyList,a.qudaoOp=e.data.reportforms_operate,a.channelNameBecome=e.data.reportforms_operate,a.channelNumBecome=e.data.reportforms_operate,a.channelNumOp=e.data.reportforms_operate,a.fuzherenOp=e.data.reportforms_admin,a.appOp=e.data.appList,a.loading=!1,a.clickSeach()),1===e.data.status&&a.$router.replace("/login")})},pageSizeChange:function(e){this.pagesize=e,this.clickSeach()},currentPageChange:function(e){this.currentPage=e,this.clickSeach()},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=3?(1===this.iconImgIndex&&(this.iconImg="fa fa-sun-o"),2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"),3===this.iconImgIndex&&(this.iconImg=" el-icon-circle-close")):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.clickSeach()},fontchangeIsShow:function(e){switch(e){case 1:this.fontCheack.channelNameF=!this.fontCheack.channelNameF;break;case 2:this.fontCheack.channelQuDao=!this.fontCheack.channelQuDao;break;case 3:this.fontCheack.channelNumber=!this.fontCheack.channelNumber;break;case 4:this.fontCheack.fuzerenTableShow=!this.fontCheack.fuzerenTableShow;break;case 5:this.fontCheack.externalTableShow=!this.fontCheack.externalTableShow;break;case 6:this.fontCheack.appTableShow=!this.fontCheack.appTableShow}},clearChannelName:function(){this.qudaoOp=this.channelNameBecome,this.channelNumOp=this.channelNumBecome},channelNameBlur:function(e){if(e){var t={sessionid:this.userInfo.sessionid,proxyId:e},a=this;(n=t,Pe.a.post(Fe+"getChannels",n)).then(function(e){0===e.data.status&&(a.qudaoOp=e.data.reportforms_admin,a.channelNumOp=e.data.reportforms_admin,a.resultTheQuery.qudao="",a.resultTheQuery.qudaoChannelNum=""),1===e.data.status&&a.$router.replace("/login")})}var n},clickSeach:function(){this.loading=!0;var e,t={sessionid:this.userInfo.sessionid,proxyId:this.resultTheQuery.qudaoChannel,appId:this.resultTheQuery.appId,adminId:this.resultTheQuery.fuzheren,channelName:this.resultTheQuery.qudao,channel:this.resultTheQuery.qudaoChannelNum,minDate:this.resultTheQuery.getTime.length>0?this.resultTheQuery.getTime[0]:"",maxDate:this.resultTheQuery.getTime.length>0?this.resultTheQuery.getTime[1]:"",pageId:this.currentPage-1,pageSize:this.pagesize,flag:this.resultTheQuery.showQudao,dateType:this.iconImgIndex,tag:this.resultTheQuery.checkList},a=this;(e=t,Pe.a.post(Fe+"getPerformance",e)).then(function(e){if(0===e.data.status){a.fbsData=e.data.reportforms_admin,a.dataSize=parseInt(e.data.reportforms_admin[0].total);for(var t=0;t<a.fbsData.length;t++)a.fbsData[t].channelSum=parseFloat(a.fbsData[t].channelSum),a.fbsData[t].cost=parseFloat(a.fbsData[t].cost),a.fbsData[t].grossProfit=parseFloat(a.fbsData[t].grossProfit),a.fbsData[t].grossProfitRate=parseFloat(a.fbsData[t].grossProfitRate),a.fbsData[t].income=parseFloat(a.fbsData[t].income),a.fbsData[t].outAccount=parseFloat(a.fbsData[t].outAccount),a.fbsData[t].outChannelSum=parseFloat(a.fbsData[t].outChannelSum),a.fbsData[t].outFirstGetPer=parseFloat(a.fbsData[t].outFirstGetPer),a.fbsData[t].outFirstGetSum=parseFloat(a.fbsData[t].outFirstGetSum),a.fbsData[t].outRegister=parseFloat(a.fbsData[t].outRegister),a.fbsData[t].outUpload=parseFloat(a.fbsData[t].outUpload);a.loading=!1}1===e.data.status&&a.$router.replace("/login")})},resultTheQueryDown:function(){var e,t={sessionid:this.userInfo.sessionid,proxyId:this.resultTheQuery.qudaoChannel,appId:this.resultTheQuery.appId,adminId:this.resultTheQuery.fuzheren,channelName:this.resultTheQuery.qudao,channel:this.resultTheQuery.qudaoChannelNum,minDate:this.resultTheQuery.getTime.length>0?this.resultTheQuery.getTime[0]:"",maxDate:this.resultTheQuery.getTime.length>0?this.resultTheQuery.getTime[1]:"",pageId:this.currentPage-1,flag:this.resultTheQuery.showQudao,dateType:this.iconImgIndex,tag:this.resultTheQuery.checkList};(e=t,Pe()({method:"post",url:Fe+"exportPerformance",data:e,responseType:"blob"})).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="业绩查询统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"业绩查询统计表.xls")})}}},Qt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resultTheQuery"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("div",{staticClass:"header"},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"",placeholder:"渠道商",size:"small"},on:{"visible-change":function(t){e.channelNameBlur(e.resultTheQuery.qudaoChannel)},clear:e.clearChannelName},model:{value:e.resultTheQuery.qudaoChannel,callback:function(t){e.$set(e.resultTheQuery,"qudaoChannel",t)},expression:"resultTheQuery.qudaoChannel"}},e._l(e.channelOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"",placeholder:"渠道",size:"small"},model:{value:e.resultTheQuery.qudao,callback:function(t){e.$set(e.resultTheQuery,"qudao",t)},expression:"resultTheQuery.qudao"}},e._l(e.qudaoOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.channelName,value:e.channelName}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"",placeholder:"渠道号",size:"small"},model:{value:e.resultTheQuery.qudaoChannelNum,callback:function(t){e.$set(e.resultTheQuery,"qudaoChannelNum",t)},expression:"resultTheQuery.qudaoChannelNum"}},e._l(e.channelNumOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.channel,value:e.channel}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人",size:"small"},model:{value:e.resultTheQuery.fuzheren,callback:function(t){e.$set(e.resultTheQuery,"fuzheren",t)},expression:"resultTheQuery.fuzheren"}},e._l(e.fuzherenOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{placeholder:"选择产品",size:"small"},model:{value:e.resultTheQuery.appId,callback:function(t){e.$set(e.resultTheQuery,"appId",t)},expression:"resultTheQuery.appId"}},e._l(e.appOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{placeholder:"显示渠道",size:"small"},model:{value:e.resultTheQuery.showQudao,callback:function(t){e.$set(e.resultTheQuery,"showQudao",t)},expression:"resultTheQuery.showQudao"}},e._l(e.showAllQudaoOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"block templeMaring"},[a("el-date-picker",{staticClass:"dataStyle",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.resultTheQuery.getTime,callback:function(t){e.$set(e.resultTheQuery,"getTime",t)},expression:"resultTheQuery.getTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"divheight"}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.resultTheQuery.checkList,callback:function(t){e.$set(e.resultTheQuery,"checkList",t)},expression:"resultTheQuery.checkList"}},[a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道商"},on:{change:function(t){e.fontchangeIsShow(1)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道"},on:{change:function(t){e.fontchangeIsShow(2)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"负责人"},on:{change:function(t){e.fontchangeIsShow(4)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"外部"},on:{change:function(t){e.fontchangeIsShow(5)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"APP"},on:{change:function(t){e.fontchangeIsShow(6)}}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.clickSeach}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,staticStyle:{height:"28px","font-size":"14px","margin-top":"1px"},attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"el-icon-download",attrs:{type:"primary",size:"mini"},on:{click:e.resultTheQueryDown}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"tableMargin"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?e.clientHeight:100,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"date",label:"日期",width:"120",sortable:""}}),e._v(" "),e.fontCheack.channelNameF?a("el-table-column",{attrs:{prop:"company",label:"渠道商",width:"180"}}):e._e(),e._v(" "),e.fontCheack.appTableShow?a("el-table-column",{attrs:{prop:"app",label:"产品"}}):e._e(),e._v(" "),e.fontCheack.channelQuDao?a("el-table-column",{attrs:{prop:"channelName",label:"渠道",width:"180"}}):e._e(),e._v(" "),e.fontCheack.channelQuDao?a("el-table-column",{attrs:{prop:"channel",label:"渠道号",width:"180"}}):e._e(),e._v(" "),e.fontCheack.fuzerenTableShow?a("el-table-column",{attrs:{prop:"admin",label:"负责人"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outRegister",label:"外部注册",sortable:"",width:"120"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outAccount",label:"外部开户",sortable:"",width:"120"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outUpload",label:"外部进件",sortable:"",width:"120"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outFirstGetPer",label:"外部首提人数",sortable:"",width:"120"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outFirstGetSum",label:"外部首提金额",sortable:"",width:"120"}}):e._e(),e._v(" "),e.fontCheack.externalTableShow?a("el-table-column",{attrs:{prop:"outChannelSum",label:"外部提现总额",sortable:"",width:"120"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现总额",sortable:"",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfit",label:"毛利",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grossProfitRate",label:"毛利率",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grossProfitRate)+"%")])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])])},staticRenderFns:[]};var Ut=a("vSla")(Gt,Qt,!1,function(e){a("ITc8")},"data-v-09c19d10",null).exports,Vt={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"pageone"},[this._v("\n\t运营后台管理系统\n")])},staticRenderFns:[]};var jt=a("vSla")({data:function(){return{}}},Vt,!1,function(e){a("LpLg")},null,null).exports,Wt=a("MgeX"),Jt=a.n(Wt),Yt=a("ZLEe"),Xt=a.n(Yt),Kt={},Zt={data:function(){return{userperadmin:{},breadNavInfo:{current1:"",level1Items:["查看渠道商信息","渠道列表"],current2:"",level2Items:["编辑渠道信息","渠道历史记录"]},searchProxyParams:{loading:!1,selected:"",list:[]},proxyInfo:{loading:!1,first:0,tableData:[],pagination:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100,200,500,1e3],dataSize:0},actionInfo:{loading:!1,proxyName:"",bankAccount:"",bank:"",dutyParagraph:"",phone:"",address:"",contacts:"",mobileno:"",email:""},chartPermissionInfo:{registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1}},PermissionInfo:{visible:!1,loading:!1,list:[]},firstLevelChannelRewardInfo:{visible:!1,loading:!1,tableData:[],editData:[]},searchChannelParams:{loading:!1,parameter:{proxyName:"",proxyId:"",channelName:"",channel:"",level:"",admin:"",status:"",appSelected:""},channelNameList:[],channelList:[],levelList:[{name:"全部渠道",value:""},{name:"一级渠道",value:1},{name:"二级渠道",value:2}],adminList:[],stateList:[{name:"全部状态",value:""},{name:"启用",value:1},{name:"禁用",value:0}]},channelInfo:{loading:!1,first:0,tableData:[],pagination:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100,500,1e3],dataSize:0}},actionChannelInfo:{loading:!1,info:{channelId:"",optimizationId:"",proxyName:"",level:"",channelName:"",channelNo:"",channel:"",isCreate:"",appSelected:"",attributeSelected:"",typeSelected:"",divisionSelected:"",url:"",fcTypeSelected:"",isStep:"",stepData:"",rewards:"",cycleSelected:"",costSelected:"",gitTimestartAndEnd:"",adminSelected:"",synchronous:0,linkage:"",optiContent:[],optiRate:"",optiRateOld:"",optiTime:"",optiTimeOld:""},selectListInfo:{appList:[],attributeList:[],typeList:[],divisionList:[],fcTypeList:[],cycleList:[],costList:[],adminList:[]},rewardInfo:{list:[],temp:[],editList:[],fcUnitText:""}},firstLevelFcDataList:[],mainReward:{channelId:"",data:{}},channelHistoryInfo:{channelName:"",fcInfo:{loading:!1,tableData:[]},optiInfo:{loading:!1,tableData:[]}},channelStatusInfo:{visible:!1,statusText:"",channelName:"",channelId:"",channel:"",status:""},optiInfo:{loading:!1,visible:!1},channelStatusHistory:{visible:!1,loading:!1,list:[]},qudaoList:!1,details:!1,qudaoListStart:!1,qudaoListEdit:!1,qudaoListHistory:!1}},mounted:function(){try{for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("01"==e.data[t].meta&&e.data[t].children&&e.data[t].children.length>0)for(var a=0;a<e.data[t].children.length;a++)if("0101"==e.data[t].children[a].meta&&e.data[t].children[a].children&&e.data[t].children[a].children.length>0)for(var n=0;n<e.data[t].children[a].children.length;n++)"010101"==e.data[t].children[a].children[n].meta?this.qudaoList="0"!=e.data[t].children[a].children[n].show:"010105"==e.data[t].children[a].children[n].meta?this.details="0"!=e.data[t].children[a].children[n].show:"010102"==e.data[t].children[a].children[n].meta?this.qudaoListStart="0"!=e.data[t].children[a].children[n].show:"010103"==e.data[t].children[a].children[n].meta?this.qudaoListEdit="0"!=e.data[t].children[a].children[n].show:"010104"==e.data[t].children[a].children[n].meta&&(this.qudaoListHistory="0"!=e.data[t].children[a].children[n].show)}catch(e){}this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getProxyNameListFun(),this.getProxyInfoListFun()},computed:{fcText:function(){switch(this.actionChannelInfo.info.fcTypeSelected){case 26:return this.actionChannelInfo.rewardInfo.fcUnitText="元","注册用户";case 27:return this.actionChannelInfo.rewardInfo.fcUnitText="元","首提用户";case 28:return this.actionChannelInfo.rewardInfo.fcUnitText="%","分成比例";case 29:return this.actionChannelInfo.rewardInfo.fcUnitText="元","开户成功用户数"}}},filters:{fcNumberFilter:function(e){for(var t=0;t<Kt.length;t++){if(e===Kt[t].id)return Kt[t].other.split(",")[0]}},fcNumber1Filter:function(e){for(var t=0;t<Kt.length;t++){if(e===Kt[t].id)return Kt[t].other.split(",")[1]}},fcNumber2Filter:function(e){for(var t=0;t<Kt.length;t++){if(e===Kt[t].id)return Kt[t].other.split(",")[2]}},toggleStatus:function(e){return 1===e?"启用":"禁用"},fcFormatter:function(e){return e?parseInt(e.max)+1:0},channelStatusFormatterSet:function(e){return 1===e?"已启用":"已禁用"},optiTimeFormmater:function(e){return 0!==e?St(e):""},rewardTypeIdFilter:function(e){for(var t=0;t<Kt.length;t++)if(e===Kt[t].id)return Kt[t].name}},methods:{getChannelStatusHistory:function(e,t){var a=this,n={sessionid:this.userperadmin.sessionid,channelId:e.id};this.channelStatusHistory.visible=!0,this.channelStatusHistory.loading=!0,this.channelStatusHistory.list=[],at(n).then(function(e){0==e.data.status?(a.channelStatusHistory.loading=!1,a.channelStatusHistory.list=e.data.channelHistories,a.channelStatusHistory.list.reverse()):1==e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){a.channelStatusHistory.loading=!1,a.toast("服务器错误，请联系管理员","error")})},instantDisable:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,proxyId:this.searchChannelParams.parameter.proxyId};(e=a,Pe.a.post(Fe+"updateAllStatus",e)).then(function(e){0==e.data.status?t.getChannelListFun():1==e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员","error")})},getPayCompanyFun:function(e,t,a){var n=this,i={sessionid:this.userperadmin.sessionid,proxyid:e};tt(i).then(function(e){for(var i=e.data.payCompanyList,o=n.actionChannelInfo.selectListInfo.appList,l=[],s=[],r=0;r<i.length;r++)for(var c=0;c<o.length;c++)if(i[r].appid===o[c].id){if(s.includes(i[r].appid))continue;s.push(i[r].appid),l.push({id:o[c].id,name:o[c].name})}"fromActionChannel"===t?n.getRewardMainFun(a,l):n.getFirstLevelRewardListFun(a,l)}).catch(function(e){n.toast("服务器错误，请联系管理员","error")})},getFirstLevelRewardListFun:function(e,t){for(var a=this,n=[],i=0;i<t.length;i++)n.push(t[i].id);var o={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:n.toString()};this.firstLevelChannelRewardInfo.visible=!0,Je(o).then(function(e){if(0===e.data.status){var t=a;a.firstLevelChannelRewardInfo.tableData=[],e.data.rewardList.forEach(function(e){e.rewardPrice=t.rewardPriceFormatter(e.rewardPrice),t.firstLevelChannelRewardInfo.tableData.push(e)})}else 1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error");a.firstLevelChannelRewardInfo.loading=!1}).catch(function(e){a.firstLevelChannelRewardInfo.loading=!1,a.toast("服务器错误，请联系管理员","error")})},getRewardMainFun:function(e,t){for(var a=this,n=[],i=0;i<t.length;i++)n.push(t[i].id);n=n.toString();var o={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:n};Ye(o).then(function(t){if(0===t.data.status){for(var n in t.data.mainReward)t.data.mainReward[n][0]&&t.data.mainReward[n][0].date?a.actionChannelInfo.info.gitTimestartAndEnd=t.data.mainReward[n][0].date:a.actionChannelInfo.info.gitTimestartAndEnd="";var i=t.data.mainReward;a.firstLevelFcDataList.splice(0);var o=Xt()(i);a.mainReward.channelId=e.id;for(var l=0;l<o.length;l++){var s;if(0!==i[o[l]].length){if(1==i[o[l]].length)s={modified:!0,channelId:i[o[l]][0].channelId,id:i[o[l]][0].id,date:i[o[l]][0].date,appid:parseInt(o[l]),isStep:0,fcType:i[o[l]][0].typeId,settlementCycle:0===i[o[l]][0].settlementCycle?"":i[o[l]][0].settlementCycle,cacCostType:0===i[o[l]][0].costing?"":i[o[l]][0].costing,stepData:i[o[l]][0].price,fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}};else{s={channelId:i[o[l]][0].channelId,id:i[o[l]][0].id,date:i[o[l]][0].date,appid:parseInt(o[l]),isStep:1,fcType:i[o[l]][0].typeId,settlementCycle:0===i[o[l]][0].settlementCycle?"":i[o[l]][0].settlementCycle,cacCostType:0===i[o[l]][0].costing?"":i[o[l]][0].costing};var r={length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]};r.mins=[0],r.rewards=[],i[o[l]].forEach(function(e,t){t===i[o[l]].length-1?r.last.price=e.price:(r.mins.push(e.max+1),r.rewards.push({max:e.max,price:e.price}))}),r.length=i[o[l]].length-1,s.fcTypeData=r}a.firstLevelFcDataList.push(s)}else a.firstLevelFcDataList.push({modified:!1,appid:parseInt(o[l]),isStep:0,fcType:26,settlementCycle:"",cacCostType:"",stepData:"",fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}})}}else 1===t.data.status?a.$router.replace("/login"):a.toast(t.data.statusMsg,"error")}).catch(function(e){a.toast("服务器错误，请联系管理员1","error")})},appFormatter:function(e,t,a){var n=a;return this.actionChannelInfo.selectListInfo.appList.forEach(function(e){e.id===a&&(n=e.name)}),n},indexFormatter:function(e){return this.proxyInfo.pagination.pageSize*(this.proxyInfo.pagination.currentPage-1)+1+e},indexFormatter1:function(e){return this.channelInfo.pagination.pageSize*(this.channelInfo.pagination.currentPage-1)+1+e},indexFormatter2:function(e){return e+1},editOptiInfoFun:function(e,t){this.resetChannelInfoFun(),this.optiInfo.visible=!0,this.editChannelFun(e)},toggleOptiDialogFun:function(){this.optiInfo.visible=!this.optiInfo.visible},saveChannelOptiFun:function(){this.saveChannelInfoFun(1)},toggleStatusDialogFun:function(){this.channelStatusInfo.visible=!this.channelStatusInfo.visible},toggleStatusFun:function(e,t){this.channelStatusInfo.channelName=e.channelName,this.channelStatusInfo.channelId=e.id,this.channelStatusInfo.channel=e.channel,this.channelStatusInfo.status=e.status,1===e.status?this.channelStatusInfo.statusText="禁用":this.channelStatusInfo.statusText="启用",this.toggleStatusDialogFun()},saveChannelStatusFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid,channelId:this.channelStatusInfo.channelId,status:1===this.channelStatusInfo.status?0:1};et(t).then(function(t){0===t.data.status?(e.toggleStatusDialogFun(),e.getChannelListFun()):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.toast("服务器错误，请联系管理员","error")})},getChannelHistoryFun:function(e,t){this.actionChannelInfo.info.channelId=e.id,this.channelHistoryInfo.channelName=e.channelName,this.toggleBreadNav("current2",1),this.getChannelFcHistoryFun(e),this.getOptimizationInfoFun()},getChannelFcHistoryFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,channelId:e.id};Ze(a).then(function(e){if(0===e.data.status){t.channelHistoryInfo.fcInfo.tableData=e.data.rewardList;var a=t;t.channelHistoryInfo.fcInfo.tableData.forEach(function(e,t,n){n[t].rewardPrice=a.rewardPriceFormatter(e.rewardPrice,1)})}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员","error")})},timeStempFormatter:function(e,t,a){return kt(e.date)},timeStempFormatter1:function(e,t,a){return kt(e.startDate)},timeStempFormatter2:function(e,t,a){return kt(e.updateDate)},timeStempFormatter3:function(e,t,a){return kt(a)},cancelSaveChannelFun:function(){this.toggleBreadNav("current2",""),this.resetChannelInfoFun()},saveChannelInfoFun:function(e){var t=this,a="";if(""===this.actionChannelInfo.info.optiRate||""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime)if(""===this.actionChannelInfo.info.optiRate&&""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime)this.toast("“优化比例”和“优化起始时间”必须同时输入","warning");else{if(a=""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime?wt(this.actionChannelInfo.info.optiTime):"",this.actionChannelInfo.info.optiRate!==this.actionChannelInfo.info.optiRateOld||this.actionChannelInfo.info.optiTime!==this.actionChannelInfo.info.optiTimeOld){var n=new Date;this.actionChannelInfo.info.optimizationId=n.getTime()}var i=new Date;i=i.getTime();var o={sessionid:this.userperadmin.sessionid,proxyId:this.searchChannelParams.parameter.proxyId,channelId:this.actionChannelInfo.info.channelId,id:this.actionChannelInfo.info.optimizationId,adminId:this.userperadmin.admin.id,synchronous:this.actionChannelInfo.info.synchronous,linkage:this.actionChannelInfo.info.linkage,optimization:this.actionChannelInfo.info.optiRate,startDate:a,updateDate:i};1===e?this.optiInfo.loading=!0:this.actionChannelInfo.loading=!0,Ke(o).then(function(a){t.actionChannelInfo.loading=!1,t.optiInfo.loading=!1,0===a.data.status?(1===e?t.toggleOptiDialogFun():t.toggleBreadNav("current2",""),t.resetChannelInfoFun(),t.getChannelListFun()):1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.optiInfo.loading=!1,t.actionChannelInfo.loading=!1,t.toast("服务器错误，请联系管理员1","error")})}else this.toast("“优化比例”和“优化起始时间”必须同时输入","warning")},resetChannelInfoFun:function(){this.actionChannelInfo.info.proxyName="",this.actionChannelInfo.info.level="",this.actionChannelInfo.info.channelName="",this.actionChannelInfo.info.channelNo="",this.actionChannelInfo.info.channel="",this.actionChannelInfo.info.isCreate="",this.actionChannelInfo.info.appSelected="",this.actionChannelInfo.info.attributeSelected="",this.actionChannelInfo.info.typeSelected="",this.actionChannelInfo.info.divisionSelected="",this.actionChannelInfo.info.url="",this.actionChannelInfo.info.fcTypeSelected="",this.actionChannelInfo.info.isStep="",this.actionChannelInfo.info.stepData="",this.actionChannelInfo.info.cycleSelected="",this.actionChannelInfo.info.costSelected="",this.actionChannelInfo.info.adminSelected="",this.actionChannelInfo.rewardInfo.list=[],this.actionChannelInfo.info.optimizationId="",this.actionChannelInfo.info.optiTime="",this.actionChannelInfo.info.optiTimeOld="",this.actionChannelInfo.info.optiRate="",this.actionChannelInfo.info.optiRateOld="",this.actionChannelInfo.info.linkage="",this.actionChannelInfo.info.optiContent=[],this.actionChannelInfo.info.synchronous=0},editChannelFun:function(e,t){if(this.optiInfo.visible)this.actionChannelInfo.info.channelId=e.id,this.actionChannelInfo.info.optimizationId=e.optimizationId,this.actionChannelInfo.info.synchronous=e.synchronous,this.getOptimizationInfoFun(e.optimizationId);else{this.actionChannelInfo.loading=!0,this.toggleBreadNav("current2",0),this.actionChannelInfo.info.channelId=e.id,this.actionChannelInfo.info.optimizationId=e.optimizationId,this.actionChannelInfo.info.proxyName=this.searchChannelParams.parameter.proxyName,this.actionChannelInfo.info.channelName=e.channelName,this.actionChannelInfo.info.channelNo=e.channelNo,this.actionChannelInfo.info.channel=e.channel,this.actionChannelInfo.info.isCreate=e.isCreate,this.actionChannelInfo.info.appSelected=e.appId,this.actionChannelInfo.info.attributeSelected=e.attribute,this.actionChannelInfo.info.typeSelected=e.type,this.actionChannelInfo.info.divisionSelected=e.subdivision,this.actionChannelInfo.info.url=e.url,this.actionChannelInfo.info.fcTypeSelected=e.rewardTypeId,this.actionChannelInfo.info.synchronous=e.synchronous,1===e.level?this.actionChannelInfo.info.level="一级渠道":this.actionChannelInfo.info.level="二级渠道";var a=this;this.getEditChannelSelectListFun(function(t){t&&(1===e.level?a.getPayCompanyFun(e.proxyId,"fromActionChannel",e):a.getRewardListFun(e.rewardId))}),this.getOptimizationInfoFun(e.optimizationId)}},getOptimizationInfoFun:function(e){var t,a=this;if(e){if(0===e)return;t={sessionid:this.userperadmin.sessionid,optimizationId:e}}else t={sessionid:this.userperadmin.sessionid,channelId:this.actionChannelInfo.info.channelId};Xe(t).then(function(t){0===t.data.status?(a.actionChannelInfo.loading=!1,e?(t.data.optimizationList[0].optimization&&(a.actionChannelInfo.info.optiRate=t.data.optimizationList[0].optimization),t.data.optimizationList[0].id&&(a.actionChannelInfo.info.optimizationId=t.data.optimizationList[0].id),t.data.optimizationList[0].linkage&&(a.actionChannelInfo.info.linkage=t.data.optimizationList[0].linkage)):a.channelHistoryInfo.optiInfo.tableData=t.data.optimizationList):1===t.data.status?a.$router.replace("/login"):a.toast(t.data.statusMsg,"error")}).catch(function(e){a.actionChannelInfo.loading=!1,a.toast("服务器错误，请联系管理员1","error")})},getRewardListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,rewardId:e};Je(a).then(function(e){if(0===e.data.status){t.actionChannelInfo.loading=!1,t.actionChannelInfo.rewardInfo.list=e.data.rewardList,e.data.rewardList[0].date?t.actionChannelInfo.info.gitTimestartAndEnd=e.data.rewardList[0].date:t.actionChannelInfo.info.gitTimestartAndEnd="";var a=e.data.rewardList.length;if(0!==a)if(1===a)t.actionChannelInfo.info.isStep=0,t.actionChannelInfo.info.stepData=e.data.rewardList[0].price,t.actionChannelInfo.info.cycleSelected=e.data.rewardList[0].settlementCycle,t.actionChannelInfo.info.costSelected=e.data.rewardList[0].costing,t.actionChannelInfo.info.adminSelected=e.data.rewardList[0].adminId.toString();else{t.actionChannelInfo.info.isStep=1,t.actionChannelInfo.info.stepData=e.data.rewardList[0].price,t.actionChannelInfo.info.cycleSelected=e.data.rewardList[0].settlementCycle,t.actionChannelInfo.info.costSelected=e.data.rewardList[0].costing,t.actionChannelInfo.info.adminSelected=e.data.rewardList[0].adminId.toString()}}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.actionChannelInfo.loading=!1,t.toast("服务器错误，请联系管理员1","error")})},getEditChannelSelectListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid};We(a).then(function(a){if(0===a.data.status){if(t.actionChannelInfo.selectListInfo.appList=a.data.appList,t.actionChannelInfo.selectListInfo.attributeList=a.data.channelAttribute,t.actionChannelInfo.selectListInfo.typeList=a.data.channelType,t.actionChannelInfo.selectListInfo.divisionList=a.data.channelSubdivision,a.data.adminIdList&&0!==a.data.adminIdList.length){var n=t;n.actionChannelInfo.selectListInfo.adminList=[],a.data.adminIdList.forEach(function(e,t){var a=e.split(","),i={id:a[0],name:a[1],index:a[2]};n.actionChannelInfo.selectListInfo.adminList.push(i)})}Kt=a.data.rewardTypeList,t.actionChannelInfo.selectListInfo.fcTypeList=a.data.rewardTypeList,t.actionChannelInfo.selectListInfo.cycleList=a.data.settlementCycleList,t.actionChannelInfo.selectListInfo.costList=a.data.costingList,e&&e(!0)}else 1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员2","error")})},channelStatusFormatter:function(e,t,a){return 1===a?"启用":"禁用"},rewardTypeIdFormatter:function(e,t,a){return 26===a?"CPA单价":27===a?"CPS单价":28===a?"CPS比例":a},rewardPriceFormatter:function(e,t){if(e){var a=e.split(","),n=[],i=[];if(a.length<=1)if(1===t){var o=e.split("/");n.push(o[1])}else n.push(a[0]);else this.actionChannelInfo.rewardInfo.temp=a,a.forEach(function(e,t){var a=e.split("/");i.push({max:a[0],price:a[1]}),n[t]=0===t?"0 - "+a[0]+" : "+a[1]:parseInt(i[t-1].max)+1+" - "+a[0]+" : "+a[1]});return n}},selectedFormatter:function(e){1===e?this.searchChannelParams.parameter.channelName=this.searchChannelParams.parameter.channelName.replace(/[-]/g,""):this.searchChannelParams.parameter.channel=this.searchChannelParams.parameter.channel.replace(/[-]/g,"")},getChannelParamsFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid,proxyId:this.searchChannelParams.parameter.proxyId};this.searchChannelParams.loading=!0,Ve(t).then(function(t){if(e.searchChannelParams.loading=!1,0===t.data.status){if(e.searchChannelParams.channelNameList=t.data.channelNameList,e.searchChannelParams.channelList=t.data.channelNoList,t.data.adminIdList&&0!==t.data.adminIdList.length){var a=e;a.searchChannelParams.adminList=[];try{t.data.adminIdList.forEach(function(e,t){var n=e.split(","),i={id:n[0],name:n[1]};a.searchChannelParams.adminList.push(i)})}catch(e){}}}else 1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.searchChannelParams.loading=!1,e.toast("服务器错误，请联系管理员","error")})},searchChannelListFun:function(){this.channelInfo.first=0,this.getChannelListFun()},getChannelListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,proxyId:this.searchChannelParams.parameter.proxyId,first:this.channelInfo.first,pageId:this.channelInfo.pagination.currentPage-1,pageSize:this.channelInfo.pagination.pageSize};void 0!==this.searchChannelParams.parameter.channelName&&""!==this.searchChannelParams.parameter.channelName&&(a.channelName=this.searchChannelParams.parameter.channelName.replace(/[-]/g,"")),void 0!==this.searchChannelParams.parameter.channel&&""!==this.searchChannelParams.parameter.channel&&(a.channel=this.searchChannelParams.parameter.channel.replace(/[-]/g,"")),void 0!==this.searchChannelParams.parameter.level&&""!==this.searchChannelParams.parameter.level&&(a.level=this.searchChannelParams.parameter.level),void 0!==this.searchChannelParams.parameter.admin&&""!==this.searchChannelParams.parameter.admin&&(a.adminId=this.searchChannelParams.parameter.admin),void 0!==this.searchChannelParams.parameter.status&&""!==this.searchChannelParams.parameter.status&&(a.status=this.searchChannelParams.parameter.status),void 0!==this.searchChannelParams.parameter.appSelected&&""!==this.searchChannelParams.parameter.appSelected&&(a.appid=this.searchChannelParams.parameter.appSelected),this.channelInfo.loading=!0,je(a).then(function(a){if(t.channelInfo.loading=!1,0===a.data.status){if(a.data.channelList){var n=t;t.channelInfo.tableData=a.data.channelList,t.channelInfo.tableData.forEach(function(e,t,a){a[t].rewardPrice=n.rewardPriceFormatter(e.rewardPrice)}),1===e&&(t.channelInfo.pagination.dataSize=parseInt(a.data.listSize))}a.data.listSize&&1!==t.channelInfo.first&&(t.channelInfo.pagination.dataSize=parseInt(a.data.listSize))}else 1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.channelInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},channelTablePageSizeChange:function(e){this.channelInfo.first=1,this.channelInfo.pagination.pageSize=e,this.channelInfo.pagination.currentPage=1,this.getChannelListFun()},channelTableCurrentPageChange:function(e){this.channelInfo.first=1,this.channelInfo.pagination.currentPage=e,this.getChannelListFun()},toggleBreadNav:function(e,t){this.breadNavInfo[e]=t,"current1"===e&&(this.breadNavInfo.current2="",""===t&&(this.searchChannelParams.parameter.channelName="",this.searchChannelParams.parameter.channel="",this.searchChannelParams.parameter.level="",this.searchChannelParams.parameter.admin="",this.searchChannelParams.parameter.status="")),this.resetChannelInfoFun()},backToProxyListFun:function(){this.toggleBreadNav("current1",""),this.resetProxyInfoFun()},proxyPageSizeChange:function(e){this.proxyInfo.first=1,this.proxyInfo.pagination.currentPage=1,this.proxyInfo.pagination.pageSize=e,this.getProxyInfoListFun()},proxyCurrentPageChange:function(e){this.proxyInfo.first=1,this.proxyInfo.pagination.currentPage=e,this.getProxyInfoListFun()},getProxyNameListFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};this.searchProxyParams.loading=!0,Qe(t).then(function(t){e.searchProxyParams.loading=!1,0===t.data.status?e.searchProxyParams.list=t.data.proxyList:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.searchProxyParams.loading=!1,e.toast("服务器错误，请联系管理员","error")})},getProxyInfoListFun:function(e){var t=this;if(!this.proxyInfo.loading){if(e)e.pageId=this.proxyInfo.pagination.currentPage-1,e.pageSize=this.proxyInfo.pagination.pageSize;else{e={sessionid:this.userperadmin.sessionid,first:this.proxyInfo.first,pageId:this.proxyInfo.pagination.currentPage-1,pageSize:this.proxyInfo.pagination.pageSize};if(""!==this.searchProxyParams.selected){var a=parseInt(this.searchProxyParams.selected);isNaN(a)?e.company=this.searchProxyParams.selected:e.id=this.searchProxyParams.selected}}this.proxyInfo.loading=!0,Ue(e).then(function(e){t.proxyInfo.loading=!1,0===e.data.status?(t.proxyInfo.tableData=e.data.proxyList,e.data.listSize&&(t.proxyInfo.pagination.dataSize=parseInt(e.data.listSize))):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.proxyInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})}},searchProxyInfoListFun:function(){var e,t=parseInt(this.searchProxyParams.selected);""===this.searchProxyParams.selected?(this.proxyInfo.first=0,this.getProxyInfoListFun()):isNaN(t)?(e={sessionid:this.userperadmin.sessionid,company:this.searchProxyParams.selected,first:0},this.getProxyInfoListFun(e)):(e={sessionid:this.userperadmin.sessionid,id:this.searchProxyParams.selected,first:0},this.getProxyInfoListFun(e))},viewChannelListFun:function(e,t){this.toggleBreadNav("current1",1),this.searchChannelParams.parameter.proxyId=e.id,this.searchChannelParams.parameter.proxyName=e.company,this.getChannelParamsFun(),this.getChannelListFun(),this.getEditChannelSelectListFun()},resetProxyInfoFun:function(){this.proxyInfo.actionInfo.proxyName="",this.proxyInfo.actionInfo.bankAccount="",this.proxyInfo.actionInfo.bank="",this.proxyInfo.actionInfo.dutyParagraph="",this.proxyInfo.actionInfo.phone="",this.proxyInfo.actionInfo.address="",this.proxyInfo.actionInfo.contacts="",this.proxyInfo.actionInfo.mobileno="",this.proxyInfo.actionInfo.email="",this.proxyInfo.chartPermissionInfo={registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1}},viewProxyInfoFun:function(e,t){this.toggleBreadNav("current1",0),this.proxyInfo.actionInfo.proxyName=e.company,this.proxyInfo.actionInfo.bankAccount=e.bankAccount,this.proxyInfo.actionInfo.bank=e.bank,this.proxyInfo.actionInfo.dutyParagraph=e.dutyParagraph,this.proxyInfo.actionInfo.phone=e.phone,this.proxyInfo.actionInfo.address=e.address,this.proxyInfo.actionInfo.contacts=e.contacts,this.proxyInfo.actionInfo.mobileno=e.mobileno,this.proxyInfo.actionInfo.email=e.email},permissionFormatter:function(e,t){var a=Xt()(e),n=Jt()(e);if(1===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=1===t)});else if(2===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=!0===t?1:0)});else{if(3===t)return n.includes(!0);var i=this;n.forEach(function(e,t){"id"!==a[t]?i.chartPermissionInfo[a[t]]=!1:i.chartPermissionInfo[a[t]]=""})}return e},toast:function(e,t){this.$message({type:t,message:e})}}},ea={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page proxy-page"},[a("div",{staticClass:"bread-nav"},[e._v("\n\t\t\t当前位置：\n\t\t\t"),a("span",{class:{link:""!==e.breadNavInfo.current1},on:{click:function(t){e.toggleBreadNav("current1","")}}},[e._v("渠道商管理")]),e._v(" "),""!==e.breadNavInfo.current1?a("span",{staticClass:"item",class:{link:""!==e.breadNavInfo.current2},on:{click:function(t){e.toggleBreadNav("current1",1)}}},[e._v(e._s(e.breadNavInfo.level1Items[e.breadNavInfo.current1]))]):e._e(),e._v(" "),""!==e.breadNavInfo.current2?a("span",{staticClass:"item"},[e._v(e._s(e.breadNavInfo.level2Items[e.breadNavInfo.current2]))]):e._e()]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:""===e.breadNavInfo.current1,expression:"breadNavInfo.current1 === ''"}],staticClass:"action-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.searchProxyParams.loading,expression:"searchProxyParams.loading"}],staticClass:"flex-item search-form",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道商"},model:{value:e.searchProxyParams.selected,callback:function(t){e.$set(e.searchProxyParams,"selected",t)},expression:"searchProxyParams.selected"}},e._l(e.searchProxyParams.list,function(e){return a("el-option",{key:e.id,attrs:{label:e.company,value:e.id}})})),e._v(" "),a("button",{on:{click:e.searchProxyInfoListFun}},[a("i",{staticClass:"fa fa-search"}),e._v("搜索")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.proxyInfo.loading,expression:"proxyInfo.loading"}],staticClass:"table-container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.proxyInfo.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"email"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobileno",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoList,expression:"qudaoList"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.viewChannelListFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}}),e._v("渠道列表")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.details,expression:"details"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.viewProxyInfoFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}}),e._v("详情")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.proxyInfo.pagination.currentPage,"page-sizes":e.proxyInfo.pagination.pageSizes,"page-size":e.proxyInfo.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.proxyInfo.pagination.dataSize},on:{"size-change":e.proxyPageSizeChange,"current-change":e.proxyCurrentPageChange}})],1)]),e._v(" "),0===e.breadNavInfo.current1?a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.proxyInfo.actionInfo.loading,expression:"proxyInfo.actionInfo.loading"}],staticClass:"action-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("h4",{staticClass:"action-title"},[e._v("渠道商账户信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"proxyName"}},[e._v("公司名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.proxyName,expression:"proxyInfo.actionInfo.proxyName"}],attrs:{type:"text",id:"proxyName",readonly:"true"},domProps:{value:e.proxyInfo.actionInfo.proxyName},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"proxyName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bankAccount"}},[e._v("银行账户")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.bankAccount,expression:"proxyInfo.actionInfo.bankAccount"}],attrs:{type:"text",id:"bankAccount",readonly:"true",maxLength:"19"},domProps:{value:e.proxyInfo.actionInfo.bankAccount},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"bankAccount",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bank"}},[e._v("开户行")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.bank,expression:"proxyInfo.actionInfo.bank"}],attrs:{type:"text",id:"bank",readonly:"true"},domProps:{value:e.proxyInfo.actionInfo.bank},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.dutyParagraph,expression:"proxyInfo.actionInfo.dutyParagraph"}],attrs:{type:"text",id:"dutyParagraph",readonly:"true",maxLength:"18"},domProps:{value:e.proxyInfo.actionInfo.dutyParagraph},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"dutyParagraph",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"phone"}},[e._v("公司电话")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.phone,expression:"proxyInfo.actionInfo.phone"}],attrs:{type:"text",id:"phone",readonly:"true",maxLength:"11"},domProps:{value:e.proxyInfo.actionInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"address"}},[e._v("公司地址")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.address,expression:"proxyInfo.actionInfo.address"}],attrs:{type:"text",id:"address",readonly:"true"},domProps:{value:e.proxyInfo.actionInfo.address},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"address",t.target.value)}}})])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"contacts"}},[e._v("联系人")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.contacts,expression:"proxyInfo.actionInfo.contacts"}],attrs:{type:"text",id:"contacts",readonly:"true"},domProps:{value:e.proxyInfo.actionInfo.contacts},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"contacts",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"mobileno"}},[e._v("联系人电话")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.mobileno,expression:"proxyInfo.actionInfo.mobileno"}],attrs:{type:"text",id:"mobileno",readonly:"true",maxLength:"11"},domProps:{value:e.proxyInfo.actionInfo.mobileno},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"mobileno",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"email"}},[e._v("联系人邮箱")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.proxyInfo.actionInfo.email,expression:"proxyInfo.actionInfo.email"}],attrs:{type:"text",id:"email",readonly:"true"},domProps:{value:e.proxyInfo.actionInfo.email},on:{input:function(t){t.target.composing||e.$set(e.proxyInfo.actionInfo,"email",t.target.value)}}})])])],1),e._v(" "),a("h4",{directives:[{name:"show",rawName:"v-show",value:0!==e.PermissionInfo.list.length,expression:"PermissionInfo.list.length !== 0"}]},[e._v("账户权限")]),e._v(" "),0!==e.PermissionInfo.list.length?a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.PermissionInfo.loading,expression:"PermissionInfo.loading"}],staticClass:"form-wrapper permission-wrapper"},[a("div",{staticClass:"form-wrapper form-wrapper-inner"},e._l(e.permissionInfo.list,function(t,n){return a("div",{key:n,staticClass:"input-group required"},[a("label",{staticClass:"qx"},[e._v("请选择您所需要的报表内容（"),a("span",[e._v(e._s(e.permissionInfo.app[t.appid].name))]),e._v("）")]),e._v(" "),a("div",[a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.registerChartPermission,callback:function(a){e.$set(t,"registerChartPermission",a)},expression:"app.registerChartPermission"}},[e._v("注册数")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.loginChartPermission,callback:function(a){e.$set(t,"loginChartPermission",a)},expression:"app.loginChartPermission"}},[e._v("登录数")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.applyChartPermission,callback:function(a){e.$set(t,"applyChartPermission",a)},expression:"app.applyChartPermission"}},[e._v("申请人数")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.loanAcctChartPermission,callback:function(a){e.$set(t,"loanAcctChartPermission",a)},expression:"app.loanAcctChartPermission"}},[e._v("授信人数")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.cashNumCharPermission,callback:function(a){e.$set(t,"cashNumCharPermission",a)},expression:"app.cashNumCharPermission"}},[e._v("首提人数")]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-lable":0},model:{value:t.firstCashAmtChartPermission,callback:function(a){e.$set(t,"firstCashAmtChartPermission",a)},expression:"app.firstCashAmtChartPermission"}},[e._v("首次提现总金额(元)")])],1)])}))]):e._e(),e._v(" "),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn cancel",on:{click:e.backToProxyListFun}},[e._v("返回")])])],1):e._e(),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1===e.breadNavInfo.current1&&""===e.breadNavInfo.current2,expression:"breadNavInfo.current1 === 1 && breadNavInfo.current2 === ''"}],staticClass:"sub-table-wrapper"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.searchChannelParams.loading,expression:"searchChannelParams.loading"}],staticClass:"actions",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-col",{attrs:{xs:24}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道名称"},model:{value:e.searchChannelParams.parameter.channelName,callback:function(t){e.$set(e.searchChannelParams.parameter,"channelName",t)},expression:"searchChannelParams.parameter.channelName"}},e._l(e.searchChannelParams.channelNameList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道号"},model:{value:e.searchChannelParams.parameter.channel,callback:function(t){e.$set(e.searchChannelParams.parameter,"channel",t)},expression:"searchChannelParams.parameter.channel"}},e._l(e.searchChannelParams.channelList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道级别"},model:{value:e.searchChannelParams.parameter.level,callback:function(t){e.$set(e.searchChannelParams.parameter,"level",t)},expression:"searchChannelParams.parameter.level"}},e._l(e.searchChannelParams.levelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.searchChannelParams.parameter.admin,callback:function(t){e.$set(e.searchChannelParams.parameter,"admin",t)},expression:"searchChannelParams.parameter.admin"}},e._l(e.searchChannelParams.adminList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道状态"},model:{value:e.searchChannelParams.parameter.status,callback:function(t){e.$set(e.searchChannelParams.parameter,"status",t)},expression:"searchChannelParams.parameter.status"}},e._l(e.searchChannelParams.stateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择产品"},model:{value:e.searchChannelParams.parameter.appSelected,callback:function(t){e.$set(e.searchChannelParams.parameter,"appSelected",t)},expression:"searchChannelParams.parameter.appSelected"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("button",{staticClass:"btn blue",on:{click:e.searchChannelListFun}},[a("i",{staticClass:"fa fa-search"}),e._v("搜索")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.channelInfo.loading,expression:"channelInfo.loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("p",{staticClass:"table-title"},[e._v("当前渠道商：\n\t\t\t\t\t"),a("span",[e._v(e._s(e.searchChannelParams.parameter.proxyName))]),e._v(" "),a("a",{staticClass:"title-btn",on:{click:e.instantDisable}},[e._v("一键禁用")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelInfo.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",index:e.indexFormatter1,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"负责人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"渠道级别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"产品",width:"100",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardTypeId",label:"分成方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.level?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.getPayCompanyFun(t.row.proxyId,"fromChannel",t.row)}}},[a("i",{staticClass:"fa fa-window-restore",attrs:{"aria-hidden":"true"}}),e._v("详情")]):e._e(),e._v(" "),1!==t.row.level?a("p",[e._v(e._s(e._f("rewardTypeIdFilter")(t.row.rewardTypeId)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(n){return 1!==t.row.level?a("p",{attrs:{"close-transition":""},on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(n))]):e._e()})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"optimization",label:"优化比例(%)",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(t.row.optimization))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"优化起始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(e._f("optiTimeFormmater")(t.row.startDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"渠道状态",width:"144",formatter:e.channelStatusFormatter},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoListStart,expression:"qudaoListStart"}],class:{status:t.row.status,status1:!t.row.status},attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleStatusFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-cogs",attrs:{"aria-hidden":"true"}}),e._v(e._s(e._f("channelStatusFormatterSet")(t.row.status)))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoListStart,expression:"qudaoListStart"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.getChannelStatusHistory(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),e._v("历史")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"132"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoListEdit,expression:"qudaoListEdit"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.editChannelFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoListHistory,expression:"qudaoListHistory"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.getChannelHistoryFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),e._v("历史")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.channelInfo.pagination.currentPage,"page-sizes":e.channelInfo.pagination.pageSizes,"page-size":e.channelInfo.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.channelInfo.pagination.dataSize},on:{"size-change":e.channelTablePageSizeChange,"current-change":e.channelTableCurrentPageChange}})],1)],1),e._v(" "),1===e.breadNavInfo.current1&&0===e.breadNavInfo.current2?a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.actionChannelInfo.loading,expression:"actionChannelInfo.loading"}],staticClass:"action-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("h4",{staticClass:"action-title"},[e._v("渠道基础信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"companyName"}},[e._v("归属渠道商")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.proxyName,expression:"actionChannelInfo.info.proxyName"}],attrs:{type:"text",readonly:"true",id:"proxyName"},domProps:{value:e.actionChannelInfo.info.proxyName},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"proxyName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelLevel"}},[e._v("渠道级别")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.level,expression:"actionChannelInfo.info.level"}],attrs:{type:"text",readonly:"true",id:"level"},domProps:{value:e.actionChannelInfo.info.level},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"level",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelName"}},[e._v("渠道名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channelName,expression:"actionChannelInfo.info.channelName"}],attrs:{type:"text",id:"channelName",readonly:"true"},domProps:{value:e.actionChannelInfo.info.channelName},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channelName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelNo"}},[e._v("渠道编码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channelNo,expression:"actionChannelInfo.info.channelNo"}],attrs:{type:"text",id:"channelNo",readonly:"true",oninput:"value=value.replace(/[^0-9a-zA-Z]/g,'')",placeholder:"由字母和数字组合的5-15位编码"},domProps:{value:e.actionChannelInfo.info.channelNo},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channelNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("渠道号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channel,expression:"actionChannelInfo.info.channel"}],attrs:{type:"text",id:"channel",readonly:"true"},domProps:{value:e.actionChannelInfo.info.channel},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channel",t.target.value)}}})]),e._v(" "),"一级渠道"===e.actionChannelInfo.info.level?a("div",{staticClass:"input-group required"},[a("label",[e._v("是否可创建子渠道")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:e.actionChannelInfo.info.isCreate,callback:function(t){e.$set(e.actionChannelInfo.info,"isCreate",t)},expression:"actionChannelInfo.info.isCreate"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),"一级渠道"!==e.actionChannelInfo.info.level?a("div",{staticClass:"input-group required"},[a("label",[e._v("所属APP")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择APP"},model:{value:e.actionChannelInfo.info.appSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"appSelected",t)},expression:"actionChannelInfo.info.appSelected"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("是否实时同步")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.synchronous,callback:function(t){e.$set(e.actionChannelInfo.info,"synchronous",t)},expression:"actionChannelInfo.info.synchronous"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否（默认每日11点发布）")])],1)],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道属性")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道属性"},model:{value:e.actionChannelInfo.info.attributeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"attributeSelected",t)},expression:"actionChannelInfo.info.attributeSelected"}},e._l(e.actionChannelInfo.selectListInfo.attributeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道类型")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道类型"},model:{value:e.actionChannelInfo.info.typeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"typeSelected",t)},expression:"actionChannelInfo.info.typeSelected"}},e._l(e.actionChannelInfo.selectListInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道细分")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道细分"},model:{value:e.actionChannelInfo.info.divisionSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"divisionSelected",t)},expression:"actionChannelInfo.info.divisionSelected"}},e._l(e.actionChannelInfo.selectListInfo.divisionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group textAreaInput required"},[a("label",{attrs:{for:"url"}},[e._v("注册链接")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.url,expression:"actionChannelInfo.info.url"}],attrs:{id:"url",readonly:"true"},domProps:{value:e.actionChannelInfo.info.url},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"url",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("负责人")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.actionChannelInfo.info.adminSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"adminSelected",t)},expression:"actionChannelInfo.info.adminSelected"}},e._l(e.actionChannelInfo.selectListInfo.adminList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),a("h4",{staticClass:"action-title"},[e._v("分成信息")]),e._v(" "),e._l(e.firstLevelFcDataList,function(t,n){return"一级渠道"===e.actionChannelInfo.info.level&&0!==t.length?a("el-row",{key:n,staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("所属APP")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择APP"},model:{value:t.appid,callback:function(a){e.$set(t,"appid",a)},expression:"fcItem.appid"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("分成方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择分成方式"},model:{value:t.fcType,callback:function(a){e.$set(t,"fcType",a)},expression:"fcItem.fcType"}},e._l(e.actionChannelInfo.selectListInfo.fcTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:t.isStep,callback:function(a){e.$set(t,"isStep",a)},expression:"fcItem.isStep"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[a("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(t.fcType)))]),e._v(" "),0===t.isStep?a("input",{directives:[{name:"model",rawName:"v-model",value:t.stepData,expression:"fcItem.stepData"}],attrs:{type:"text",readonly:"true",maxLength:"3"},domProps:{value:t.stepData},on:{input:function(a){a.target.composing||e.$set(t,"stepData",a.target.value)}}}):e._e(),e._v(" "),a("span",[e._v(e._s(e._f("fcNumberFilter")(t.fcType)))]),e._v(" "),1===t.isStep?a("div",{staticClass:"inner-input-group clearfix"},[a("ul",e._l(t.fcTypeData.rewards,function(n,i){return a("li",{staticClass:"clearfix"},[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(t.fcType))+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("fcFormatter")(t.fcTypeData.rewards[i-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fcTypeData.rewards[i].max,expression:"fcItem.fcTypeData.rewards[index].max"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.fcTypeData.rewards[i].max},on:{input:function(a){a.target.composing||e.$set(t.fcTypeData.rewards[i],"max",a.target.value)}}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fcNumberFilter")(t.fcType))+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:n.price,expression:"item.price"}],attrs:{type:"text",readonly:"true"},domProps:{value:n.price},on:{input:function(t){t.target.composing||e.$set(n,"price",t.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(t.fcType)))])])])}))]):e._e()])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择结算周期"},model:{value:t.settlementCycle,callback:function(a){e.$set(t,"settlementCycle",a)},expression:"fcItem.settlementCycle"}},e._l(e.actionChannelInfo.selectListInfo.cycleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("成本计算方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择计算方式"},model:{value:t.cacCostType,callback:function(a){e.$set(t,"cacCostType",a)},expression:"fcItem.cacCostType"}},e._l(e.actionChannelInfo.selectListInfo.costList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("分成起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.actionChannelInfo.info.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo.info,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.info.gitTimestartAndEnd"}})],1)])],1):e._e()}),e._v(" "),"一级渠道"!==e.actionChannelInfo.info.level?a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("分成方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择分成方式"},model:{value:e.actionChannelInfo.info.fcTypeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"fcTypeSelected",t)},expression:"actionChannelInfo.info.fcTypeSelected"}},e._l(e.actionChannelInfo.selectListInfo.fcTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:e.actionChannelInfo.info.isStep,callback:function(t){e.$set(e.actionChannelInfo.info,"isStep",t)},expression:"actionChannelInfo.info.isStep"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[a("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected)))]),e._v(" "),0===e.actionChannelInfo.info.isStep?a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.stepData,expression:"actionChannelInfo.info.stepData"}],attrs:{type:"text",readonly:"true",maxLength:"3"},domProps:{value:e.actionChannelInfo.info.stepData},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"stepData",t.target.value)}}}):e._e(),e._v(" "),a("span",[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected)))]),e._v(" "),1===e.actionChannelInfo.info.isStep?a("div",{staticClass:"inner-input-group clearfix"},[a("ul",e._l(e.actionChannelInfo.rewardInfo.list,function(t,n){return a("li",{key:n,staticClass:"clearfix"},[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(e.actionChannelInfo.info.fcTypeSelected))+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("fcFormatter")(e.actionChannelInfo.rewardInfo.list[n-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.max,expression:"item.max"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.max},on:{input:function(a){a.target.composing||e.$set(t,"max",a.target.value)}}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected))+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"item.price"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.price},on:{input:function(a){a.target.composing||e.$set(t,"price",a.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(e.actionChannelInfo.info.fcTypeSelected)))])])])}))]):e._e()])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择结算周期"},model:{value:e.actionChannelInfo.info.cycleSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"cycleSelected",t)},expression:"actionChannelInfo.info.cycleSelected"}},e._l(e.actionChannelInfo.selectListInfo.cycleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("成本计算方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择计算方式"},model:{value:e.actionChannelInfo.info.costSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"costSelected",t)},expression:"actionChannelInfo.info.costSelected"}},e._l(e.actionChannelInfo.selectListInfo.costList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("分成起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.actionChannelInfo.info.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo.info,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.info.gitTimestartAndEnd"}})],1)])],1):e._e(),e._v(" "),a("h4",{staticClass:"action-title"},[e._v("优化信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("是否联动")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.linkage,callback:function(t){e.$set(e.actionChannelInfo.info,"linkage",t)},expression:"actionChannelInfo.info.linkage"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("优化内容")]),e._v(" "),a("el-checkbox-group",{model:{value:e.actionChannelInfo.info.optiContent,callback:function(t){e.$set(e.actionChannelInfo.info,"optiContent",t)},expression:"actionChannelInfo.info.optiContent"}},[a("el-checkbox",{attrs:{label:"优化比例"}}),e._v(" "),a("el-checkbox",{attrs:{label:"优化起始时间"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化比例(%)")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.optiRate,expression:"actionChannelInfo.info.optiRate"}],attrs:{type:"text",id:"channel",maxLength:"5",oninput:"value=value.replace(/^[^0-9][^0-9\\.]{0,}/g,'')"},domProps:{value:e.actionChannelInfo.info.optiRate},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"optiRate",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择优化起始时间"},model:{value:e.actionChannelInfo.info.optiTime,callback:function(t){e.$set(e.actionChannelInfo.info,"optiTime",t)},expression:"actionChannelInfo.info.optiTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn submit",on:{click:e.saveChannelInfoFun}},[e._v("提交")]),e._v(" "),a("button",{staticClass:"btn cancel",on:{click:e.cancelSaveChannelFun}},[e._v("取消")])])],2):e._e(),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1===e.breadNavInfo.current1&&1===e.breadNavInfo.current2,expression:"breadNavInfo.current1 === 1 && breadNavInfo.current2 === 1"},{name:"loading",rawName:"v-loading",value:e.proxyInfo.loading,expression:"proxyInfo.loading"}],staticClass:"table-container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("p",{staticClass:"table-title noBg"},[e._v("当前渠道："),a("span",[e._v(e._s(e.channelHistoryInfo.channelName))])]),e._v(" "),a("p",{staticClass:"table-title mrgt"},[e._v("分成历史记录")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelHistoryInfo.fcInfo.tableData,height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return a("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"分成起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"adminName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"任期起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"updateAdminName",label:"操作人"}})],1),e._v(" "),a("p",{staticClass:"table-title mrgt"},[e._v("优化历史记录")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelHistoryInfo.optiInfo.tableData,height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"optimization",label:"优化比例",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"startDate",label:"优化起始时间",sortable:"",formatter:e.timeStempFormatter1}}),e._v(" "),a("el-table-column",{attrs:{property:"updateDate",label:"操作时间",sortable:"",formatter:e.timeStempFormatter2}}),e._v(" "),a("el-table-column",{attrs:{property:"adminName",label:"操作人"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"切换渠道状态",visible:e.channelStatusInfo.visible,width:"370px",center:""},on:{"update:visible":function(t){e.$set(e.channelStatusInfo,"visible",t)}}},[a("span",[e._v("是否调整 "),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.searchChannelParams.parameter.proxyName)+"（公司名称），"+e._s(e.channelStatusInfo.channelName)+"（渠道名称），"+e._s(e.channelStatusInfo.channel)+"（渠道号）")]),e._v("状态为"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.channelStatusInfo.statusText))]),e._v("？点击确定"),a("span",{staticStyle:{color:"red"}},[e._v("“"+e._s(e.channelStatusInfo.statusText)+"”")]),e._v("该渠道，点击取消返回渠道列表”")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveChannelStatusFun}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"info",on:{click:e.toggleStatusDialogFun}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.optiInfo.loading,expression:"optiInfo.loading"}],attrs:{title:"切换渠道状态",visible:e.optiInfo.visible,width:"400px",center:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.optiInfo,"visible",t)}}},[a("div",[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化比例(%)")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.optiRate,expression:"actionChannelInfo.info.optiRate"}],attrs:{type:"text",id:"channel",maxLength:"5",oninput:"value=value.replace(/^[^0-9][^0-9\\.]{0,}/g,'')"},domProps:{value:e.actionChannelInfo.info.optiRate},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"optiRate",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择优化起始时间"},model:{value:e.actionChannelInfo.info.optiTime,callback:function(t){e.$set(e.actionChannelInfo.info,"optiTime",t)},expression:"actionChannelInfo.info.optiTime"}})],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("是否联动")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.linkage,callback:function(t){e.$set(e.actionChannelInfo.info,"linkage",t)},expression:"actionChannelInfo.info.linkage"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("优化内容")]),e._v(" "),a("el-checkbox-group",{model:{value:e.actionChannelInfo.info.optiContent,callback:function(t){e.$set(e.actionChannelInfo.info,"optiContent",t)},expression:"actionChannelInfo.info.optiContent"}},[a("el-checkbox",{attrs:{label:"优化比例"}}),e._v(" "),a("el-checkbox",{attrs:{label:"优化起始时间"}})],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveChannelOptiFun}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"info",on:{click:e.toggleOptiDialogFun}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"分成详情",center:"",width:"400",visible:e.firstLevelChannelRewardInfo.visible},on:{"update:visible":function(t){e.$set(e.firstLevelChannelRewardInfo,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.firstLevelChannelRewardInfo.loading,expression:"firstLevelChannelRewardInfo.loading"}],staticStyle:{width:"100%"},attrs:{data:e.firstLevelChannelRewardInfo.tableData,height:"300",border:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t,n){return a("p",{key:n,attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"渠道状态历史记录",center:"",width:"400",visible:e.channelStatusHistory.visible},on:{"update:visible":function(t){e.$set(e.channelStatusHistory,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.channelStatusHistory.loading,expression:"channelStatusHistory.loading"}],staticStyle:{width:"100%"},attrs:{data:e.channelStatusHistory.list,height:"300",border:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexFormatter2}}),e._v(" "),a("el-table-column",{attrs:{prop:"log",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateDate",label:"日期",formatter:e.timeStempFormatter3}})],1)],1)],1)},staticRenderFns:[]};var ta=a("vSla")(Zt,ea,!1,function(e){a("KK//")},"data-v-6eb4f0d7",null).exports,aa={},na={data:function(){return{userperadmin:{},breadNavInfo:{current1:1,level1Items:["查看渠道商信息","渠道管理"],current2:"",level2Items:["编辑渠道信息","渠道历史记录"]},searchProxyParams:{loading:!1,selected:"",list:[]},proxyInfo:{loading:!1,first:0,tableData:[],pagination:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100,200,500,1e3],dataSize:0},actionInfo:{loading:!1,proxyName:"",bankAccount:"",bank:"",dutyParagraph:"",phone:"",address:"",contacts:"",mobileno:"",email:""},chartPermissionInfo:{registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1}},firstLevelChannelRewardInfo:{visible:!1,loading:!1,tableData:[],editData:[]},searchChannelParams:{loading:!1,parameter:{proxyName:"",proxyId:"",channelName:"",channel:"",level:"",admin:"",status:"",appSelected:""},channelNameList:[],channelList:[],levelList:[{name:"全部渠道",value:""},{name:"一级渠道",value:1},{name:"二级渠道",value:2}],adminList:[],stateList:[{name:"全部状态",value:""},{name:"启用",value:1},{name:"禁用",value:0}]},channelInfo:{loading:!1,first:0,tableData:[],pagination:{currentPage:1,pageSize:10,pageSizes:[10,20,50,100,500,1e3],dataSize:0}},actionChannelInfo:{loading:!1,info:{channelId:"",optimizationId:"",proxyName:"",level:"",channelName:"",channelNo:"",channel:"",isCreate:"",appSelected:"",attributeSelected:"",typeSelected:"",divisionSelected:"",url:"",fcTypeSelected:"",isStep:"",stepData:"",rewards:"",cycleSelected:"",costSelected:"",gitTimestartAndEnd:"",adminSelected:"",synchronous:0,linkage:"",optiContent:[],optiRate:"",optiRateOld:"",optiTime:"",optiTimeOld:""},selectListInfo:{appList:[],attributeList:[],typeList:[],divisionList:[],fcTypeList:[],cycleList:[],costList:[],adminList:[]},rewardInfo:{list:[],temp:[],editList:[],fcUnitText:""}},firstLevelFcDataList:[],mainReward:{channelId:"",data:{}},channelHistoryInfo:{channelName:"",fcInfo:{loading:!1,tableData:[]},optiInfo:{loading:!1,tableData:[]}},channelStatusInfo:{visible:!1,statusText:"",channelName:"",channelId:"",channel:"",status:""},optiInfo:{loading:!1,visible:!1},channelStatusHistory:{visible:!1,loading:!1,list:[]},qudaoAdminStart:!1,qudaoAdminEdit:!1,qudaoAdminHistory:!1,qudaoAdminProOpt:!0}},mounted:function(){var e=this;setTimeout(function(){try{for(var t=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),a=e,n=0;n<t.data.length;n++)if("01"==t.data[n].meta&&t.data[n].children&&t.data[n].children.length>0)for(var i=0;i<t.data[n].children.length;i++)if("0102"==t.data[n].children[i].meta&&t.data[n].children[i].children&&t.data[n].children[i].children.length>0)for(var o=0;o<t.data[n].children[i].children.length;o++)"010201"==t.data[n].children[i].children[o].meta?a.qudaoAdminStart="0"!=t.data[n].children[i].children[o].show:"010202"==t.data[n].children[i].children[o].meta?a.qudaoAdminEdit="0"!=t.data[n].children[i].children[o].show:"010203"==t.data[n].children[i].children[o].meta?a.qudaoAdminHistory="0"!=t.data[n].children[i].children[o].show:"010204"==t.data[n].children[i].children[o].meta&&(a.qudaoAdminProOpt="0"!=t.data[n].children[i].children[o].show)}catch(e){}e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.getProxyNameListFun(),e.getChannelParamsFun(),e.getChannelListFun(),e.getEditChannelSelectListFun()},300)},computed:{fcText:function(){switch(this.actionChannelInfo.info.fcTypeSelected){case 26:return this.actionChannelInfo.rewardInfo.fcUnitText="元","注册用户";case 27:return this.actionChannelInfo.rewardInfo.fcUnitText="元","首提用户";case 28:return this.actionChannelInfo.rewardInfo.fcUnitText="%","分成比例";case 29:return this.actionChannelInfo.rewardInfo.fcUnitText="元","开户成功用户数"}}},filters:{fcNumberFilter:function(e){for(var t=0;t<aa.length;t++){if(e===aa[t].id)return aa[t].other.split(",")[0]}},fcNumber1Filter:function(e){for(var t=0;t<aa.length;t++){if(e===aa[t].id)return aa[t].other.split(",")[1]}},fcNumber2Filter:function(e){for(var t=0;t<aa.length;t++){if(e===aa[t].id)return aa[t].other.split(",")[2]}},rewardTypeIdFilter:function(e){for(var t=0;t<aa.length;t++)if(e===aa[t].id)return aa[t].name},toggleStatus:function(e){return 1===e?"启用":"禁用"},fcFormatter:function(e){return e?parseInt(e.max)+1:0},channelStatusFormatterSet:function(e){return 1===e?"已启用":"已禁用"},optiTimeFormmater:function(e){return 0!==e?St(e):""}},methods:{getChannelStatusHistory:function(e,t){var a=this,n={sessionid:this.userperadmin.sessionid,channelId:e.id};this.channelStatusHistory.visible=!0,this.channelStatusHistory.loading=!0,this.channelStatusHistory.list=[],at(n).then(function(e){0==e.data.status?(a.channelStatusHistory.loading=!1,a.channelStatusHistory.list=e.data.channelHistories,a.channelStatusHistory.list.reverse()):1==e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){a.channelStatusHistory.loading=!1,a.toast("服务器错误，请联系管理员","error")})},getPayCompanyFun:function(e,t,a){var n=this,i={sessionid:this.userperadmin.sessionid,proxyid:e};tt(i).then(function(e){for(var i=e.data.payCompanyList,o=n.actionChannelInfo.selectListInfo.appList,l=[],s=[],r=0;r<i.length;r++)for(var c=0;c<o.length;c++)if(i[r].appid===o[c].id){if(s.includes(i[r].appid))continue;s.push(i[r].appid),l.push({id:o[c].id,name:o[c].name})}"fromActionChannel"===t?n.getRewardMainFun(a,l):n.getFirstLevelRewardListFun(a,l)}).catch(function(e){n.toast("服务器错误，请联系管理员","error")})},getFirstLevelRewardListFun:function(e,t){for(var a=this,n=[],i=0;i<t.length;i++)n.push(t[i].id);var o={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:n.toString()};this.firstLevelChannelRewardInfo.visible=!0,Je(o).then(function(e){if(0===e.data.status){var t=a;a.firstLevelChannelRewardInfo.tableData=[],e.data.rewardList.forEach(function(e){e.rewardPrice=t.rewardPriceFormatter(e.rewardPrice),t.firstLevelChannelRewardInfo.tableData.push(e)})}else 1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error");a.firstLevelChannelRewardInfo.loading=!1}).catch(function(e){a.firstLevelChannelRewardInfo.loading=!1,a.toast("服务器错误，请联系管理员","error")})},getRewardMainFun:function(e,t){for(var a=this,n=[],i=0;i<t.length;i++)n.push(t[i].id);n=n.toString();var o={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:n};Ye(o).then(function(t){if(0===t.data.status){for(var n in t.data.mainReward)t.data.mainReward[n][0].date?a.actionChannelInfo.info.gitTimestartAndEnd=t.data.mainReward[n][0].date:a.actionChannelInfo.info.gitTimestartAndEnd="";var i=t.data.mainReward;a.firstLevelFcDataList.splice(0);var o=Xt()(i);a.mainReward.channelId=e.id;for(var l=0;l<o.length;l++){var s;if(0!==i[o[l]].length){if(1==i[o[l]].length)s={modified:!0,channelId:i[o[l]][0].channelId,id:i[o[l]][0].id,date:i[o[l]][0].date,appid:parseInt(o[l]),isStep:0,fcType:i[o[l]][0].typeId,settlementCycle:0===i[o[l]][0].settlementCycle?"":i[o[l]][0].settlementCycle,cacCostType:0===i[o[l]][0].costing?"":i[o[l]][0].costing,stepData:i[o[l]][0].price,fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}};else{s={channelId:i[o[l]][0].channelId,id:i[o[l]][0].id,date:i[o[l]][0].date,appid:parseInt(o[l]),isStep:1,fcType:i[o[l]][0].typeId,settlementCycle:0===i[o[l]][0].settlementCycle?"":i[o[l]][0].settlementCycle,cacCostType:0===i[o[l]][0].costing?"":i[o[l]][0].costing};var r={length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]};r.mins=[0],r.rewards=[],i[o[l]].forEach(function(e,t){t===i[o[l]].length-1?r.last.price=e.price:(r.mins.push(e.max+1),r.rewards.push({max:e.max,price:e.price}))}),r.length=i[o[l]].length-1,s.fcTypeData=r}a.firstLevelFcDataList.push(s)}else a.firstLevelFcDataList.push({modified:!1,appid:parseInt(o[l]),isStep:0,fcType:26,settlementCycle:"",cacCostType:"",stepData:"",fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}})}}else 1===t.data.status?a.$router.replace("/login"):a.toast(t.data.statusMsg,"error")}).catch(function(e){a.toast("服务器错误，请联系管理员1","error")})},indexFormatter:function(e){return this.proxyInfo.pagination.pageSize*(this.proxyInfo.pagination.currentPage-1)+1+e},indexFormatter1:function(e){return this.channelInfo.pagination.pageSize*(this.channelInfo.pagination.currentPage-1)+1+e},indexFormatter2:function(e){return e+1},editOptiInfoFun:function(e,t){this.resetChannelInfoFun(),this.optiInfo.visible=!0,this.editChannelFun(e)},toggleOptiDialogFun:function(){this.optiInfo.visible=!this.optiInfo.visible},saveChannelOptiFun:function(){this.saveChannelInfoFun(1)},toggleStatusDialogFun:function(){this.channelStatusInfo.visible=!this.channelStatusInfo.visible},toggleStatusFun:function(e,t){this.channelStatusInfo.channelName=e.channelName,this.channelStatusInfo.channelId=e.id,this.channelStatusInfo.channel=e.channel,this.channelStatusInfo.status=e.status,1===e.status?this.channelStatusInfo.statusText="禁用":this.channelStatusInfo.statusText="启用",this.toggleStatusDialogFun()},saveChannelStatusFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid,channelId:this.channelStatusInfo.channelId,status:1===this.channelStatusInfo.status?0:1};et(t).then(function(t){0===t.data.status?(e.toggleStatusDialogFun(),e.getChannelListFun()):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.toast("服务器错误，请联系管理员","error")})},getChannelHistoryFun:function(e,t){this.actionChannelInfo.info.channelId=e.id,this.channelHistoryInfo.channelName=e.channelName,this.toggleBreadNav("current2",1),this.getChannelFcHistoryFun(e),this.getOptimizationInfoFun()},getChannelFcHistoryFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,channelId:e.id};Ze(a).then(function(e){if(0===e.data.status){t.channelHistoryInfo.fcInfo.tableData=e.data.rewardList;var a=t;t.channelHistoryInfo.fcInfo.tableData.forEach(function(e,t,n){n[t].rewardPrice=a.rewardPriceFormatter(e.rewardPrice,1)})}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员","error")})},timeStempFormatter:function(e,t,a){return kt(e.date)},timeStempFormatter1:function(e,t,a){return kt(e.startDate)},timeStempFormatter2:function(e,t,a){return kt(e.updateDate)},timeStempFormatter3:function(e,t,a){return kt(a)},cancelSaveChannelFun:function(){this.toggleBreadNav("current2",""),this.resetChannelInfoFun()},saveChannelInfoFun:function(e){var t=this,a="";if(""===this.actionChannelInfo.info.optiRate||""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime)if(""===this.actionChannelInfo.info.optiRate&&""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime)this.toast("“优化比例”和“优化起始时间”必须同时输入","warning");else{if(a=""!==this.actionChannelInfo.info.optiTime&&this.actionChannelInfo.info.optiTime?wt(this.actionChannelInfo.info.optiTime):"",this.actionChannelInfo.info.optiRate!==this.actionChannelInfo.info.optiRateOld||this.actionChannelInfo.info.optiTime!==this.actionChannelInfo.info.optiTimeOld){var n=new Date;this.actionChannelInfo.info.optimizationId=n.getTime()}var i=new Date;i=i.getTime();var o={sessionid:this.userperadmin.sessionid,proxyId:this.searchChannelParams.parameter.proxyId,channelId:this.actionChannelInfo.info.channelId,id:this.actionChannelInfo.info.optimizationId,adminId:this.userperadmin.admin.id,synchronous:this.actionChannelInfo.info.synchronous,linkage:this.actionChannelInfo.info.linkage,optimization:this.actionChannelInfo.info.optiRate,startDate:a,updateDate:i};1===e?this.optiInfo.loading=!0:this.actionChannelInfo.loading=!0,Ke(o).then(function(a){t.actionChannelInfo.loading=!1,t.optiInfo.loading=!1,0===a.data.status?(1===e?t.toggleOptiDialogFun():t.toggleBreadNav("current2",""),t.resetChannelInfoFun(),t.getChannelListFun()):1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.optiInfo.loading=!1,t.actionChannelInfo.loading=!1,t.toast("服务器错误，请联系管理员1","error")})}else this.toast("“优化比例”和“优化起始时间”必须同时输入","warning")},resetChannelInfoFun:function(){this.actionChannelInfo.info.proxyName="",this.actionChannelInfo.info.level="",this.actionChannelInfo.info.channelName="",this.actionChannelInfo.info.channelNo="",this.actionChannelInfo.info.channel="",this.actionChannelInfo.info.isCreate="",this.actionChannelInfo.info.appSelected="",this.actionChannelInfo.info.attributeSelected="",this.actionChannelInfo.info.typeSelected="",this.actionChannelInfo.info.divisionSelected="",this.actionChannelInfo.info.url="",this.actionChannelInfo.info.fcTypeSelected="",this.actionChannelInfo.info.isStep="",this.actionChannelInfo.info.stepData="",this.actionChannelInfo.info.cycleSelected="",this.actionChannelInfo.info.costSelected="",this.actionChannelInfo.info.adminSelected="",this.actionChannelInfo.rewardInfo.list=[],this.actionChannelInfo.info.optimizationId="",this.actionChannelInfo.info.optiTime="",this.actionChannelInfo.info.optiTimeOld="",this.actionChannelInfo.info.optiRate="",this.actionChannelInfo.info.optiRateOld="",this.actionChannelInfo.info.linkage="",this.actionChannelInfo.info.optiContent=[],this.actionChannelInfo.info.synchronous=0},editChannelFun:function(e,t){this.searchChannelParams.parameter.proxyId=e.proxyId;var a="";if(this.searchProxyParams.list.forEach(function(t){t.id===e.proxyId&&(a=t.company)}),this.optiInfo.visible)this.actionChannelInfo.info.channelId=e.id,this.actionChannelInfo.info.optimizationId=e.optimizationId,this.actionChannelInfo.info.synchronous=e.synchronous,this.getOptimizationInfoFun(e.optimizationId);else{this.actionChannelInfo.loading=!0,this.toggleBreadNav("current2",0),this.actionChannelInfo.info.channelId=e.id,this.actionChannelInfo.info.optimizationId=e.optimizationId,this.actionChannelInfo.info.proxyName=a,this.actionChannelInfo.info.level=1===e.level?"一级渠道":"二级渠道",this.actionChannelInfo.info.channelName=e.channelName,this.actionChannelInfo.info.channelNo=e.channelNo,this.actionChannelInfo.info.channel=e.channel,this.actionChannelInfo.info.isCreate=e.isCreate,this.actionChannelInfo.info.appSelected=e.appId,this.actionChannelInfo.info.attributeSelected=e.attribute,this.actionChannelInfo.info.typeSelected=e.type,this.actionChannelInfo.info.divisionSelected=e.subdivision,this.actionChannelInfo.info.url=e.url,this.actionChannelInfo.info.fcTypeSelected=e.rewardTypeId,this.actionChannelInfo.info.synchronous=e.synchronous,1===e.level?this.actionChannelInfo.info.level="一级渠道":this.actionChannelInfo.info.level="二级渠道";var n=this;this.getEditChannelSelectListFun(function(t){t&&(1===e.level?n.getPayCompanyFun(e.proxyId,"fromActionChannel",e):n.getRewardListFun(e.rewardId))}),this.getOptimizationInfoFun(e.optimizationId)}},getOptimizationInfoFun:function(e){var t,a=this;if(e){if(0===e)return;t={sessionid:this.userperadmin.sessionid,optimizationId:e}}else t={sessionid:this.userperadmin.sessionid,channelId:this.actionChannelInfo.info.channelId};Xe(t).then(function(t){0===t.data.status?(a.actionChannelInfo.loading=!1,e?(t.data.optimizationList[0].optimization&&(a.actionChannelInfo.info.optiRate=t.data.optimizationList[0].optimization),t.data.optimizationList[0].id&&(a.actionChannelInfo.info.optimizationId=t.data.optimizationList[0].id),t.data.optimizationList[0].linkage&&(a.actionChannelInfo.info.linkage=t.data.optimizationList[0].linkage)):a.channelHistoryInfo.optiInfo.tableData=t.data.optimizationList):1===t.data.status?a.$router.replace("/login"):a.toast(t.data.statusMsg,"error")}).catch(function(e){a.actionChannelInfo.loading=!1,a.toast("服务器错误，请联系管理员1","error")})},getRewardListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,rewardId:e};Je(a).then(function(e){if(0===e.data.status){t.actionChannelInfo.loading=!1,t.actionChannelInfo.rewardInfo.list=e.data.rewardList,e.data.rewardList[0].date?t.actionChannelInfo.info.gitTimestartAndEnd=e.data.rewardList[0].date:t.actionChannelInfo.info.gitTimestartAndEnd="";var a=e.data.rewardList.length;if(0!==a)if(1===a)t.actionChannelInfo.info.isStep=0,t.actionChannelInfo.info.stepData=e.data.rewardList[0].price,t.actionChannelInfo.info.cycleSelected=e.data.rewardList[0].settlementCycle,t.actionChannelInfo.info.costSelected=e.data.rewardList[0].costing,t.actionChannelInfo.info.adminSelected=e.data.rewardList[0].adminId.toString();else{t.actionChannelInfo.info.isStep=1,t.actionChannelInfo.info.stepData=e.data.rewardList[0].price,t.actionChannelInfo.info.cycleSelected=e.data.rewardList[0].settlementCycle,t.actionChannelInfo.info.costSelected=e.data.rewardList[0].costing,t.actionChannelInfo.info.adminSelected=e.data.rewardList[0].adminId.toString()}}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.actionChannelInfo.loading=!1,t.toast("服务器错误，请联系管理员1","error")})},getEditChannelSelectListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid};We(a).then(function(a){if(0===a.data.status){if(t.actionChannelInfo.selectListInfo.appList=a.data.appList,t.actionChannelInfo.selectListInfo.attributeList=a.data.channelAttribute,t.actionChannelInfo.selectListInfo.typeList=a.data.channelType,t.actionChannelInfo.selectListInfo.divisionList=a.data.channelSubdivision,a.data.adminIdList&&0!==a.data.adminIdList.length){var n=t;n.actionChannelInfo.selectListInfo.adminList=[],a.data.adminIdList.forEach(function(e,t){var a=e.split(","),i={id:a[0],name:a[1],index:a[2]};n.actionChannelInfo.selectListInfo.adminList.push(i)})}aa=a.data.rewardTypeList,t.actionChannelInfo.selectListInfo.fcTypeList=a.data.rewardTypeList,t.actionChannelInfo.selectListInfo.cycleList=a.data.settlementCycleList,t.actionChannelInfo.selectListInfo.costList=a.data.costingList,e&&e(!0)}else 1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员2","error")})},channelStatusFormatter:function(e,t,a){return 1===a?"启用":"禁用"},appFormatter:function(e,t,a){var n=a;return this.actionChannelInfo.selectListInfo.appList.forEach(function(e){e.id===a&&(n=e.name)}),n},rewardTypeIdFormatter:function(e,t,a){return 26===a?"CPA单价":27===a?"CPS单价":28===a?"CPS比例":a},rewardPriceFormatter:function(e,t){if(e){var a=e.split(","),n=[],i=[];if(a.length<=1)if(1===t){var o=e.split("/");n.push(o[1])}else n.push(a[0]);else this.actionChannelInfo.rewardInfo.temp=a,a.forEach(function(e,t){var a=e.split("/");i.push({max:a[0],price:a[1]}),n[t]=0===t?"0 - "+a[0]+" : "+a[1]:parseInt(i[t-1].max)+1+" - "+a[0]+" : "+a[1]});return n}},selectedFormatter:function(e){1===e?this.searchChannelParams.parameter.channelName=this.searchChannelParams.parameter.channelName.replace(/[-]/g,""):this.searchChannelParams.parameter.channel=this.searchChannelParams.parameter.channel.replace(/[-]/g,"")},getChannelParamsFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};this.searchChannelParams.loading=!0,Ve(t).then(function(t){if(e.searchChannelParams.loading=!1,0===t.data.status){if(e.searchChannelParams.channelNameList=t.data.channelNameList,e.searchChannelParams.channelList=t.data.channelNoList,t.data.adminIdList&&0!==t.data.adminIdList.length){var a=e;a.searchChannelParams.adminList=[];try{t.data.adminIdList.forEach(function(e,t){var n=e.split(","),i={id:n[0],name:n[1]};a.searchChannelParams.adminList.push(i)})}catch(e){}}}else 1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.searchChannelParams.loading=!1,e.toast("服务器错误，请联系管理员","error")})},searchChannelListFun:function(){this.channelInfo.first=0,this.getChannelListFun()},getChannelListFun:function(e){var t=this,a={sessionid:this.userperadmin.sessionid,first:this.channelInfo.first,pageId:this.channelInfo.pagination.currentPage-1,pageSize:this.channelInfo.pagination.pageSize};void 0!==this.searchChannelParams.parameter.channelName&&""!==this.searchChannelParams.parameter.channelName&&(a.channelName=this.searchChannelParams.parameter.channelName.replace(/[-]/g,"")),void 0!==this.searchChannelParams.parameter.channel&&""!==this.searchChannelParams.parameter.channel&&(a.channel=this.searchChannelParams.parameter.channel.replace(/[-]/g,"")),void 0!==this.searchChannelParams.parameter.level&&""!==this.searchChannelParams.parameter.level&&(a.level=this.searchChannelParams.parameter.level),void 0!==this.searchChannelParams.parameter.admin&&""!==this.searchChannelParams.parameter.admin&&(a.adminId=this.searchChannelParams.parameter.admin),void 0!==this.searchChannelParams.parameter.status&&""!==this.searchChannelParams.parameter.status&&(a.status=this.searchChannelParams.parameter.status),void 0!==this.searchChannelParams.parameter.appSelected&&""!==this.searchChannelParams.parameter.appSelected&&(a.appid=this.searchChannelParams.parameter.appSelected),this.channelInfo.loading=!0,je(a).then(function(a){if(t.channelInfo.loading=!1,0===a.data.status){if(a.data.channelList){var n=t;t.channelInfo.tableData=a.data.channelList,t.channelInfo.tableData.forEach(function(e,t,a){a[t].rewardPrice=n.rewardPriceFormatter(e.rewardPrice)}),1===e&&(t.channelInfo.pagination.dataSize=parseInt(a.data.listSize))}a.data.listSize&&1!==t.channelInfo.first&&(t.channelInfo.pagination.dataSize=parseInt(a.data.listSize))}else 1===a.data.status?t.$router.replace("/login"):t.toast(a.data.statusMsg,"error")}).catch(function(e){t.channelInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},channelTablePageSizeChange:function(e){this.channelInfo.first=1,this.channelInfo.pagination.pageSize=e,this.channelInfo.pagination.currentPage=1,this.getChannelListFun()},channelTableCurrentPageChange:function(e){this.channelInfo.first=1,this.channelInfo.pagination.currentPage=e,this.getChannelListFun()},toggleBreadNav:function(e,t){this.breadNavInfo[e]=t,"current1"===e&&(this.breadNavInfo.current2="",""===t&&(this.searchChannelParams.parameter.channelName="",this.searchChannelParams.parameter.channel="",this.searchChannelParams.parameter.level="",this.searchChannelParams.parameter.admin="",this.searchChannelParams.parameter.status="")),this.resetChannelInfoFun()},backToProxyListFun:function(){this.toggleBreadNav("current1",""),this.resetProxyInfoFun()},proxyPageSizeChange:function(e){this.proxyInfo.first=1,this.proxyInfo.pagination.currentPage=1,this.proxyInfo.pagination.pageSize=e,this.getProxyInfoListFun()},proxyCurrentPageChange:function(e){this.proxyInfo.first=1,this.proxyInfo.pagination.currentPage=e,this.getProxyInfoListFun()},getProxyNameListFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};this.searchProxyParams.loading=!0,Qe(t).then(function(t){e.searchProxyParams.loading=!1,0===t.data.status?e.searchProxyParams.list=t.data.proxyList:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.searchProxyParams.loading=!1,e.toast("服务器错误，请联系管理员","error")})},getProxyInfoListFun:function(e){var t=this;if(!this.proxyInfo.loading){if(e)e.pageId=this.proxyInfo.pagination.currentPage-1,e.pageSize=this.proxyInfo.pagination.pageSize;else{e={sessionid:this.userperadmin.sessionid,first:this.proxyInfo.first,pageId:this.proxyInfo.pagination.currentPage-1,pageSize:this.proxyInfo.pagination.pageSize};if(""!==this.searchProxyParams.selected){var a=parseInt(this.searchProxyParams.selected);isNaN(a)?e.company=this.searchProxyParams.selected:e.id=this.searchProxyParams.selected}}this.proxyInfo.loading=!0,Ue(e).then(function(e){t.proxyInfo.loading=!1,0===e.data.status?(t.proxyInfo.tableData=e.data.proxyList,e.data.listSize&&(t.proxyInfo.pagination.dataSize=parseInt(e.data.listSize))):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.proxyInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})}},searchProxyInfoListFun:function(){var e,t=parseInt(this.searchProxyParams.selected);""===this.searchProxyParams.selected?(this.proxyInfo.first=0,this.getProxyInfoListFun()):isNaN(t)?(e={sessionid:this.userperadmin.sessionid,company:this.searchProxyParams.selected,first:0},this.getProxyInfoListFun(e)):(e={sessionid:this.userperadmin.sessionid,id:this.searchProxyParams.selected,first:0},this.getProxyInfoListFun(e))},viewChannelListFun:function(e,t){this.toggleBreadNav("current1",1),this.searchChannelParams.parameter.proxyId=e.id,this.searchChannelParams.parameter.proxyName=e.company,this.getChannelParamsFun(),this.getChannelListFun()},resetProxyInfoFun:function(){this.proxyInfo.actionInfo.proxyName="",this.proxyInfo.actionInfo.bankAccount="",this.proxyInfo.actionInfo.bank="",this.proxyInfo.actionInfo.dutyParagraph="",this.proxyInfo.actionInfo.phone="",this.proxyInfo.actionInfo.address="",this.proxyInfo.actionInfo.contacts="",this.proxyInfo.actionInfo.mobileno="",this.proxyInfo.actionInfo.email="",this.proxyInfo.chartPermissionInfo={registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1}},viewProxyInfoFun:function(e,t){var a=this;this.proxyInfo.actionInfo.loading=!0,this.toggleBreadNav("current1",0),this.proxyInfo.actionInfo.proxyName=e.company,this.proxyInfo.actionInfo.bankAccount=e.bankAccount,this.proxyInfo.actionInfo.bank=e.bank,this.proxyInfo.actionInfo.dutyParagraph=e.dutyParagraph,this.proxyInfo.actionInfo.phone=e.phone,this.proxyInfo.actionInfo.address=e.address,this.proxyInfo.actionInfo.contacts=e.contacts,this.proxyInfo.actionInfo.mobileno=e.mobileno,this.proxyInfo.actionInfo.email=e.email;var n,i={sessionid:this.userperadmin.sessionid,permissionId:e.permissionId};(n=i,Pe.a.post(Fe+"getChannelPermission",n)).then(function(e){a.proxyInfo.actionInfo.loading=!1,0===e.data.status?(a.proxyInfo.chartPermissionInfo=e.data.channelPermission,a.proxyInfo.chartPermissionInfo=a.permissionFormatter(a.proxyInfo.chartPermissionInfo,1)):1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){a.proxyInfo.actionInfo.loading=!1,a.toast("服务器错误，请联系管理员","error")})},permissionFormatter:function(e,t){var a=Xt()(e),n=Jt()(e);if(1===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=1===t)});else if(2===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=!0===t?1:0)});else{if(3===t)return n.includes(!0);var i=this;n.forEach(function(e,t){"id"!==a[t]?i.chartPermissionInfo[a[t]]=!1:i.chartPermissionInfo[a[t]]=""})}return e},toast:function(e,t){this.$message({type:t,message:e})}}},ia={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page proxy-page"},[a("div",{staticClass:"bread-nav"},[e._v("\n\t\t\t当前位置：\n\t\t\t"),""!==e.breadNavInfo.current1?a("span",{class:{link:""!==e.breadNavInfo.current2},on:{click:function(t){e.toggleBreadNav("current1",1)}}},[e._v(e._s(e.breadNavInfo.level1Items[e.breadNavInfo.current1]))]):e._e(),e._v(" "),""!==e.breadNavInfo.current2?a("span",{staticClass:"item"},[e._v(e._s(e.breadNavInfo.level2Items[e.breadNavInfo.current2]))]):e._e()]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:""===e.breadNavInfo.current2,expression:"breadNavInfo.current2 === ''"}],staticClass:"sub-table-wrapper"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.searchChannelParams.loading,expression:"searchChannelParams.loading"}],staticClass:"actions",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-col",{attrs:{xs:24}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道名称"},model:{value:e.searchChannelParams.parameter.channelName,callback:function(t){e.$set(e.searchChannelParams.parameter,"channelName",t)},expression:"searchChannelParams.parameter.channelName"}},e._l(e.searchChannelParams.channelNameList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道号"},model:{value:e.searchChannelParams.parameter.channel,callback:function(t){e.$set(e.searchChannelParams.parameter,"channel",t)},expression:"searchChannelParams.parameter.channel"}},e._l(e.searchChannelParams.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道级别"},model:{value:e.searchChannelParams.parameter.level,callback:function(t){e.$set(e.searchChannelParams.parameter,"level",t)},expression:"searchChannelParams.parameter.level"}},e._l(e.searchChannelParams.levelList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.searchChannelParams.parameter.admin,callback:function(t){e.$set(e.searchChannelParams.parameter,"admin",t)},expression:"searchChannelParams.parameter.admin"}},e._l(e.searchChannelParams.adminList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道状态"},model:{value:e.searchChannelParams.parameter.status,callback:function(t){e.$set(e.searchChannelParams.parameter,"status",t)},expression:"searchChannelParams.parameter.status"}},e._l(e.searchChannelParams.stateList,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择产品"},model:{value:e.searchChannelParams.parameter.appSelected,callback:function(t){e.$set(e.searchChannelParams.parameter,"appSelected",t)},expression:"searchChannelParams.parameter.appSelected"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("button",{staticClass:"btn blue",on:{click:e.searchChannelListFun}},[a("i",{staticClass:"fa fa-search"}),e._v("搜索")])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.channelInfo.loading,expression:"channelInfo.loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelInfo.tableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",index:e.indexFormatter1,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"负责人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"渠道级别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"产品",width:"100",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardTypeId",label:"分成方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.level?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.getPayCompanyFun(t.row.proxyId,"fromChannel",t.row)}}},[a("i",{staticClass:"fa fa-window-restore",attrs:{"aria-hidden":"true"}}),e._v("详情")]):e._e(),e._v(" "),1!==t.row.level?a("p",[e._v(e._s(e._f("rewardTypeIdFilter")(t.row.rewardTypeId)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(n){return a("p",{attrs:{"close-transition":""},on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(n))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"optimization",label:"优化比例(%)",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.qudaoAdminProOpt?a("div",{on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(t.row.optimization))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"优化起始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{click:function(a){e.editOptiInfoFun(t.row,t.$index)}}},[e._v(e._s(e._f("optiTimeFormmater")(t.row.startDate)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"渠道状态",width:"136",formatter:e.channelStatusFormatter},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoAdminStart,expression:"qudaoAdminStart"}],class:{status:t.row.status,status1:!t.row.status},attrs:{type:"text",size:"small"},on:{click:function(a){e.toggleStatusFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-cogs"}),e._v(e._s(e._f("channelStatusFormatterSet")(t.row.status)))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoAdminStart,expression:"qudaoAdminStart"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.getChannelStatusHistory(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),e._v("历史")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"124"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoAdminEdit,expression:"qudaoAdminEdit"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.editChannelFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.qudaoAdminHistory,expression:"qudaoAdminHistory"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.getChannelHistoryFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),e._v("历史")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.channelInfo.pagination.currentPage,"page-sizes":e.channelInfo.pagination.pageSizes,"page-size":e.channelInfo.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.channelInfo.pagination.dataSize},on:{"size-change":e.channelTablePageSizeChange,"current-change":e.channelTableCurrentPageChange}})],1)],1),e._v(" "),1===e.breadNavInfo.current1&&0===e.breadNavInfo.current2?a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.actionChannelInfo.loading,expression:"actionChannelInfo.loading"}],staticClass:"action-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("h4",{staticClass:"action-title"},[e._v("渠道基础信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"companyName"}},[e._v("归属渠道商")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.proxyName,expression:"actionChannelInfo.info.proxyName"}],attrs:{type:"text",readonly:"true",id:"proxyName"},domProps:{value:e.actionChannelInfo.info.proxyName},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"proxyName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelLevel"}},[e._v("渠道级别")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.level,expression:"actionChannelInfo.info.level"}],attrs:{type:"text",readonly:"true",id:"level"},domProps:{value:e.actionChannelInfo.info.level},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"level",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelName"}},[e._v("渠道名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channelName,expression:"actionChannelInfo.info.channelName"}],attrs:{type:"text",id:"channelName",readonly:"true"},domProps:{value:e.actionChannelInfo.info.channelName},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channelName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelNo"}},[e._v("渠道编码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channelNo,expression:"actionChannelInfo.info.channelNo"}],attrs:{type:"text",id:"channelNo",readonly:"true",oninput:"value=value.replace(/[^0-9a-zA-Z]/g,'')",placeholder:"由字母和数字组合的5-15位编码"},domProps:{value:e.actionChannelInfo.info.channelNo},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channelNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("渠道号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.channel,expression:"actionChannelInfo.info.channel"}],attrs:{type:"text",id:"channel",readonly:"true"},domProps:{value:e.actionChannelInfo.info.channel},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"channel",t.target.value)}}})]),e._v(" "),"一级渠道"===e.actionChannelInfo.info.level?a("div",{staticClass:"input-group required"},[a("label",[e._v("是否可创建子渠道")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:e.actionChannelInfo.info.isCreate,callback:function(t){e.$set(e.actionChannelInfo.info,"isCreate",t)},expression:"actionChannelInfo.info.isCreate"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),"一级渠道"!==e.actionChannelInfo.info.level?a("div",{staticClass:"input-group required"},[a("label",[e._v("所属APP")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择APP"},model:{value:e.actionChannelInfo.info.appSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"appSelected",t)},expression:"actionChannelInfo.info.appSelected"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("是否实时同步")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.synchronous,callback:function(t){e.$set(e.actionChannelInfo.info,"synchronous",t)},expression:"actionChannelInfo.info.synchronous"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否（默认每日11点发布）")])],1)],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道属性")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道属性"},model:{value:e.actionChannelInfo.info.attributeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"attributeSelected",t)},expression:"actionChannelInfo.info.attributeSelected"}},e._l(e.actionChannelInfo.selectListInfo.attributeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道类型")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道类型"},model:{value:e.actionChannelInfo.info.typeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"typeSelected",t)},expression:"actionChannelInfo.info.typeSelected"}},e._l(e.actionChannelInfo.selectListInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道细分")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道细分"},model:{value:e.actionChannelInfo.info.divisionSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"divisionSelected",t)},expression:"actionChannelInfo.info.divisionSelected"}},e._l(e.actionChannelInfo.selectListInfo.divisionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group textAreaInput required"},[a("label",{attrs:{for:"url"}},[e._v("注册链接")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.url,expression:"actionChannelInfo.info.url"}],attrs:{id:"url",readonly:"true"},domProps:{value:e.actionChannelInfo.info.url},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"url",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("负责人")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.actionChannelInfo.info.adminSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"adminSelected",t)},expression:"actionChannelInfo.info.adminSelected"}},e._l(e.actionChannelInfo.selectListInfo.adminList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),a("h4",{staticClass:"action-title"},[e._v("分成信息")]),e._v(" "),e._l(e.firstLevelFcDataList,function(t,n){return"一级渠道"===e.actionChannelInfo.info.level&&0!==t.length?a("el-row",{key:n,staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("所属APP")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择APP"},model:{value:t.appid,callback:function(a){e.$set(t,"appid",a)},expression:"fcItem.appid"}},e._l(e.actionChannelInfo.selectListInfo.appList,function(e,t){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("分成方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择分成方式"},model:{value:t.fcType,callback:function(a){e.$set(t,"fcType",a)},expression:"fcItem.fcType"}},e._l(e.actionChannelInfo.selectListInfo.fcTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:t.isStep,callback:function(a){e.$set(t,"isStep",a)},expression:"fcItem.isStep"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[a("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(t.fcType)))]),e._v(" "),0===t.isStep?a("input",{directives:[{name:"model",rawName:"v-model",value:t.stepData,expression:"fcItem.stepData"}],attrs:{type:"text",readonly:"true",maxLength:"3"},domProps:{value:t.stepData},on:{input:function(a){a.target.composing||e.$set(t,"stepData",a.target.value)}}}):e._e(),e._v(" "),a("span",[e._v(e._s(e._f("fcNumberFilter")(t.fcType)))]),e._v(" "),1===t.isStep?a("div",{staticClass:"inner-input-group clearfix"},[a("ul",e._l(t.fcTypeData.rewards,function(n,i){return a("li",{staticClass:"clearfix"},[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(t.fcType))+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("fcFormatter")(t.fcTypeData.rewards[i-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fcTypeData.rewards[i].max,expression:"fcItem.fcTypeData.rewards[index].max"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.fcTypeData.rewards[i].max},on:{input:function(a){a.target.composing||e.$set(t.fcTypeData.rewards[i],"max",a.target.value)}}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fcNumberFilter")(t.fcType))+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:n.price,expression:"item.price"}],attrs:{type:"text",readonly:"true"},domProps:{value:n.price},on:{input:function(t){t.target.composing||e.$set(n,"price",t.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(t.fcType)))])])])}))]):e._e()])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择结算周期"},model:{value:t.settlementCycle,callback:function(a){e.$set(t,"settlementCycle",a)},expression:"fcItem.settlementCycle"}},e._l(e.actionChannelInfo.selectListInfo.cycleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("成本计算方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择计算方式"},model:{value:t.cacCostType,callback:function(a){e.$set(t,"cacCostType",a)},expression:"fcItem.cacCostType"}},e._l(e.actionChannelInfo.selectListInfo.costList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("分成起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.actionChannelInfo.info.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo.info,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.info.gitTimestartAndEnd"}})],1)])],1):e._e()}),e._v(" "),"一级渠道"!==e.actionChannelInfo.info.level?a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("分成方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择分成方式"},model:{value:e.actionChannelInfo.info.fcTypeSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"fcTypeSelected",t)},expression:"actionChannelInfo.info.fcTypeSelected"}},e._l(e.actionChannelInfo.selectListInfo.fcTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),a("el-radio-group",{attrs:{disabled:""},model:{value:e.actionChannelInfo.info.isStep,callback:function(t){e.$set(e.actionChannelInfo.info,"isStep",t)},expression:"actionChannelInfo.info.isStep"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[a("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected)))]),e._v(" "),0===e.actionChannelInfo.info.isStep?a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.stepData,expression:"actionChannelInfo.info.stepData"}],attrs:{type:"text",readonly:"true",maxLength:"3"},domProps:{value:e.actionChannelInfo.info.stepData},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"stepData",t.target.value)}}}):e._e(),e._v(" "),a("span",[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected)))]),e._v(" "),1===e.actionChannelInfo.info.isStep?a("div",{staticClass:"inner-input-group clearfix"},[a("ul",e._l(e.actionChannelInfo.rewardInfo.list,function(t,n){return a("li",{key:n,staticClass:"clearfix"},[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(e.actionChannelInfo.info.fcTypeSelected))+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("fcFormatter")(e.actionChannelInfo.rewardInfo.list[n-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.max,expression:"item.max"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.max},on:{input:function(a){a.target.composing||e.$set(t,"max",a.target.value)}}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e._f("fcNumberFilter")(e.actionChannelInfo.info.fcTypeSelected))+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"item.price"}],attrs:{type:"text",readonly:"true"},domProps:{value:t.price},on:{input:function(a){a.target.composing||e.$set(t,"price",a.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(e.actionChannelInfo.info.fcTypeSelected)))])])])}))]):e._e()])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择结算周期"},model:{value:e.actionChannelInfo.info.cycleSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"cycleSelected",t)},expression:"actionChannelInfo.info.cycleSelected"}},e._l(e.actionChannelInfo.selectListInfo.cycleList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.actionChannelInfo.info.attributeSelected,expression:"actionChannelInfo.info.attributeSelected !== 8"}],staticClass:"input-group required"},[a("label",[e._v("成本计算方式")]),e._v(" "),a("el-select",{attrs:{disabled:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择计算方式"},model:{value:e.actionChannelInfo.info.costSelected,callback:function(t){e.$set(e.actionChannelInfo.info,"costSelected",t)},expression:"actionChannelInfo.info.costSelected"}},e._l(e.actionChannelInfo.selectListInfo.costList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("分成起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",disabled:""},model:{value:e.actionChannelInfo.info.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo.info,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.info.gitTimestartAndEnd"}})],1)])],1):e._e(),e._v(" "),a("h4",{staticClass:"action-title"},[e._v("优化信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",[e._v("是否联动")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.linkage,callback:function(t){e.$set(e.actionChannelInfo.info,"linkage",t)},expression:"actionChannelInfo.info.linkage"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("优化内容")]),e._v(" "),a("el-checkbox-group",{model:{value:e.actionChannelInfo.info.optiContent,callback:function(t){e.$set(e.actionChannelInfo.info,"optiContent",t)},expression:"actionChannelInfo.info.optiContent"}},[a("el-checkbox",{attrs:{label:"优化比例"}}),e._v(" "),a("el-checkbox",{attrs:{label:"优化起始时间"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化比例(%)")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.optiRate,expression:"actionChannelInfo.info.optiRate"}],attrs:{type:"text",id:"channel",maxLength:"5",oninput:"value=value.replace(/^[^0-9][^0-9\\.]{0,}/g,'')"},domProps:{value:e.actionChannelInfo.info.optiRate},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"optiRate",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择优化起始时间"},model:{value:e.actionChannelInfo.info.optiTime,callback:function(t){e.$set(e.actionChannelInfo.info,"optiTime",t)},expression:"actionChannelInfo.info.optiTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"btns"},[a("button",{staticClass:"btn submit",on:{click:e.saveChannelInfoFun}},[e._v("提交")]),e._v(" "),a("button",{staticClass:"btn cancel",on:{click:e.cancelSaveChannelFun}},[e._v("取消")])])],2):e._e(),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1===e.breadNavInfo.current1&&1===e.breadNavInfo.current2,expression:"breadNavInfo.current1 === 1 && breadNavInfo.current2 === 1"},{name:"loading",rawName:"v-loading",value:e.proxyInfo.loading,expression:"proxyInfo.loading"}],staticClass:"table-container",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("p",{staticClass:"table-title noBg"},[e._v("当前渠道："),a("span",[e._v(e._s(e.channelHistoryInfo.channelName))])]),e._v(" "),a("p",{staticClass:"table-title mrgt"},[e._v("分成历史记录")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelHistoryInfo.fcInfo.tableData,height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return a("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"分成起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"adminName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"任期起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"updateAdminName",label:"操作人"}})],1),e._v(" "),a("p",{staticClass:"table-title mrgt"},[e._v("优化历史记录")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelHistoryInfo.optiInfo.tableData,height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{property:"optimization",label:"优化比例",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"startDate",label:"优化起始时间",sortable:"",formatter:e.timeStempFormatter1}}),e._v(" "),a("el-table-column",{attrs:{property:"updateDate",label:"操作时间",sortable:"",formatter:e.timeStempFormatter2}}),e._v(" "),a("el-table-column",{attrs:{property:"adminName",label:"操作人"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"切换渠道状态",visible:e.channelStatusInfo.visible,width:"370px",center:""},on:{"update:visible":function(t){e.$set(e.channelStatusInfo,"visible",t)}}},[a("span",[e._v("是否调整 "),a("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(e.searchChannelParams.parameter.proxyName)+"（公司名称），"+e._s(e.channelStatusInfo.channelName)+"（渠道名称），"+e._s(e.channelStatusInfo.channel)+"（渠道号）")]),e._v("状态为"),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.channelStatusInfo.statusText))]),e._v("？点击确定"),a("span",{staticStyle:{color:"red"}},[e._v("“"+e._s(e.channelStatusInfo.statusText)+"”")]),e._v("该渠道，点击取消返回渠道列表”")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveChannelStatusFun}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"info",on:{click:e.toggleStatusDialogFun}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.optiInfo.loading,expression:"optiInfo.loading"}],attrs:{title:"切换渠道状态",visible:e.optiInfo.visible,width:"400px",center:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"},on:{"update:visible":function(t){e.$set(e.optiInfo,"visible",t)}}},[a("div",[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化比例(%)")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.info.optiRate,expression:"actionChannelInfo.info.optiRate"}],attrs:{type:"text",id:"channel",maxLength:"5",oninput:"value=value.replace(/^[^0-9][^0-9\\.]{0,}/g,'')"},domProps:{value:e.actionChannelInfo.info.optiRate},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo.info,"optiRate",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("优化起始时间")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择优化起始时间"},model:{value:e.actionChannelInfo.info.optiTime,callback:function(t){e.$set(e.actionChannelInfo.info,"optiTime",t)},expression:"actionChannelInfo.info.optiTime"}})],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("是否联动")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.info.linkage,callback:function(t){e.$set(e.actionChannelInfo.info,"linkage",t)},expression:"actionChannelInfo.info.linkage"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("优化内容")]),e._v(" "),a("el-checkbox-group",{model:{value:e.actionChannelInfo.info.optiContent,callback:function(t){e.$set(e.actionChannelInfo.info,"optiContent",t)},expression:"actionChannelInfo.info.optiContent"}},[a("el-checkbox",{attrs:{label:"优化比例"}}),e._v(" "),a("el-checkbox",{attrs:{label:"优化起始时间"}})],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveChannelOptiFun}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"info",on:{click:e.toggleOptiDialogFun}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"分成详情",center:"",width:"400",visible:e.firstLevelChannelRewardInfo.visible},on:{"update:visible":function(t){e.$set(e.firstLevelChannelRewardInfo,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.firstLevelChannelRewardInfo.loading,expression:"firstLevelChannelRewardInfo.loading"}],staticStyle:{width:"100%"},attrs:{data:e.firstLevelChannelRewardInfo.tableData,height:"300",border:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t,n){return a("p",{key:n,attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"渠道状态历史记录",center:"",width:"400",visible:e.channelStatusHistory.visible},on:{"update:visible":function(t){e.$set(e.channelStatusHistory,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.channelStatusHistory.loading,expression:"channelStatusHistory.loading"}],staticStyle:{width:"100%"},attrs:{data:e.channelStatusHistory.list,height:"300",border:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexFormatter2}}),e._v(" "),a("el-table-column",{attrs:{prop:"log",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateDate",label:"日期",formatter:e.timeStempFormatter3}})],1)],1)],1)},staticRenderFns:[]};var oa=a("vSla")(na,ia,!1,function(e){a("4veD")},"data-v-6f381194",null).exports,la={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:"",optionsApp:1},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",chooseApp:[],rewardTypeValue:"",rewardTypeList:[],versionsData:[{value:"-1",label:"全部"}],versions:"",gitTimeold:[],gitTimeNew:{},checkList:["总计","渠道号","渠道分类","负责人","H5","额度","首贷","续贷","外部"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],fbsDataHeight:null,tableloading:!1,fontCheack:{total:!1,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,H5:!0,moneySize:!0,fristHaveMoney:!0,renew:!0,without:!0,time:!0,version:!0},key:1,headerTitle:[],secrchSetData:{},currentPage:1,pageSizes:[50,100,300,500],dataSize:0,pagesize:50,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0,downDataInfo:{}}},watch:{checkList:function(e){this.key=this.key+1}},filters:{addSuffix:function(e){return"H5激活转化"==e||"注册转化"==e||"进件转化"==e||"开户转化"==e||"提现转化"==e||"毛利率"==e||"优化比例"==e?"%":void 0}},methods:{getClientHeight:function(){var e=window.document.documentElement.clientHeight;this.fbsDataHeight=e-260},sharchInfoSelect:function(e){var t=!1,a=!1,n=this,i={sessionid:e},o=Ne()(i);nt(o).then(function(e){if(0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],o=e.data.adminIdList[a].split(",")[1];n.fuzheren.push({value:i,label:o}),n.qudaoInfo.optionsqudao=e.data.channelNameList,n.qudaoInfo.optionsqudaonum=e.data.channelNoList,t=!0}1===e.data.status&&n.$router.replace("/login")}),it(o).then(function(e){if(n.rewardTypeList=e.data.rewardTypeList,n.chooseApp=e.data.appList,0===e.data.status){for(var t=0;t<e.data.channelAttribute.length;t++){var i=e.data.channelAttribute[t].id,o=e.data.channelAttribute[t].name;n.qudaoshuxing.push({value:i,label:o})}n.channelType=e.data.channelType,n.channelSubdivision=e.data.channelSubdivision,a=!0}1===e.data.status&&n.$router.replace("/login")});var l=setInterval(function(){n.baobiaoSearchIndex++,t&&a?(n.Statrloading=!1,clearInterval(l),n.baobiaoSearchIndex=0,n.search()):n.baobiaoSearchIndex<2?n.sharchInfoSelect(i.sessionid):(n.$message.error("数据获取超时"),clearInterval(l),n.baobiaoSearchIndex=4,n.Statrloading=!1)},2e3)},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,n=this.channelType[t].name;this.options4.push({label:n,id:a})}for(var i=1;i<this.options4.length;i++){this.options4[i].options=[];for(var o=0;o<this.channelSubdivision.length;o++)this.options4[i].id===this.channelSubdivision[o].higherId&&this.options4[i].options.push({value:this.channelSubdivision[o].higherId+","+this.channelSubdivision[o].id,label:this.channelSubdivision[o].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=3?(1===this.iconImgIndex&&(this.iconImg="fa fa-sun-o"),2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"),3===this.iconImgIndex&&(this.iconImg=" el-icon-circle-close")):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.checkList=["总计","渠道号","渠道分类","负责人","H5","额度","首贷","续贷","外部"],this.headerTitle=[],this.fbsData=[],this.tableloading=!0,this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channel:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",appId:this.qudaoInfo.optionsApp,adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",changHouser:this.changHouser,rewardTypeId:this.rewardTypeValue,minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first,tag:this.checkList,seo:0};var t=this,a=Ne()(this.secrchSetData);ot(a).then(function(a){0===a.data.status&&(t.headerTitle=[],t.fbsData=[],t.fbsData=a.data.datas,t.fbsData.map(function(e,t){return isNaN(e)?e:parseFloat(e)}),a.data.proxyNameList.map(function(e,a){t.headerTitle.push({headerTit:e,showStatus:!0})}),a.data.listSize?(1===e.secrchSetData.dateType&&(t.dataTimeDay=parseInt(a.data.listSize),t.dataSize=t.dataTimeDay),2===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth),3===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth)):t.dataSize=t.dataSize,setTimeout(function(){t.tableloading=!1},1e3),t.first=0);1===a.data.status&&t.$router.replace("/login")}).catch(function(e){t.$message.error("数据搜索失败"),t.tableloading=!1})},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""},valuequdaoChange:function(){this.qudaoInfo.valuequdao=this.qudaoInfo.valuequdao.replace(/\-/gi,"")},valuequdaonumChange:function(){this.qudaoInfo.valuequdaonum=this.qudaoInfo.valuequdaonum},fontchangeIsShow:function(e){var t=this;switch(e){case 1:this.fontCheack.total=!this.fontCheack.total;break;case 2:this.fontCheack.qudaoNumber=!this.fontCheack.qudaoNumber,this.headerTitle.map(function(e,a){"渠道"!=e.headerTit&&"渠道号"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.qudaoNumber})});break;case 3:this.fontCheack.qudaoClass=!this.fontCheack.qudaoClass,this.headerTitle.map(function(e,a){"渠道分类"!=e.headerTit&&"分成方式"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.qudaoClass})});break;case 4:this.fontCheack.fuzeren=!this.fontCheack.fuzeren,this.headerTitle.map(function(e,a){"负责人"==e.headerTit&&t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.fuzeren})});break;case 5:this.fontCheack.H5=!this.fontCheack.H5,this.headerTitle.map(function(e,a){"H5点击"!=e.headerTit&&"H5注册"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.H5})});break;case 6:this.fontCheack.moneySize=!this.fontCheack.moneySize,this.headerTitle.map(function(e,a){"授信总额"!=e.headerTit&&"人均批额"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.moneySize})});break;case 7:this.fontCheack.fristHaveMoney=!this.fontCheack.fristHaveMoney,this.headerTitle.map(function(e,a){"首提人数"!=e.headerTit&&"首贷金额"!=e.headerTit&&"外部首贷金额"!=e.headerTit&&"首贷笔均"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.fristHaveMoney})});break;case 8:this.fontCheack.renew=!this.fontCheack.renew,this.headerTitle.map(function(e,a){"续贷人数"!=e.headerTit&&"续放笔数"!=e.headerTit&&"续贷金额"!=e.headerTit&&"续贷笔均"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.renew})});break;case 9:this.fontCheack.without=!this.fontCheack.without,this.headerTitle.map(function(e,a){"外部注册"!=e.headerTit&&"外部进件"!=e.headerTit&&"外部开户"!=e.headerTit&&"外部首提"!=e.headerTit&&"外部渠道提现金额"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.without})})}},dataTime:function(){this.gitTimeold=[]},dataTimeYMD:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<9?"0"+e.getDate():e.getDate())},clickRow:function(e,t,a){},indexFormatter1:function(e){return this.pagesize*(this.currentPage-1)+1+e},downData:function(){this.downDataInfo=this.secrchSetData;var e=Ne()(this.downDataInfo);lt(e).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="运营数据详情统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"运营数据详情统计表.xls")})}},activated:function(){var e=localStorage.getItem("userperadmin");this.sessionid=JSON.parse(e).sessionid;var t=new Date;t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate()),n=new Date;n.setTime(n.getTime());var i=n.getFullYear()+"-"+(n.getMonth()+1>=10?n.getMonth()+1:"0"+(n.getMonth()+1))+"-"+(n.getDate()>=10?n.getDate():"0"+n.getDate());this.gitTimeold=[a,i],this.fontCheack={total:!1,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,H5:!0,moneySize:!0,fristHaveMoney:!0,renew:!0,without:!0,time:!0,version:!0},this.findTime(),this.getClientHeight(),this.sharchInfoSelect(this.sessionid)}},sa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道"},on:{focus:e.focusQudao,change:e.valuequdaoChange},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号"},on:{focus:e.focusQudaonum,change:e.valuequdaonumChange},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t,n){return a("el-option-group",{key:n,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{"default-first-option":"",placeholder:"APP"},model:{value:e.qudaoInfo.optionsApp,callback:function(t){e.$set(e.qudaoInfo,"optionsApp",t)},expression:"qudaoInfo.optionsApp"}},e._l(e.chooseApp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"分成方式"},model:{value:e.rewardTypeValue,callback:function(t){e.rewardTypeValue=t},expression:"rewardTypeValue"}},e._l(e.rewardTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block dataStyle"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1)])],1),e._v(" "),a("div",{staticClass:"divheight"}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"总计"},on:{change:function(t){e.fontchangeIsShow(1)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"渠道号"},on:{change:function(t){e.fontchangeIsShow(2)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道分类"},on:{change:function(t){e.fontchangeIsShow(3)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"负责人"},on:{change:function(t){e.fontchangeIsShow(4)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"H5"},on:{change:function(t){e.fontchangeIsShow(5)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"额度"},on:{change:function(t){e.fontchangeIsShow(6)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"首贷"},on:{change:function(t){e.fontchangeIsShow(7)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"续贷"},on:{change:function(t){e.fontchangeIsShow(8)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"外部"},on:{change:function(t){e.fontchangeIsShow(9)}}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"downsharchRight",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"searchStyle",attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"},on:{click:e.downData}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper tablepadding",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],key:e.key,staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?e.fbsDataHeight:150,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0},on:{"row-click":e.clickRow}},e._l(e.headerTitle,function(t,n){return t.showStatus?a("el-table-column",{key:t.headerTit,attrs:{prop:"date",label:t.headerTit,width:"日期"==t.headerTit?160:"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(a.row[n])+e._s(e._f("addSuffix")(t.headerTit))+"\n          ")]}}])}):e._e()})),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]};var ra=a("vSla")(la,sa,!1,function(e){a("DUmt")},"data-v-86154950",null).exports,ca={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:""},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",versionsData:[{value:"-1",label:"全部"}],versions:"",changHouserData:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],changHouser:"",gitTimeold:[],gitTimeNew:{},checkList:["渠道","渠道号","渠道分类","负责人","H5","小时","版本"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],fbsDataHeight:null,tableloading:!1,fontCheack:{qudao:!0,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,H5:!0,time:!0,version:!0},secrchSetData:{},currentPage:1,pageSizes:[100,150,200,500],dataSize:0,pagesize:100,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0,downDataInfo:{}}},methods:{getClientHeight:function(){var e=window.document.documentElement.clientHeight;this.fbsDataHeight=e-260},sharchInfoSelect:function(e){var t=!1,a=!1,n=this,i={sessionid:e},o=Ne()(i);nt(o).then(function(e){if(0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],o=e.data.adminIdList[a].split(",")[1];n.fuzheren.push({value:i,label:o}),n.qudaoInfo.optionsqudao=e.data.channelNameList,n.qudaoInfo.optionsqudaonum=e.data.channelNoList,t=!0}1===e.data.status&&n.$router.replace("/login")}),it(o).then(function(e){if(0===e.data.status){for(var t=0;t<e.data.channelAttribute.length;t++){var i=e.data.channelAttribute[t].id,o=e.data.channelAttribute[t].name;n.qudaoshuxing.push({value:i,label:o})}n.channelType=e.data.channelType,n.channelSubdivision=e.data.channelSubdivision,a=!0}1===e.data.status&&n.$router.replace("/login")});var l=setInterval(function(){n.baobiaoSearchIndex++,t&&a?(n.Statrloading=!1,clearInterval(l),n.baobiaoSearchIndex=0,n.search()):n.baobiaoSearchIndex<2?n.sharchInfoSelect(i.sessionid):(n.$message.error("数据获取超时"),clearInterval(l),n.baobiaoSearchIndex=4,n.Statrloading=!1)},2e3)},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,n=this.channelType[t].name;this.options4.push({label:n,id:a})}for(var i=1;i<this.options4.length;i++){this.options4[i].options=[];for(var o=0;o<this.channelSubdivision.length;o++)this.options4[i].id===this.channelSubdivision[o].higherId&&this.options4[i].options.push({value:this.channelSubdivision[o].higherId+","+this.channelSubdivision[o].id,label:this.channelSubdivision[o].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=2?2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.tableloading=!0,this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channel:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first};var t=this,a=Ne()(this.secrchSetData);ot(a).then(function(a){0===a.data.status&&(1===e.secrchSetData.dateType&&(t.fbsData=a.data.reportforms_day),2===e.secrchSetData.dateType&&(t.fbsData=a.data.reportforms_month),a.data.listSize?(1===e.secrchSetData.dateType&&(t.dataTimeDay=parseInt(a.data.listSize),t.dataSize=t.dataTimeDay),2===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth)):t.dataSize=t.dataSize,t.tableloading=!1,t.first=0),1===a.data.status&&t.$router.replace("/login")}).catch(function(e){t.$message.error("数据搜索失败"),t.tableloading=!1})},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""},valuequdaoChange:function(){this.qudaoInfo.valuequdao=this.qudaoInfo.valuequdao.replace(/\-/gi,"")},valuequdaonumChange:function(){this.qudaoInfo.valuequdaonum=this.qudaoInfo.valuequdaonum},fontchangeIsShow:function(e){switch(e){case 1:this.fontCheack.qudao=!this.fontCheack.qudao;break;case 2:this.fontCheack.qudaoNumber=!this.fontCheack.qudaoNumber;break;case 3:this.fontCheack.qudaoClass=!this.fontCheack.qudaoClass;break;case 4:this.fontCheack.fuzeren=!this.fontCheack.fuzeren;break;case 5:this.fontCheack.H5=!this.fontCheack.H5;break;case 6:this.fontCheack.time=!this.fontCheack.time;break;case 7:this.fontCheack.version=!this.fontCheack.version}},dataTime:function(){this.gitTimeold=[]},dataTimeYMD:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<9?"0"+e.getDate():e.getDate())},clickRow:function(e,t,a){},downData:function(){this.downDataInfo=this.secrchSetData,this.downDataInfo.tag=this.checkList;Ne()(this.downDataInfo)}},mounted:function(){var e=this;setTimeout(function(){var t=localStorage.getItem("userperadmin");e.sessionid=JSON.parse(t).sessionid;var a=new Date;a.setTime(a.getTime()-864e5);var n=a.getFullYear()+"-"+(a.getMonth()+1>=10?a.getMonth()+1:"0"+(a.getMonth()+1))+"-"+(a.getDate()>=10?a.getDate():"0"+a.getDate()),i=new Date;i.setTime(i.getTime());var o=i.getFullYear()+"-"+(i.getMonth()+1>=10?i.getMonth()+1:"0"+(i.getMonth()+1))+"-"+(i.getDate()>=10?i.getDate():"0"+i.getDate());e.gitTimeold=[n,o],e.findTime(),e.getClientHeight(),e.sharchInfoSelect(e.sessionid)},500)}},da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道"},on:{focus:e.focusQudao,change:e.valuequdaoChange},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号"},on:{focus:e.focusQudaonum,change:e.valuequdaonumChange},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t,n){return a("el-option-group",{key:n,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{attrs:{clearable:"",placeholder:"版本号"},model:{value:e.versions,callback:function(t){e.versions=t},expression:"versions"}},e._l(e.versionsData,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"选择小时"},model:{value:e.changHouser,callback:function(t){e.changHouser=t},expression:"changHouser"}},e._l(e.changHouserData,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-value":e.newDate,"unlink-panels":"","value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1)])],1),e._v(" "),a("div",{staticStyle:{height:"1rem"}}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"渠道"},on:{change:function(t){e.fontchangeIsShow(1)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道号"},on:{change:function(t){e.fontchangeIsShow(2)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道分类"},on:{change:function(t){e.fontchangeIsShow(3)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"负责人"},on:{change:function(t){e.fontchangeIsShow(4)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"H5"},on:{change:function(t){e.fontchangeIsShow(5)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"小时"},on:{change:function(t){e.fontchangeIsShow(6)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"版本"},on:{change:function(t){e.fontchangeIsShow(7)}}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"downsharchRight",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"},on:{click:e.downData}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData.length>0?e.fbsDataHeight:150,border:"",align:"right",size:"mini","element-loading-text":"拼命加载中..."},on:{"row-click":e.clickRow}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),e.fontCheack.time?a("el-table-column",{attrs:{prop:"date",label:"小时"}}):e._e(),e._v(" "),e.fontCheack.version?a("el-table-column",{attrs:{prop:"date",label:"版本"}}):e._e(),e._v(" "),e.fontCheack.qudao?a("el-table-column",{attrs:{prop:"channelName",label:"渠道"}}):e._e(),e._v(" "),e.fontCheack.qudaoNumber?a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}):e._e(),e._v(" "),e.fontCheack.qudaoClass?a("el-table-column",{attrs:{prop:"channelType",label:"渠道分类"}}):e._e(),e._v(" "),e.fontCheack.fuzeren?a("el-table-column",{attrs:{prop:"adminName",label:"负责人"}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"h5Click",label:"H5点击"}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"h5Register",label:"H5注册"}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"h5Register",label:"H5注册转化(%)",width:"120"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"activation",label:"激活"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activation",label:"总注册"}}),e._v(" "),a("el-table-column",{attrs:{prop:"activation",label:"注册转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"申请"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"申请转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"信息确认"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loan",label:"信息转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"credit",label:"进件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"进件转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"开户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"开户转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"提现转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"注册总转化(%)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"申请总转化(%)",width:"120"}})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]};a("vSla")(ca,da,!1,function(e){a("SvtX")},"data-v-1b1864d2",null).exports;var ua={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:"",optionsApp:1},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",chooseApp:[],versionsData:[{value:"-1",label:"全部"}],versions:"",gitTimeold:[],gitTimeNew:{},checkList:["总计","渠道信息","负责人"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],headerTitle:[],key:1,fbsDataHeight:null,tableloading:!1,fontCheack:{total:!0,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,time:!0,versions:!0},secrchSetData:{},currentPage:1,pageSizes:[50,100,300,500],dataSize:0,pagesize:50,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0,downDataInfo:{}}},watch:{checkList:function(e){this.key=this.key+1}},filters:{addSuffix:function(e){return"登录转化"==e||"传证转化"==e||"绑卡转化"==e||"信息转化"==e||"联系人转化"==e||"视频转化"==e||"进件转化"==e||"开户成功率"==e||"开户总转化"==e||"注册失败率"==e?"%":void 0}},methods:{getClientHeight:function(){var e=window.document.documentElement.clientHeight;this.fbsDataHeight=e-260},sharchInfoSelect:function(e){var t=!1,a=!1,n=this,i={sessionid:e},o=Ne()(i);nt(o).then(function(e){if(0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],o=e.data.adminIdList[a].split(",")[1];n.fuzheren.push({value:i,label:o}),n.qudaoInfo.optionsqudao=e.data.channelNameList,n.qudaoInfo.optionsqudaonum=e.data.channelNoList,t=!0}1===e.data.status&&n.$router.replace("/login")}),it(o).then(function(e){if(n.chooseApp=e.data.appList,0===e.data.status){for(var t=0;t<e.data.channelAttribute.length;t++){var i=e.data.channelAttribute[t].id,o=e.data.channelAttribute[t].name;n.qudaoshuxing.push({value:i,label:o})}n.channelType=e.data.channelType,n.channelSubdivision=e.data.channelSubdivision,a=!0}1===e.data.status&&n.$router.replace("/login")});var l=setInterval(function(){n.baobiaoSearchIndex++,t&&a?(n.Statrloading=!1,clearInterval(l),n.baobiaoSearchIndex=0,n.search()):n.baobiaoSearchIndex<2?n.sharchInfoSelect(i.sessionid):(n.$message.error("数据获取超时"),clearInterval(l),n.baobiaoSearchIndex=4,n.Statrloading=!1)},2e3)},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,n=this.channelType[t].name;this.options4.push({label:n,id:a})}for(var i=1;i<this.options4.length;i++){this.options4[i].options=[];for(var o=0;o<this.channelSubdivision.length;o++)this.options4[i].id===this.channelSubdivision[o].higherId&&this.options4[i].options.push({value:this.channelSubdivision[o].higherId+","+this.channelSubdivision[o].id,label:this.channelSubdivision[o].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=3?(1===this.iconImgIndex&&(this.iconImg="fa fa-sun-o"),2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"),3===this.iconImgIndex&&(this.iconImg=" el-icon-circle-close")):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.headerTitle=[],this.fbsData=[],this.tableloading=!0,this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channel:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",appId:this.qudaoInfo.optionsApp,adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first,tag:this.checkList};var t,a=this,n=Ne()(this.secrchSetData);(t=n,Pe.a.post(Fe+"getReportformAPP",t)).then(function(t){0===t.data.status&&(a.headerTitle=[],a.fbsData=[],a.fbsData=t.data.datas,t.data.proxyNameList.map(function(e,t){a.headerTitle.push({headerTit:e,showStatus:!0})}),t.data.listSize?(1===e.secrchSetData.dateType&&(a.dataTimeDay=parseInt(t.data.listSize),a.dataSize=a.dataTimeDay),2===e.secrchSetData.dateType&&(a.dataTimeMoth=parseInt(t.data.listSize),a.dataSize=a.dataTimeMoth),3===e.secrchSetData.dateType&&(a.dataTimeMoth=parseInt(t.data.listSize),a.dataSize=a.dataTimeMoth)):a.dataSize=a.dataSize,a.tableloading=!1,a.first=0);1===t.data.status&&a.$router.replace("/login")}).catch(function(e){a.$message.error("数据搜索失败"),a.tableloading=!1})},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""},valuequdaoChange:function(){this.qudaoInfo.valuequdao=this.qudaoInfo.valuequdao.replace(/\-/gi,"")},valuequdaonumChange:function(){this.qudaoInfo.valuequdaonum=this.qudaoInfo.valuequdaonum},fontchangeIsShow:function(e){var t=this;switch(e){case 1:this.fontCheack.total=!this.fontCheack.total;break;case 2:this.fontCheack.qudaoNumber=!this.fontCheack.qudaoNumber,this.headerTitle.map(function(e,a){"渠道"!=e.headerTit&&"渠道号"!=e.headerTit&&"渠道分类"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.qudaoNumber})});break;case 3:this.fontCheack.fuzeren=!this.fontCheack.fuzeren,this.headerTitle.map(function(e,a){"负责人"==e.headerTit&&t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.fuzeren})})}},dataTime:function(){this.gitTimeold=[]},dataTimeYMD:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<9?"0"+e.getDate():e.getDate())},clickRow:function(e,t,a){},downData:function(){this.downDataInfo=this.secrchSetData;var e,t=Ne()(this.downDataInfo);(e=t,Pe()({method:"post",url:Fe+"exportDataApp",data:e,responseType:"blob"})).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="运营流程转化统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"运营流程转化统计表.xls")})}},activated:function(){var e=this;setTimeout(function(){var t=localStorage.getItem("userperadmin");e.sessionid=JSON.parse(t).sessionid;var a=new Date;a.setTime(a.getTime()-864e5);var n=a.getFullYear()+"-"+(a.getMonth()+1>=10?a.getMonth()+1:"0"+(a.getMonth()+1))+"-"+(a.getDate()>=10?a.getDate():"0"+a.getDate()),i=new Date;i.setTime(i.getTime());var o=i.getFullYear()+"-"+(i.getMonth()+1>=10?i.getMonth()+1:"0"+(i.getMonth()+1))+"-"+(i.getDate()>=10?i.getDate():"0"+i.getDate());e.gitTimeold=[n,o],e.findTime(),e.getClientHeight(),e.sharchInfoSelect(e.sessionid)},500)}},pa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道"},on:{focus:e.focusQudao,change:e.valuequdaoChange},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号"},on:{focus:e.focusQudaonum,change:e.valuequdaonumChange},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t,n){return a("el-option-group",{key:n,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{"default-first-option":"",placeholder:"APP"},model:{value:e.qudaoInfo.optionsApp,callback:function(t){e.$set(e.qudaoInfo,"optionsApp",t)},expression:"qudaoInfo.optionsApp"}},e._l(e.chooseApp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1)])],1),e._v(" "),a("div",{staticStyle:{height:"1rem"}}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"总计"},on:{change:function(t){e.fontchangeIsShow(1)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道信息"},on:{change:function(t){e.fontchangeIsShow(2)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"负责人"},on:{change:function(t){e.fontchangeIsShow(3)}}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"downsharchRight",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"},on:{click:e.downData}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],key:e.key,staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?e.fbsDataHeight:150,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0},on:{"row-click":e.clickRow}},e._l(e.headerTitle,function(t,n){return t.showStatus?a("el-table-column",{key:t.headerTit,attrs:{prop:"date",label:t.headerTit,width:"日期"==t.headerTit?160:"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(a.row[n])+e._s(e._f("addSuffix")(t.headerTit))+"\n          ")]}}])}):e._e()})),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]};var ha=a("vSla")(ua,pa,!1,function(e){a("HHPE")},"data-v-5c1782e0",null).exports,fa={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:"",optionsApp:1},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",chooseApp:[],rewardTypeValue:"",rewardTypeList:[],versionsData:[{value:"-1",label:"全部"}],versions:"",changHouserData:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],changHouser:"",gitTimeold:[],gitTimeNew:{},checkList:["总计","渠道号","渠道分类","负责人","H5","额度","首贷","续贷","外部"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],fbsDataHeight:null,tableloading:!1,fontCheack:{total:!1,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,H5:!0,moneySize:!0,fristHaveMoney:!0,renew:!0,without:!0,time:!0,version:!0},key:1,headerTitle:[],secrchSetData:{},currentPage:1,pageSizes:[50,100,300,500],dataSize:0,pagesize:50,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0,downDataInfo:{}}},watch:{checkList:function(e){this.key=this.key+1}},filters:{addSuffix:function(e){return"H5激活转化"==e||"注册转化"==e||"进件转化"==e||"开户转化"==e||"提现转化"==e||"毛利率"==e||"优化比例"==e?"%":void 0}},methods:{getClientHeight:function(){var e=window.document.documentElement.clientHeight;this.fbsDataHeight=e-320},sharchInfoSelect:function(e){var t=!1,a=!1,n=this,i={sessionid:e},o=Ne()(i);nt(o).then(function(e){if(0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],o=e.data.adminIdList[a].split(",")[1];n.fuzheren.push({value:i,label:o}),n.qudaoInfo.optionsqudao=e.data.channelNameList,n.qudaoInfo.optionsqudaonum=e.data.channelNoList,t=!0}1===e.data.status&&n.$router.replace("/login")}),it(o).then(function(e){if(n.rewardTypeList=e.data.rewardTypeList,n.chooseApp=e.data.appList,n.qudaoInfo.optionseoFirstChannel=e.data.reportform_mainChannel,0===e.data.status){for(var t=0;t<e.data.channelAttribute.length;t++){var i=e.data.channelAttribute[t].id,o=e.data.channelAttribute[t].name;n.qudaoshuxing.push({value:i,label:o})}n.channelType=e.data.channelType,n.channelSubdivision=e.data.channelSubdivision,a=!0}1===e.data.status&&n.$router.replace("/login")});var l=setInterval(function(){n.baobiaoSearchIndex++,t&&a?(n.Statrloading=!1,clearInterval(l),n.baobiaoSearchIndex=0,n.search()):n.baobiaoSearchIndex<2?n.sharchInfoSelect(i.sessionid):(n.$message.error("数据获取超时"),clearInterval(l),n.baobiaoSearchIndex=4,n.Statrloading=!1)},2e3)},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,n=this.channelType[t].name;this.options4.push({label:n,id:a})}for(var i=1;i<this.options4.length;i++){this.options4[i].options=[];for(var o=0;o<this.channelSubdivision.length;o++)this.options4[i].id===this.channelSubdivision[o].higherId&&this.options4[i].options.push({value:this.channelSubdivision[o].higherId+","+this.channelSubdivision[o].id,label:this.channelSubdivision[o].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=3?(1===this.iconImgIndex&&(this.iconImg="fa fa-sun-o"),2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"),3===this.iconImgIndex&&(this.iconImg=" el-icon-circle-close")):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.tableloading=!0,this.checkList=["总计","渠道号","渠道分类","负责人","H5","额度","首贷","续贷","外部"],this.fbsData=[],this.headerTitle=[],this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channel:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",appId:this.qudaoInfo.optionsApp,adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",changHouser:this.changHouser,rewardTypeId:this.rewardTypeValue,minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first,mainChannel:this.qudaoInfo.firstChannelval,tag:this.checkList,seo:1};var t=this,a=Ne()(this.secrchSetData);ot(a).then(function(a){0===a.data.status&&(t.headerTitle=[],t.fbsData=[],t.fbsData=a.data.datas,t.fbsData.map(function(e,t){return isNaN(e)?e:parseFloat(e)}),a.data.proxyNameList.map(function(e,a){t.headerTitle.push({headerTit:e,showStatus:!0})}),a.data.listSize?(1===e.secrchSetData.dateType&&(t.dataTimeDay=parseInt(a.data.listSize),t.dataSize=t.dataTimeDay),2===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth),3===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth)):t.dataSize=t.dataSize,t.tableloading=!1,t.first=0);1===a.data.status&&t.$router.replace("/login")}).catch(function(e){t.$message.error("数据搜索失败"),t.tableloading=!1})},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""},valuequdaoChange:function(){this.qudaoInfo.valuequdao=this.qudaoInfo.valuequdao.replace(/\-/gi,"")},valuequdaonumChange:function(){this.qudaoInfo.valuequdaonum=this.qudaoInfo.valuequdaonum},fontchangeIsShow:function(e){var t=this;switch(e){case 1:this.fontCheack.total=!this.fontCheack.total;break;case 2:this.fontCheack.qudaoNumber=!this.fontCheack.qudaoNumber,this.headerTitle.map(function(e,a){"渠道"!=e.headerTit&&"渠道号"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.qudaoNumber})});break;case 3:this.fontCheack.qudaoClass=!this.fontCheack.qudaoClass,this.headerTitle.map(function(e,a){"渠道分类"!=e.headerTit&&"分成方式"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.qudaoClass})});break;case 4:this.fontCheack.fuzeren=!this.fontCheack.fuzeren,this.headerTitle.map(function(e,a){"负责人"==e.headerTit&&t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.fuzeren})});break;case 5:this.fontCheack.H5=!this.fontCheack.H5,this.headerTitle.map(function(e,a){"H5点击"!=e.headerTit&&"H5注册"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.H5})});break;case 6:this.fontCheack.moneySize=!this.fontCheack.moneySize,this.headerTitle.map(function(e,a){"授信总额"!=e.headerTit&&"人均批额"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.moneySize})});break;case 7:this.fontCheack.fristHaveMoney=!this.fontCheack.fristHaveMoney,this.headerTitle.map(function(e,a){"首提人数"!=e.headerTit&&"首贷金额"!=e.headerTit&&"外部首贷金额"!=e.headerTit&&"首贷笔均"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.fristHaveMoney})});break;case 8:this.fontCheack.renew=!this.fontCheack.renew,this.headerTitle.map(function(e,a){"续贷人数"!=e.headerTit&&"续放笔数"!=e.headerTit&&"续贷金额"!=e.headerTit&&"续贷笔均"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.renew})});break;case 9:this.fontCheack.without=!this.fontCheack.without,this.headerTitle.map(function(e,a){"外部注册"!=e.headerTit&&"外部进件"!=e.headerTit&&"外部开户"!=e.headerTit&&"外部首提"!=e.headerTit&&"外部渠道提现金额"!=e.headerTit||t.$set(t.headerTitle,a,{headerTit:e.headerTit,showStatus:t.fontCheack.without})})}},dataTime:function(){this.gitTimeold=[]},dataTimeYMD:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<9?"0"+e.getDate():e.getDate())},clickRow:function(e,t,a){},indexFormatter1:function(e){return this.pagesize*(this.currentPage-1)+1+e},downData:function(){this.downDataInfo=this.secrchSetData;var e=Ne()(this.downDataInfo);lt(e).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="运营seo/sem统计表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"运营seo/sem统计表.xls")})}},activated:function(){var e=localStorage.getItem("userperadmin");this.sessionid=JSON.parse(e).sessionid;var t=new Date;t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate()),n=new Date;n.setTime(n.getTime());var i=n.getFullYear()+"-"+(n.getMonth()+1>=10?n.getMonth()+1:"0"+(n.getMonth()+1))+"-"+(n.getDate()>=10?n.getDate():"0"+n.getDate());this.gitTimeold=[a,i],this.findTime(),this.getClientHeight(),this.sharchInfoSelect(this.sessionid)}},ma={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{"default-first-option":"",placeholder:"APP"},model:{value:e.qudaoInfo.optionsApp,callback:function(t){e.$set(e.qudaoInfo,"optionsApp",t)},expression:"qudaoInfo.optionsApp"}},e._l(e.chooseApp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","default-first-option":"",placeholder:"输入/选择一级渠道名称"},model:{value:e.qudaoInfo.firstChannelval,callback:function(t){e.$set(e.qudaoInfo,"firstChannelval",t)},expression:"qudaoInfo.firstChannelval"}},e._l(e.qudaoInfo.optionseoFirstChannel,function(e,t){return a("el-option",{key:t,attrs:{label:e.mainChannel,value:e.mainChannel}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道搜索"},on:{focus:e.focusQudao,change:e.valuequdaoChange},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号搜索"},on:{focus:e.focusQudaonum,change:e.valuequdaonumChange},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),a("br"),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t,n){return a("el-option-group",{key:n,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"分成方式"},model:{value:e.rewardTypeValue,callback:function(t){e.rewardTypeValue=t},expression:"rewardTypeValue"}},e._l(e.rewardTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block dataStyle"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1)])],1),e._v(" "),a("div",{staticClass:"divheight"}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"总计"},on:{change:function(t){e.fontchangeIsShow(1)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"渠道号"},on:{change:function(t){e.fontchangeIsShow(2)}}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道分类"},on:{change:function(t){e.fontchangeIsShow(3)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"负责人"},on:{change:function(t){e.fontchangeIsShow(4)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"H5"},on:{change:function(t){e.fontchangeIsShow(5)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"额度"},on:{change:function(t){e.fontchangeIsShow(6)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"首贷"},on:{change:function(t){e.fontchangeIsShow(7)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"续贷"},on:{change:function(t){e.fontchangeIsShow(8)}}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"外部"},on:{change:function(t){e.fontchangeIsShow(9)}}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"downsharchRight",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"searchStyle",attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"},on:{click:e.downData}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper tablepadding",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],key:e.key,staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?e.fbsDataHeight:150,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0},on:{"row-click":e.clickRow}},e._l(e.headerTitle,function(t,n){return t.showStatus?a("el-table-column",{key:t.headerTit,attrs:{prop:"date",label:t.headerTit,width:"日期"==t.headerTit?160:"auto",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n              "+e._s(a.row[n])+e._s(e._f("addSuffix")(t.headerTit))+"\n          ")]}}])}):e._e()})),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]};var va=a("vSla")(fa,ma,!1,function(e){a("2xw3")},"data-v-b36e5d8e",null).exports,ba={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page"},[t("router-view")],1)},staticRenderFns:[]},ga=a("vSla")({},ba,!1,null,null,null).exports,_a=function(e,t){var a=function(e,t){(function(e,t){var a,n=document.getElementById(e),i={worksheet:name||"Worksheet",table:n.innerHTML},o=document.getElementsByTagName("body")[0],l=document.createElement("a");l.href="data:application/vnd.ms-excel;base64,"+function(e){return window.btoa(unescape(encodeURIComponent(e)))}((a=i,'<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body><table>{table}</table></body></html>'.replace(/{(\w+)}/g,function(e,t){return a[t]}))),l.download=t,o.appendChild(l),l.click(),o.removeChild(l)})(e,t)};!function(e,t){if("ie"==((c=window.navigator.userAgent).indexOf("MSIE")>=0?"ie":c.indexOf("Firefox")>=0?"Firefox":c.indexOf("Chrome")>=0?"Chrome":c.indexOf("Opera")>=0?"Opera":c.indexOf("Safari")>=0?"Safari":void 0)){var n=document.getElementById(e),i=new ActiveXObject("Excel.Application"),o=i.Workbooks.Add(),l=o.Worksheets(1),s=document.body.createTextRange();s.moveToElementText(n),s.select(),s.execCommand("Copy"),l.Paste(),i.Visible=!0;try{var r=i.Application.GetSaveAsFilename("Excel.xls","Excel Spreadsheets (*.xls), *.xls")}catch(e){print("Nested catch caught "+e)}finally{o.SaveAs(r),o.Close(savechanges=!1),i.Quit(),i=null,window.setInterval("Cleanup();",1)}}else a(e,t);var c}(e,t)},ya={data:function(){return{userperadmin:"",appInfo:{list:[],selected:1},tableInfo1:{loading:!1,reInitTable:!0,columns:[{label:"整体转化率",prop:"rateOfTotal",isShow:1},{label:"分步转化率",prop:"rateOfStep",isShow:1},{label:"非当天注册",prop:"registOfOtherDay",isShow:1},{label:"合计",prop:"total",isShow:1}],columnsIndexSelected:[0,1,2,3],columnsSelected:[{label:"整体转化率",prop:"rateOfTotal",isShow:1},{label:"分步转化率",prop:"rateOfStep",isShow:1},{label:"非当天注册",prop:"registOfOtherDay",isShow:1},{label:"合计",prop:"total",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}},tableInfo2:{loading:!1,reInitTable:!0,columns:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],columnsIndexSelected:[0,1,2,3,4,5,6,7],columnsSelected:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}},tableInfo3:{loading:!1,reInitTable:!0,columns:[{label:"非当天注册",prop:"registerOfOtherDay",isShow:1},{label:"已提交",prop:"submited",isShow:1},{label:"合计",prop:"total",isShow:1}],columnsIndexSelected:[0,1,2],columnsSelected:[{label:"非当天注册",prop:"registerOfOtherDay",isShow:1},{label:"已提交",prop:"submited",isShow:1},{label:"合计",prop:"total",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}},tableInfo4:{loading:!1,reInitTable:!0,columns:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],columnsIndexSelected:[0,1,2,3,4,5,6,7],columnsSelected:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}},tableInfo5:{loading:!1,reInitTable:!0,columns:[{label:"非当天注册",prop:"registerOfOtherDay",isShow:1},{label:"已开户",prop:"submited",isShow:1},{label:"合计",prop:"total",isShow:1}],columnsIndexSelected:[0,1,2],columnsSelected:[{label:"非当天注册",prop:"registerOfOtherDay",isShow:1},{label:"已开户",prop:"submited",isShow:1},{label:"合计",prop:"total",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}},tableInfo6:{loading:!1,reInitTable:!0,columns:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],columnsIndexSelected:[0,1,2,3,4,5,6,7,8,9],columnsSelected:[{label:"1天",prop:"firstDay",isShow:1},{label:"2天",prop:"secondDay",isShow:1},{label:"3天",prop:"thirdDay",isShow:1},{label:"4天",prop:"fourthDay",isShow:1},{label:"5天",prop:"fifthDay",isShow:1},{label:"6天",prop:"sixthDay",isShow:1},{label:"7天",prop:"seventhDay",isShow:1},{label:"7+天",prop:"otherDays",isShow:1}],data:[],rangeDate:{minDate:"",maxDate:""}}}},mounted:function(){var e=this;setTimeout(function(){e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.getAppListFun();var t=new Date;e.tableInfo1.rangeDate.minDate=wt(new Date),e.tableInfo1.rangeDate.maxDate=wt(new Date),e.getTableDataFun1();var a=t.getTime()-5184e5;a=new Date(a);e.tableInfo2.rangeDate.minDate=wt(a),e.tableInfo2.rangeDate.maxDate=wt(new Date),setTimeout(function(){e.getTableDataFun2()},1e3),e.tableInfo3.rangeDate.minDate=wt(a),e.tableInfo3.rangeDate.maxDate=wt(new Date),setTimeout(function(){e.getTableDataFun3()},2e3),e.tableInfo4.rangeDate.minDate=wt(a),e.tableInfo4.rangeDate.maxDate=wt(new Date),setTimeout(function(){e.getTableDataFun4()},3e3),e.tableInfo5.rangeDate.minDate=wt(a),e.tableInfo5.rangeDate.maxDate=wt(new Date),setTimeout(function(){e.getTableDataFun5()},4e3),e.tableInfo6.rangeDate.minDate=wt(a),e.tableInfo6.rangeDate.maxDate=wt(new Date),setTimeout(function(){e.getTableDataFun6()},5e3)},300)},methods:{indexFormatter:function(e){return e+1},tableColumnsChange:function(e){e.reInitTable=!1,e.columnsSelected=[];e.columnsIndexSelected.sort(),e.columnsIndexSelected.forEach(function(t){e.columnsSelected.push(e.columns[t])}),setTimeout(function(){e.reInitTable=!0},50)},doSearch:function(e,t){var a=e.rangeDate.minDate,n=e.rangeDate.maxDate;a||(a=""),n||(n=""),""==a||""!=n?""!=a||""==n?a>n?this.toast("开始日期不能大于结束日期","error"):1===t?this.getTableDataFun1():2===t?this.getTableDataFun2():3===t?this.getTableDataFun3():4===t?this.getTableDataFun4():5===t?this.getTableDataFun5():6===t&&this.getTableDataFun6():this.toast("请选择开始日期","error"):this.toast("请选择结束日期","error")},getTableDataFun1:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo1.rangeDate.minDate,maxDate:this.tableInfo1.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo1.loading=!0,(e=a,Pe.a.post(Fe+"micro/summary",e)).then(function(e){if(t.tableInfo1.loading=!1,0==e.data.status){var a=[];e.data.data.list.forEach(function(e){var t={date:e.date,flow:"注册",registOfTheDay:e.todayRegister,rateOfTotal:(100*e.registerWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.registerStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherRegister,total:e.register};a.push(t);var n={date:"",flow:"身份认证",registOfTheDay:e.todayIdCard,rateOfTotal:(100*e.idCardWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.idCardStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherIdCard,total:e.idCard};a.push(n);var i={date:"",flow:"绑卡",registOfTheDay:e.todayDebitCard,rateOfTotal:(100*e.debitCardWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.debitCardStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherDebitCard,total:e.debitCard};a.push(i);var o={date:"",flow:"基本信息",registOfTheDay:e.todayHomeJob,rateOfTotal:(100*e.homeJobWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.homeJobStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherHomeJob,total:e.homeJob};a.push(o);var l={date:"",flow:"视频认证",registOfTheDay:e.todayVedio,rateOfTotal:(100*e.vedioWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.vedioStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherVedio,total:e.vedio};a.push(l);var s={date:"",flow:"申请开户",registOfTheDay:e.todayUpload,rateOfTotal:(100*e.uploadWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.uploadStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherUpload,total:e.upload};a.push(s);var r={date:"",flow:"开户",registOfTheDay:e.todayAccount,rateOfTotal:(100*e.accountWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.accountStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherAccount,total:e.account};a.push(r);var c={date:"",flow:"提现",registOfTheDay:e.todayLoan,rateOfTotal:(100*e.loanWholeCoversion+"").substr(0,3)+"%",rateOfStep:(100*e.loanStepCoversion+"").substr(0,3)+"%",registOfOtherDay:e.otherLoan,total:e.loan};a.push(c);var d={date:"",flow:"补件",registOfTheDay:e.todayUnAccount,rateOfTotal:(100*e.unAccountWholeCoversion+"").substr(0,3)+"%",rateOfStep:"",registOfOtherDay:e.otherUnAccount,total:e.unAccount};a.push(d)}),t.tableInfo1.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo1.loading=!1,t.toast("请求表1错误，请联系管理员","error")})},getTableDataFun2:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo2.rangeDate.minDate,maxDate:this.tableInfo2.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo2.loading=!0,(e=a,Pe.a.post(Fe+"micro/applyRetention",e)).then(function(e){if(t.tableInfo2.loading=!1,0==e.data.status){var a=[],n=e.data.data.list;n.forEach(function(e){if(0==e.type){var t={date:"",class:"当天完成身份认证",numberOfperple:e.register,firstDay:e.one,secondDay:e.two,thirdDay:e.three,fourthDay:e.four,fifthDay:e.fiv,sixthDay:e.six,seventhDay:e.seven,otherDays:e.sevenLater};a.push(t)}if(1==e.type){var n={date:e.date,class:"当天未完成身份认证",numberOfperple:e.register,firstDay:e.one,secondDay:e.two,thirdDay:e.three,fourthDay:e.four,fifthDay:e.fiv,sixthDay:e.six,seventhDay:e.seven,otherDays:e.sevenLater};a.push(n)}}),t.tableInfo2.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo2.loading=!1,t.toast("请求表2错误，请联系管理员","error")})},getTableDataFun3:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo3.rangeDate.minDate,maxDate:this.tableInfo3.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo3.loading=!0,(e=a,Pe.a.post(Fe+"micro/openDistribution",e)).then(function(e){if(t.tableInfo3.loading=!1,0===e.data.status){var a=[];e.data.data.list.forEach(function(e){var n={date:e.date,class:"申请开户",registerOfTheDay:t.formatter(e.todayApply),registerOfOtherDay:t.formatter(e.otherApply),submited:t.formatter(e.submit),total:t.formatter(e.todayApply+e.otherApply)},i={date:"",class:"开户",registerOfTheDay:t.formatter(e.todayOpen),registerOfOtherDay:t.formatter(e.otherOpen),submited:t.formatter(e.submit),total:t.formatter(e.todayOpen+e.otherOpen)};a.push(n),a.push(i)}),t.tableInfo3.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo3.loading=!1,t.toast("请求表3错误，请联系管理员","error")})},getTableDataFun4:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo4.rangeDate.minDate,maxDate:this.tableInfo4.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo4.loading=!0,(e=a,Pe.a.post(Fe+"micro/openRetention",e)).then(function(e){if(t.tableInfo4.loading=!1,0===e.data.status){var a=[];e.data.data.list.forEach(function(e){var t={date:e.date,numberOfperple:e.today,firstDay:e.one,secondDay:e.two,thirdDay:e.three,fourthDay:e.four,fifthDay:e.fiv,sixthDay:e.six,seventhDay:e.seven,otherDays:e.sevenLater};a.push(t)}),t.tableInfo4.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo4.loading=!1,t.toast("请求表4错误，请联系管理员","error")})},getTableDataFun5:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo5.rangeDate.minDate,maxDate:this.tableInfo5.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo5.loading=!0,(e=a,Pe.a.post(Fe+"micro/loanDistribution",e)).then(function(e){if(t.tableInfo5.loading=!1,0===e.data.status){var a=[];e.data.data.list.forEach(function(e){var n={date:e.date,class:"开户",registerOfTheDay:e.todayOpen,registerOfOtherDay:e.otherOpen,submited:t.formatter(e.submit),total:e.todayOpen+e.otherOpen},i={date:"",class:"提现",registerOfTheDay:e.todayLoan,registerOfOtherDay:e.otherLoan,submited:t.formatter(e.submit),total:e.todayLoan+e.otherLoan};a.push(n),a.push(i)}),t.tableInfo5.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo5.loading=!1,t.toast("请求表5错误，请联系管理员","error")})},getTableDataFun6:function(){var e,t=this,a={sessionId:this.userperadmin.sessionid,minDate:this.tableInfo6.rangeDate.minDate,maxDate:this.tableInfo6.rangeDate.maxDate,appId:this.appInfo.selected};this.tableInfo6.loading=!0,(e=a,Pe.a.post(Fe+"micro/loanRetention",e)).then(function(e){if(t.tableInfo6.loading=!1,0===e.data.status){var a=[];e.data.data.list.forEach(function(e){var t={date:e.date,numberOfperple:e.today,firstDay:e.one,secondDay:e.two,thirdDay:e.three,fourthDay:e.four,fifthDay:e.fiv,sixthDay:e.six,seventhDay:e.seven,otherDays:e.sevenLater};a.push(t)}),t.tableInfo6.data=a}else 1===e.data.status?t.$router.replace("/login"):3===e.data.status||t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo6.loading=!1,t.toast("请求表6错误，请联系管理员","error")})},getAppListFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};Le(t).then(function(t){0===t.data.status?(e.appInfo.list=t.data.appList,e.appInfo.selected=e.appInfo.list[0].id):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.toast("请求APP列表错误，请联系管理员","error")})},appChange:function(){this.tableInfo1.data=[],this.tableInfo2.data=[],this.tableInfo3.data=[],this.tableInfo4.data=[],this.tableInfo5.data=[],this.tableInfo6.data=[],this.getTableDataFun1(),this.getTableDataFun2(),this.getTableDataFun3(),this.getTableDataFun4(),this.getTableDataFun5(),this.getTableDataFun6()},downloadExcelFun:function(e,t){_a(e,t)},formatter:function(e){return e||0},toast:function(e,t){this.$message({type:t,message:e})}}},Ia={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page userAction"},[a("el-row",[a("el-col",{attrs:{xs:24,lg:10}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("整体转化")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table1","整体转化")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"minDate",t)},expression:"tableInfo1.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"maxDate",t)},expression:"tableInfo1.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo1,1)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1),e._v(" "),a("el-checkbox-group",{on:{change:function(t){e.tableColumnsChange(e.tableInfo1)}},model:{value:e.tableInfo1.columnsIndexSelected,callback:function(t){e.$set(e.tableInfo1,"columnsIndexSelected",t)},expression:"tableInfo1.columnsIndexSelected"}},e._l(e.tableInfo1.columns,function(t,n){return a("el-checkbox",{key:n,attrs:{label:n}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo1.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo1.loading,expression:"tableInfo1.loading"}],staticStyle:{width:"100%"},attrs:{id:"table1",data:e.tableInfo1.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程",width:"60","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"registOfTheDay",label:"当天注册",width:"60"}}),e._v(" "),e._l(e.tableInfo1.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",prop:e.prop,label:e.label}})})],2):e._e()],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:14}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("注册-申请留存")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table2","注册-申请留存")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"minDate",t)},expression:"tableInfo2.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"maxDate",t)},expression:"tableInfo2.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo2,2)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo2.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo2.loading,expression:"tableInfo2.loading"}],staticStyle:{width:"100%"},attrs:{id:"table2",data:e.tableInfo2.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"类别",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"numberOfperple",label:"人数"}}),e._v(" "),e._l(e.tableInfo2.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",width:"60",prop:e.prop,label:e.label}})})],2):e._e()],1)])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xs:24,lg:10}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("开户分布")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table3","开户分布")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo3.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo3.rangeDate,"minDate",t)},expression:"tableInfo3.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo3.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo3.rangeDate,"maxDate",t)},expression:"tableInfo3.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo3,3)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1),e._v(" "),a("el-checkbox-group",{on:{change:function(t){e.tableColumnsChange(e.tableInfo3)}},model:{value:e.tableInfo3.columnsIndexSelected,callback:function(t){e.$set(e.tableInfo3,"columnsIndexSelected",t)},expression:"tableInfo3.columnsIndexSelected"}},e._l(e.tableInfo3.columns,function(t,n){return a("el-checkbox",{key:n,attrs:{label:n}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo3.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo3.loading,expression:"tableInfo3.loading"}],staticStyle:{width:"100%"},attrs:{id:"table3",data:e.tableInfo3.data,size:"small",height:"322",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"registerOfTheDay",label:"当天注册"}}),e._v(" "),e._l(e.tableInfo3.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",prop:e.prop,label:e.label}})})],2):e._e()],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:14}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("申请-开户留存")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table4","申请-开户留存")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo4.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo4.rangeDate,"minDate",t)},expression:"tableInfo4.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo4.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo4.rangeDate,"maxDate",t)},expression:"tableInfo4.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo4,4)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo4.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo4.loading,expression:"tableInfo4.loading"}],staticStyle:{width:"100%"},attrs:{id:"table4",data:e.tableInfo4.data,size:"small",height:"322",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"numberOfperple",label:"人数"}}),e._v(" "),e._l(e.tableInfo4.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",width:"60",prop:e.prop,label:e.label}})})],2):e._e()],1)])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{xs:24,lg:10}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("提现分布")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table5","提现分布")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo5.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo5.rangeDate,"minDate",t)},expression:"tableInfo5.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo5.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo5.rangeDate,"maxDate",t)},expression:"tableInfo5.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo5,5)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1),e._v(" "),a("el-checkbox-group",{on:{change:function(t){e.tableColumnsChange(e.tableInfo5)}},model:{value:e.tableInfo5.columnsIndexSelected,callback:function(t){e.$set(e.tableInfo5,"columnsIndexSelected",t)},expression:"tableInfo5.columnsIndexSelected"}},e._l(e.tableInfo5.columns,function(t,n){return a("el-checkbox",{key:n,attrs:{label:n}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo5.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo5.loading,expression:"tableInfo5.loading"}],staticStyle:{width:"100%"},attrs:{id:"table5",data:e.tableInfo5.data,size:"small",height:"322",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"registerOfTheDay",label:"当天注册"}}),e._v(" "),e._l(e.tableInfo5.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",prop:e.prop,label:e.label}})})],2):e._e()],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:14}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("开户-提现留存")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table6","开户-提现留存")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo6.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo6.rangeDate,"minDate",t)},expression:"tableInfo6.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo6.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo6.rangeDate,"maxDate",t)},expression:"tableInfo6.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo6,6)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[e.tableInfo6.reInitTable?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo6.loading,expression:"tableInfo6.loading"}],staticStyle:{width:"100%"},attrs:{id:"table6",data:e.tableInfo6.data,size:"small",height:"322",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"numberOfperple",label:"人数"}}),e._v(" "),e._l(e.tableInfo6.columnsSelected,function(e){return a("el-table-column",{key:e.label,attrs:{align:"right",width:"60",prop:e.prop,label:e.label}})})],2):e._e()],1)])])],1)],1)},staticRenderFns:[]};var Ca=a("vSla")(ya,Ia,!1,function(e){a("htiv"),a("LsSL")},"data-v-93a955c4",null).exports,xa={data:function(){return{userperadmin:"",appInfo:{list:[],selected:""},channelInfo:{list:[]},tableInfo1:{loading:!1,data:[],pageName:"loginPage",channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo2:{loading:!1,data:[],pageName:"shenfenzhengPage",channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo3:{loading:!1,data:[],pageName:"jibenxingxiPage",channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo4:{loading:!1,data:[],pageName:"shipingPage",channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo5:{loading:!1,data:[],pageName:"registerPage",channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo6:{loading:!1,data:[],pageName:"yinhangkaPage",channel:"",rangeDate:{minDate:"",maxDate:""}}}},mounted:function(){var e=this;setTimeout(function(){e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.getAppListFun(),e.tableInfo1.rangeDate.minDate=zt()[0],e.tableInfo1.rangeDate.maxDate=zt()[1],e.getTableDataFun(e.tableInfo1,1),e.tableInfo5.rangeDate.minDate=zt()[0],e.tableInfo5.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo5,5)},1e3),e.tableInfo2.rangeDate.minDate=zt()[0],e.tableInfo2.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo2,2)},2e3),e.tableInfo6.rangeDate.minDate=zt()[0],e.tableInfo6.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo6,6)},3e3),e.tableInfo3.rangeDate.minDate=zt()[0],e.tableInfo3.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo3,3)},4e3),e.tableInfo4.rangeDate.minDate=zt()[0],e.tableInfo4.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo4,4)},5e3)},300)},methods:{doSearch:function(e,t){var a=e.rangeDate.minDate,n=e.rangeDate.maxDate;a||(a=""),n||(n=""),""==a||""!=n?""!=a||""==n?a>n?this.toast("开始日期不能大于结束日期","error"):this.getTableDataFun(e,t):this.toast("请选择开始日期","error"):this.toast("请选择结束日期","error")},getTableDataFun1:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1,successRen:e[a]._4,successTime:e[a]._3};t.push(n);var i={date:a,flow:"输入手机号",getNumber:e[a].shurushoujihao_6,getTime:e[a].shurushoujihao_5,successRen:e[a].shurushoujihao_8,successTime:e[a].shurushoujihao_7};t.push(i);var o={date:a,flow:"输入密码",getNumber:e[a].shurumima_6,getTime:e[a].shurumima_5,successRen:e[a].shurumima_8,successTime:e[a].shurumima_7};t.push(o);var l={date:a,flow:"密码登录",getNumber:e[a].mimadenglu_6,getTime:e[a].mimadenglu_5,successRen:e[a].mimadenglu_8,successTime:e[a].mimadenglu_7};t.push(l);var s={date:a,flow:"点击获取验证码",getNumber:e[a].huoqvyanzhengma_6,getTime:e[a].huoqvyanzhengma_5,successRen:e[a].huoqvyanzhengma_8,successTime:e[a].huoqvyanzhengma_7};t.push(s);var r={date:a,flow:"输入验证码",getNumber:e[a].shuruyanzhengma_6,getTime:e[a].shuruyanzhengma_5,successRen:e[a].shuruyanzhengma_8,successTime:e[a].shuruyanzhengma_7};t.push(r);var c={date:a,flow:"验证码登录",getNumber:e[a].yanzhengmadenglu_6,getTime:e[a].yanzhengmadenglu_5,successRen:e[a].yanzhengmadenglu_8,successTime:e[a].yanzhengmadenglu_7};t.push(c)}this.tableInfo1.data=t},getTableDataFun2:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1,successRen:e[a]._4,successTime:e[a]._3};t.push(n);var i={date:a,flow:"身份证正面",getNumber:e[a].shenfenzhengzhengmian_6,getTime:e[a].shenfenzhengzhengmian_5,successRen:e[a].shenfenzhengzhengmian_8,successTime:e[a].shenfenzhengzhengmian_7};t.push(i);var o={date:a,flow:"拍摄身份证正面",getNumber:e[a].dianjipaishezhengmian_6,getTime:e[a].dianjipaishezhengmian_5,successRen:e[a].dianjipaishezhengmian_8,successTime:e[a].dianjipaishezhengmian_7};t.push(o);var l={date:a,flow:"身份证反面",getNumber:e[a].shenfenzhengfanmian_6,getTime:e[a].shenfenzhengfanmian_5,successRen:e[a].shenfenzhengfanmian_8,successTime:e[a].shenfenzhengfanmian_7};t.push(l);var s={date:a,flow:"拍摄身份证反面",getNumber:e[a].dianjipaishefanmian_6,getTime:e[a].dianjipaishefanmian_5,successRen:e[a].dianjipaishefanmian_8,successTime:e[a].dianjipaishefanmian_7};t.push(s);var r={date:a,flow:"输入姓名",getNumber:e[a].shurumingzi_6,getTime:e[a].shurumingzi_5,successRen:e[a].shurumingzi_8,successTime:e[a].shurumingzi_7};t.push(r);var c={date:a,flow:"点击提交",getNumber:e[a].tijiao_6,getTime:e[a].tijiao_5,successRen:e[a].tijiao_8,successTime:e[a].tijiao_7};t.push(c)}this.tableInfo2.data=t},getTableDataFun3:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1,successRen:e[a]._4,successTime:e[a]._3};t.push(n);var i={date:a,flow:"选择居住城市",getNumber:e[a].xuanzejuzhuchengshi_6,getTime:e[a].xuanzejuzhuchengshi_5,successRen:e[a].xuanzejuzhuchengshi_8,successTime:e[a].xuanzejuzhuchengshi_7};t.push(i);var o={date:a,flow:"输入详细居住地址",getNumber:e[a].shurujuzhuxiangxidizhi_6,getTime:e[a].shurujuzhuxiangxidizhi_5,successRen:e[a].shurujuzhuxiangxidizhi_8,successTime:e[a].shurujuzhuxiangxidizhi_7};t.push(o);var l={date:a,flow:"输入单位名称",getNumber:e[a].shurudanweimingcheng_6,getTime:e[a].shurudanweimingcheng_5,successRen:e[a].shurudanweimingcheng_8,successTime:e[a].shurudanweimingcheng_7};t.push(l);var s={date:a,flow:"选择单位城市",getNumber:e[a].xuanzedanweichengshi_6,getTime:e[a].xuanzedanweichengshi_5,successRen:e[a].xuanzedanweichengshi_8,successTime:e[a].xuanzedanweichengshi_7};t.push(s);var r={date:a,flow:"输入单位详细地址",getNumber:e[a].shurudanweixiangxidizhi_6,getTime:e[a].shurudanweixiangxidizhi_5,successRen:e[a].shurudanweixiangxidizhi_8,successTime:e[a].shurudanweixiangxidizhi_7};t.push(r);var c={date:a,flow:"选择收入范围",getNumber:e[a].xuanzeshourufanwei_6,getTime:e[a].xuanzeshourufanwei_5,successRen:e[a].xuanzeshourufanwei_8,successTime:e[a].xuanzeshourufanwei_7};t.push(c);var d={date:a,flow:"输入单位电话区号",getNumber:e[a].shurudanweidianhuaquhao_6,getTime:e[a].shurudanweidianhuaquhao_5,successRen:e[a].shurudanweidianhuaquhao_8,successTime:e[a].shurudanweidianhuaquhao_7};t.push(d);var u={date:a,flow:"输入单位电话",getNumber:e[a].shurudanweidianhuahaoma_6,getTime:e[a].shurudanweidianhuahaoma_5,successRen:e[a].shurudanweidianhuahaoma_8,successTime:e[a].shurudanweidianhuahaoma_7};t.push(u);var p={date:a,flow:"输入分机号",getNumber:e[a].shurudanweidianhuafenjihao_6,getTime:e[a].shurudanweidianhuafenjihao_5,successRen:e[a].shurudanweidianhuafenjihao_8,successTime:e[a].shurudanweidianhuafenjihao_7};t.push(p);var h={date:a,flow:"输入家人姓名",getNumber:e[a].shurujiarenhaoma_6,getTime:e[a].shurujiarenhaoma_5,successRen:e[a].shurujiarenhaoma_8,successTime:e[a].xuanzejiarenhaoma_7};t.push(h);var f={date:a,flow:"选择家人号码",getNumber:e[a].xuanzejiarenhaoma_6,getTime:e[a].xuanzejiarenhaoma_5,successRen:e[a].xuanzejiarenhaoma_8,successTime:e[a].shurujiarenhaoma_7};t.push(f);var m={date:a,flow:"输入朋友姓名",getNumber:e[a].shurupengyouhaoma_6,getTime:e[a].shurupengyouhaoma_5,successRen:e[a].shurupengyouhaoma_8,successTime:e[a].shurupengyouhaoma_7};t.push(m);var v={date:a,flow:"选择朋友号码",getNumber:e[a].xuanzepengyouhaoma_6,getTime:e[a].xuanzepengyouhaoma_5,successRen:e[a].xuanzepengyouhaoma_8,successTime:e[a].xuanzepengyouhaoma_7};t.push(v);var b={date:a,flow:"输入同事姓名",getNumber:e[a].shurutongshihaoma_6,getTime:e[a].shurutongshihaoma_5,successRen:e[a].shurutongshihaoma_8,successTime:e[a].shurutongshihaoma_7};t.push(b);var g={date:a,flow:"选择同事号码",getNumber:e[a].xuanzetongshihaoma_6,getTime:e[a].xuanzetongshihaoma_5,successRen:e[a].xuanzetongshihaoma_8,successTime:e[a].xuanzetongshihaoma_7};t.push(g);var _={date:a,flow:"点击提交",getNumber:e[a].tijiao_6,getTime:e[a].tijiao_5,successRen:e[a].tijiao_8,successTime:e[a].tijiao_7};t.push(_)}this.tableInfo3.data=t},getTableDataFun4:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1};t.push(n);var i={date:a,flow:"拍摄",getNumber:e[a].paishe_6,getTime:e[a].paishe_5};t.push(i);var o={date:a,flow:"提交",getNumber:e[a].tijiao_6,getTime:e[a].tijiao_5};t.push(o)}this.tableInfo4.data=t},getTableDataFun5:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1,successRen:e[a]._4,successTime:e[a]._3};t.push(n);var i={date:a,flow:"输入手机号",getNumber:e[a].shurushoujihao_6,getTime:e[a].shurushoujihao_5,successRen:e[a].shurushoujihao_8,successTime:e[a].shurushoujihao_7};t.push(i);var o={date:a,flow:"点击密码可见",getNumber:e[a].cakangmima_6,getTime:e[a].cakangmima_5,successRen:e[a].cakangmima_8,successTime:e[a].cakangmima_7};t.push(o);var l={date:a,flow:"输入设置密码",getNumber:e[a].shurumima_6,getTime:e[a].shurumima_5,successRen:e[a].shurumima_8,successTime:e[a].shurumima_7};t.push(l);var s={date:a,flow:"点击获取验证码",getNumber:e[a].huoqvyanzhengma_6,getTime:e[a].huoqvyanzhengma_5,successRen:e[a].huoqvyanzhengma_8,successTime:e[a].huoqvyanzhengma_7};t.push(s);var r={date:a,flow:"输入验证码",getNumber:e[a].shuruyanzhengma_6,getTime:e[a].shuruyanzhengma_5,successRen:e[a].shuruyanzhengma_8,successTime:e[a].shuruyanzhengma_7};t.push(r);var c={date:a,flow:"点击注册",getNumber:e[a].zhuce_6,getTime:e[a].zhuce_5,successRen:e[a].zhuce_8,successTime:e[a].zhuce_7};t.push(c)}this.tableInfo5.data=t},getTableDataFun6:function(e){var t=[];for(var a in e){var n={date:a,flow:"进入",getNumber:e[a]._2,getTime:e[a]._1,successRen:e[a]._4,successTime:e[a]._3};t.push(n);var i={date:a,flow:"输入银行卡号",getNumber:e[a].shuruyinhangkahao_6,getTime:e[a].shuruyinhangkahao_5,successRen:e[a].shuruyinhangkahao_8,successTime:e[a].shuruyinhangkahao_7};t.push(i);var o={date:a,flow:"选择开户银行",getNumber:e[a].xuanzekaihuyinhang_6,getTime:e[a].xuanzekaihuyinhang_5,successRen:e[a].xuanzekaihuyinhang_8,successTime:e[a].xuanzekaihuyinhang_7};t.push(o);var l={date:a,flow:"选择开户城市",getNumber:e[a].xuanzekaihuchengshi_6,getTime:e[a].xuanzekaihuchengshi_5,successRen:e[a].xuanzekaihuchengshi_8,successTime:e[a].xuanzekaihuchengshi_7};t.push(l);var s={date:a,flow:"点击获取验证码",getNumber:e[a].huoqvyanzhengma_6,getTime:e[a].huoqvyanzhengma_5,successRen:e[a].huoqvyanzhengma_8,successTime:e[a].huoqvyanzhengma_7};t.push(s);var r={date:a,flow:"输入验证码",getNumber:e[a].shuruyanzhengma_6,getTime:e[a].shuruyanzhengma_5,successRen:e[a].shuruyanzhengma_8,successTime:e[a].shuruyanzhengma_7};t.push(r);var c={date:a,flow:"输入信用卡号",getNumber:e[a].shuruxinyongkahao_6,getTime:e[a].shuruxinyongkahao_5,successRen:e[a].shuruxinyongkahao_8,successTime:e[a].shuruxinyongkahao_7};t.push(c);var d={date:a,flow:"点击提交",getNumber:e[a].tijiao_6,getTime:e[a].tijiao_5,successRen:e[a].tijiao_8,successTime:e[a].tijiao_7};t.push(d)}this.tableInfo6.data=t},getTableDataFun:function(e,t){var a=this;e.data=[],e.loading=!0;var n,i={sessionid:this.userperadmin.sessionid,minDate:e.rangeDate.minDate,maxDate:e.rangeDate.maxDate,page_name:e.pageName,channel:e.channel,appId:this.appInfo.selected};(n=i,Pe.a.post(Fe+"micro/actionRetention",n)).then(function(n){0===n.data.status?(1===t?a.getTableDataFun1(n.data.actionList):2===t?a.getTableDataFun2(n.data.actionList):3===t?a.getTableDataFun3(n.data.actionList):4===t?a.getTableDataFun4(n.data.actionList):5===t?a.getTableDataFun5(n.data.actionList):6===t&&a.getTableDataFun6(n.data.actionList),e.loading=!1):1===n.data.status?a.$router.replace("/login"):a.toast(n.data.statusMsg,"error")})},getAppListFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};Le(t).then(function(t){0===t.data.status?(e.appInfo.list=t.data.appList,e.appInfo.selected=e.appInfo.list[0].id):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.toast("请求APP列表错误，请联系管理员","error")})},appChange:function(){this.tableInfo1.data=[],this.tableInfo2.data=[],this.tableInfo3.data=[],this.tableInfo4.data=[],this.tableInfo5.data=[],this.tableInfo6.data=[],this.getTableDataFun(this.tableInfo1,1),this.getTableDataFun(this.tableInfo2,2),this.getTableDataFun(this.tableInfo3,3),this.getTableDataFun(this.tableInfo4,4),this.getTableDataFun(this.tableInfo5,5),this.getTableDataFun(this.tableInfo6,6)},downloadExcelFun:function(e,t){_a(e,t)},formatter:function(e){return e||0},toast:function(e,t){this.$message({type:t,message:e})}}},Da={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page userAction"},[a("el-row",[a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("登录页")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table1","登录页")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"minDate",t)},expression:"tableInfo1.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"maxDate",t)},expression:"tableInfo1.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo1,1)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo1.loading,expression:"tableInfo1.loading"}],staticStyle:{width:"100%"},attrs:{id:"table1",data:e.tableInfo1.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"登录成功",align:"center"}},[a("el-table-column",{attrs:{align:"right",prop:"successRen",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"successTime",label:"次数"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("注册页")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table5","注册页")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo5.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo5.rangeDate,"minDate",t)},expression:"tableInfo5.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo5.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo5.rangeDate,"maxDate",t)},expression:"tableInfo5.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo5,5)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo5.loading,expression:"tableInfo5.loading"}],staticStyle:{width:"100%"},attrs:{id:"table5",data:e.tableInfo5.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"注册成功",align:"center"}},[a("el-table-column",{attrs:{align:"right",prop:"successRen",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"successTime",label:"次数"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("身份认证")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table2","身份认证")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"minDate",t)},expression:"tableInfo2.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"maxDate",t)},expression:"tableInfo2.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo2,2)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo2.loading,expression:"tableInfo2.loading"}],staticStyle:{width:"100%"},attrs:{id:"table2",data:e.tableInfo2.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"认证成功",align:"center"}},[a("el-table-column",{attrs:{align:"right",prop:"successRen",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"successTime",label:"次数"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("绑卡")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table6","绑卡")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo6.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo6.rangeDate,"minDate",t)},expression:"tableInfo6.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo6.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo6.rangeDate,"maxDate",t)},expression:"tableInfo6.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo6,6)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo6.loading,expression:"tableInfo6.loading"}],staticStyle:{width:"100%"},attrs:{id:"table6",data:e.tableInfo6.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"绑卡成功",align:"center"}},[a("el-table-column",{attrs:{align:"right",prop:"successRen",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"successTime",label:"次数"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table3","基本信息")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo3.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo3.rangeDate,"minDate",t)},expression:"tableInfo3.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo3.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo3.rangeDate,"maxDate",t)},expression:"tableInfo3.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo3,3)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo3.loading,expression:"tableInfo3.loading"}],staticStyle:{width:"100%"},attrs:{id:"table3",data:e.tableInfo3.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1),e._v(" "),a("el-table-column",{attrs:{label:"填写成功",align:"center"}},[a("el-table-column",{attrs:{align:"right",prop:"successRen",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"successTime",label:"次数"}})],1)],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("视频认证")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table4","视频认证")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},on:{change:e.appChange},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo4.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo4.rangeDate,"minDate",t)},expression:"tableInfo4.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo4.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo4.rangeDate,"maxDate",t)},expression:"tableInfo4.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo4,4)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo4.loading,expression:"tableInfo4.loading"}],staticStyle:{width:"100%"},attrs:{id:"table4",data:e.tableInfo4.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return["进入"==t.row.flow?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"flow",label:"流程","class-name":"myClass"}}),e._v(" "),a("el-table-column",{attrs:{label:"整体",align:"center"}},[a("el-table-column",{attrs:{align:"center",prop:"getNumber",label:"人数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"次数"}})],1)],1)],1)])])],1)],1)},staticRenderFns:[]};var wa=a("vSla")(xa,Da,!1,function(e){a("kPzD"),a("Ifxe")},"data-v-68ec165a",null).exports,Sa={data:function(){return{userperadmin:"",appInfo:{list:[]},tableInfo1:{loading:!1,selected:1,data:[],channel:"",rangeDate:{minDate:"",maxDate:""}},tableInfo2:{loading:!1,selected:1,data:[],channel:"",rangeDate:{minDate:"",maxDate:""}}}},mounted:function(){var e=this;setTimeout(function(){e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.getAppListFun(),e.tableInfo1.rangeDate.minDate=zt()[0],e.tableInfo1.rangeDate.maxDate=zt()[1],e.getTableDataFun(e.tableInfo1,1),e.tableInfo2.rangeDate.minDate=zt()[0],e.tableInfo2.rangeDate.maxDate=zt()[1],setTimeout(function(){e.getTableDataFun(e.tableInfo2,2)},1e3)},300)},methods:{doSearch:function(e,t){var a=e.rangeDate.minDate,n=e.rangeDate.maxDate;a||(a=""),n||(n=""),""==a||""!=n?""!=a||""==n?a>n?this.toast("开始日期不能大于结束日期","error"):this.getTableDataFun(e,t):this.toast("请选择开始日期","error"):this.toast("请选择结束日期","error")},getTableDataFun:function(e,t){e.data=[],e.loading=!0;var a=null,n={sessionid:this.userperadmin.sessionid,minDate:e.rangeDate.minDate,maxDate:e.rangeDate.maxDate,appId:e.selected};switch(t){case 1:a=rt;break;case 2:a=ct}var i=this;a(n).then(function(a){0===a.data.status&&(1===t?i.verificationCode(a.data.actionYamList):2===t&&i.pageDetentionTime(a.data.actionYamList),e.loading=!1),1===a.data.status&&i.$router.replace("/login")})},verificationCode:function(e){e&&(e.map(function(e){return"loginPage"==e.page_name?e.page_name="登录页":"registerPage"==e.page_name?e.page_name="注册页":"yinhangkaPage"==e.page_name?e.page_name="绑卡":void 0}),this.tableInfo1.data=e)},pageDetentionTime:function(e){if(e){e.map(function(e){if("loginPage"==e.page_name){if("0"==e.type)return e.page_name="登录页";if("1"==e.type)return e.page_name="登录成功"}else if("registerPage"==e.page_name){if("0"==e.type)return e.page_name="注册页";if("1"==e.type)return e.page_name="注册成功"}else if("shenfenzhengPage"==e.page_name){if("0"==e.type)return e.page_name="身份认证";if("1"==e.type)return e.page_name="身份认证提交"}else if("yinhangkaPage"==e.page_name){if("0"==e.type)return e.page_name="绑卡";if("1"==e.type)return e.page_name="绑卡提交"}else if("jibenxingxiPage"==e.page_name){if("0"==e.type)return e.page_name="基本信息";if("1"==e.type)return e.page_name="基本信息提交"}else if("shipingPage"==e.page_name){if("0"==e.type)return e.page_name="视频认证";if("1"==e.type)return e.page_name="视频认证提交"}}),this.tableInfo2.data=e}},getAppListFun:function(){var e={sessionid:this.userperadmin.sessionid},t=this;Le(e).then(function(e){0===e.data.status?t.appInfo.list=e.data.appList:1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("请求APP列表错误，请联系管理员","error")})},toast:function(e,t){this.$message({type:t,message:e})},downloadExcelFun:function(e,t){_a(e,t)}}},ka={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page userAction"},[a("el-row",[a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("验证码")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table1","验证码")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},model:{value:e.tableInfo1.selected,callback:function(t){e.$set(e.tableInfo1,"selected",t)},expression:"tableInfo1.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"minDate",t)},expression:"tableInfo1.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"maxDate",t)},expression:"tableInfo1.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo1,1)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo1.loading,expression:"tableInfo1.loading"}],staticStyle:{width:"100%"},attrs:{id:"table1",data:e.tableInfo1.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["登录页"==t.row.page_name?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"page_name",label:"页面","class-name":"myClass",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"getTime",label:"获取"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"notGet",label:"未获取"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"times",label:"平均时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.times)+"s")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time10",label:"0~10s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time20",label:"11~20s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time30",label:"21~30s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"timeOther",label:"30s↑"}})],1)],1)])]),e._v(" "),a("el-col",{attrs:{xs:24,lg:12}},[a("div",{staticClass:"table-wrapper marginR"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("页面停留")]),e._v(" "),a("span",{staticClass:"btn",on:{click:function(t){e.downloadExcelFun("table2","页面停留")}}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},model:{value:e.tableInfo2.selected,callback:function(t){e.$set(e.tableInfo2,"selected",t)},expression:"tableInfo2.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"minDate",t)},expression:"tableInfo2.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo2.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo2.rangeDate,"maxDate",t)},expression:"tableInfo2.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo2,2)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo2.loading,expression:"tableInfo2.loading"}],staticStyle:{width:"100%"},attrs:{id:"table2",data:e.tableInfo2.data,size:"small",height:"342",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["登录页"==t.row.page_name?a("span",[e._v(e._s(t.row.date))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"page_name",label:"页面",width:"120","class-name":"myClass",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"times",label:"平均时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.times)+"s")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time30",label:"0~30s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time60",label:"31~60s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"time120",label:"61~120s"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"timeOther",label:"120s↑"}})],1)],1)])])],1)],1)},staticRenderFns:[]};var Ta=a("vSla")(Sa,ka,!1,function(e){a("81/5"),a("V/iC")},"data-v-44f39845",null).exports,Na={data:function(){return{userperadmin:"",clientHeight:"500",appInfo:{list:[]},versionsOp:{list:[]},androidSystemop:{list:[]},pageName:{list:[]},tableInfo1:{loading:!1,selected:null,versions:"",androidSystem:"",page:"",data:[],rangeDate:{minDate:"",maxDate:""}},currentPage:1,pageSizes:[100,300,500,1e3],dataSize:0,pagesize:100}},mounted:function(){var e=this;setTimeout(function(){e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.screenclientHeight(),e.getAppListFun(),e.tableInfo1.rangeDate.minDate=Tt()[0],e.tableInfo1.rangeDate.maxDate=Nt()[1],e.getTableDataFun(e.tableInfo1,1)},300)},methods:{screenclientHeight:function(){var e=document.documentElement.clientHeight;this.clientHeight=e-300},doSearch:function(e,t){var a=e.rangeDate.minDate,n=e.rangeDate.maxDate;a||(a=""),n||(n=""),""==a||""!=n?""!=a||""==n?a>n?this.toast("开始日期不能大于结束日期","error"):this.getTableDataFun(e,t):this.toast("请选择开始日期","error"):this.toast("请选择结束日期","error")},getTableDataFun:function(e,t){e.data=[],e.loading=!0;var a,n={sessionid:this.userperadmin.sessionid,minDate:e.rangeDate.minDate,maxDate:e.rangeDate.maxDate,appId:e.selected,platform:e.androidSystem,app_version_name:e.versions,page_name:e.page,pageId:this.currentPage-1,pageSize:this.pagesize},i=this;(a=n,Pe.a.post(Fe+"micro/actionErrorPage",a)).then(function(t){if(0===t.data.status){for(var a=0;a<t.data.actionYamList.length;a++)"registerPage"==t.data.actionYamList[a].page_name?t.data.actionYamList[a].page_name="注册页面":"shenfenzhengPage"==t.data.actionYamList[a].page_name?t.data.actionYamList[a].page_name="身份证页面":"loginPage"==t.data.actionYamList[a].page_name?t.data.actionYamList[a].page_name="登录页面":"huizongPage"==t.data.actionYamList[a].page_name?t.data.actionYamList[a].page_name="汇总页面":"jibenxingxiPage"==t.data.actionYamList[a].page_name?t.data.actionYamList[a].page_name="基本信息页面":"yinhangkaPage"==t.data.actionYamList[a].page_name&&(t.data.actionYamList[a].page_name="银行卡页面");i.tableInfo1.data=t.data.actionYamList,i.dataSize=parseInt(t.data.listSize),e.loading=!1}1===t.data.status&&i.$router.replace("/login")})},pageSizeChange:function(e){this.pagesize=e,this.getTableDataFun(this.tableInfo1,1)},currentPageChange:function(e){this.currentPage=e,this.getTableDataFun(this.tableInfo1,1)},getAppListFun:function(){var e,t={sessionid:this.userperadmin.sessionid},a=this;(e=t,Pe.a.post(Fe+"micro/actionErrorPageSearch",e)).then(function(e){0===e.data.status?(a.appInfo.list=e.data.appList,a.pageName.list=e.data.basicPage.actionMap,a.versionsOp.list=e.data.basicPage.appVersionName,a.androidSystemop.list=e.data.basicPage.platform,a.tableInfo1.selected=1):1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){a.toast("请求APP列表错误，请联系管理员","error")})},indexFormatter1:function(e){return this.pagesize*(this.currentPage-1)+1+e},toast:function(e,t){this.$message({type:t,message:e})},downloadExcelFun:function(){var e,t={sessionid:this.userperadmin.sessionid,minDate:this.tableInfo1.rangeDate.minDate,maxDate:this.tableInfo1.rangeDate.maxDate,appId:this.tableInfo1.selected,platform:this.tableInfo1.androidSystem,app_version_name:this.tableInfo1.versions,page_name:this.tableInfo1.page};(e=t,Pe()({method:"post",url:Fe+"micro/exportErrorPage",data:e,responseType:"blob"})).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="返回分析报表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"返回分析报表.xls")})}}},za={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page userAction"},[a("el-row",[a("el-col",{attrs:{xs:24,lg:24}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("返回分析")]),e._v(" "),a("span",{staticClass:"btn",on:{click:e.downloadExcelFun}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action clearfix"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",filterable:"","default-first-option":"",placeholder:"选择产品"},model:{value:e.tableInfo1.selected,callback:function(t){e.$set(e.tableInfo1,"selected",t)},expression:"tableInfo1.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"marginLeft",attrs:{size:"mini",filterable:"",clearable:"","default-first-option":"",placeholder:"选择版本"},model:{value:e.tableInfo1.versions,callback:function(t){e.$set(e.tableInfo1,"versions",t)},expression:"tableInfo1.versions"}},e._l(e.versionsOp.list,function(e,t,n){return a("el-option",{key:n,attrs:{label:e.app_version_name,value:e.app_version_name}})})),e._v(" "),a("el-select",{staticClass:"marginLeft",attrs:{size:"mini",filterable:"",clearable:"","default-first-option":"",placeholder:"选择系统"},model:{value:e.tableInfo1.androidSystem,callback:function(t){e.$set(e.tableInfo1,"androidSystem",t)},expression:"tableInfo1.androidSystem"}},e._l(e.androidSystemop.list,function(e,t,n){return a("el-option",{key:n,attrs:{label:e.platform,value:e.platform}})})),e._v(" "),a("el-select",{staticClass:"marginLeft",attrs:{size:"mini",filterable:"",clearable:"","default-first-option":"",placeholder:"选择页面"},model:{value:e.tableInfo1.page,callback:function(t){e.$set(e.tableInfo1,"page",t)},expression:"tableInfo1.page"}},e._l(e.pageName.list,function(e,t,n){return a("el-option",{key:n,attrs:{label:t,value:e}})})),e._v(" "),a("span",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"minDate",t)},expression:"tableInfo1.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"maxDate",t)},expression:"tableInfo1.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo1,1)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo1.loading,expression:"tableInfo1.loading"}],staticStyle:{width:"100%"},attrs:{id:"table1",data:e.tableInfo1.data,size:"small",height:e.clientHeight,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexFormatter1,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"page_name",label:"页面"}}),e._v(" "),a("el-table-column",{attrs:{prop:"error",label:"错误类型","class-name":"myClass",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"app_version_name",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"model",label:"机型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"platform",label:"系统"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"cou",label:"合计"}})],1),e._v(" "),a("br"),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])])],1)],1)},staticRenderFns:[]};var Pa=a("vSla")(Na,za,!1,function(e){a("TYaI"),a("07B9")},"data-v-484ad164",null).exports,Fa={data:function(){return{userperadmin:"",clientHeight:"500",appInfo:{list:[]},opOrareatypes:{list:[{name:"机型",id:"1"},{name:"地区",id:"2"},{name:"供应商",id:"3"}]},iphoneOropOrareatypes:{list:[]},getJsonData:[],tableInfo1:{loading:!1,selected:"",type:"",iphoneopareatype:"",data:[],rangeDate:{minDate:"",maxDate:""}},currentPage:1,pageSizes:[100,300,500,1e3],dataSize:0,pagesize:100}},mounted:function(){var e=this;setTimeout(function(){e.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),e.screenclientHeight(),e.getAppListFun(),e.tableInfo1.rangeDate.minDate=Tt()[0],e.tableInfo1.rangeDate.maxDate=Nt()[1]},300)},methods:{screenclientHeight:function(){var e=document.documentElement.clientHeight;this.clientHeight=e-280},doSearch:function(e,t){var a=e.rangeDate.minDate,n=e.rangeDate.maxDate;a||(a=""),n||(n=""),""==a||""!=n?""!=a||""==n?a>n?this.toast("开始日期不能大于结束日期","error"):this.getTableDataFun(e,t):this.toast("请选择开始日期","error"):this.toast("请选择结束日期","error")},getTableDataFun:function(e,t){e.data=[],e.loading=!0;var a,n={sessionid:this.userperadmin.sessionid,minDate:e.rangeDate.minDate,maxDate:e.rangeDate.maxDate,appId:e.selected,pageId:this.currentPage-1,pageSize:this.pagesize,name:e.iphoneopareatype?e.iphoneopareatype.split(",")[0]:"",type:e.type},i=this;(a=n,Pe.a.post(Fe+"micro/actionUser",a)).then(function(t){0===t.data.status&&(i.tableInfo1.data=t.data.basicPage.list,i.dataSize=t.data.basicPage.totalRecords,e.loading=!1),1===t.data.status&&i.$router.replace("/login")})},pageSizeChange:function(e){this.pagesize=e,this.getTableDataFun(this.tableInfo1,1)},currentPageChange:function(e){this.currentPage=e,this.getTableDataFun(this.tableInfo1,1)},getAppListFun:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid},n=this;(e=a,Pe.a.post(Fe+"micro/actionUserParam",e)).then(function(e){if(0===e.data.status){for(var a in e.data.basicPage.appid){var i=a,o=e.data.basicPage.appid[i];n.appInfo.list.push({name:i,id:o})}n.getJsonData=e.data.basicPage.list,n.tableInfo1.selected="1",n.getTableDataFun(t.tableInfo1,1),n.tableInfo1.type="2",n.changeList("2")}1===e.data.status&&n.$router.replace("/login")})},indexFormatter1:function(e){return this.pagesize*(this.currentPage-1)+1+e},toast:function(e,t){this.$message({type:t,message:e})},changeList:function(e){this.iphoneOropOrareatypes.list=[],this.tableInfo1.iphoneopareatype="";for(var t=0;t<this.getJsonData.length;t++)this.getJsonData[t].type==e&&this.iphoneOropOrareatypes.list.push({appid:this.getJsonData[t].appid,name:this.getJsonData[t].name,type:this.getJsonData[t].type})},downloadExcelFun:function(){var e,t={sessionid:this.userperadmin.sessionid,minDate:this.tableInfo1.rangeDate.minDate,maxDate:this.tableInfo1.rangeDate.maxDate,appId:this.tableInfo1.selected,name:this.tableInfo1.iphoneopareatype?this.tableInfo1.iphoneopareatype.split(",")[0]:"",type:this.tableInfo1.type};(e=t,Pe()({method:"post",url:Fe+"micro/exportUserAction",data:e,responseType:"blob"})).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var n=document.createElement("a");n.download="用户分析报表.xls",n.style.display="none",n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}else navigator.msSaveBlob(a,"用户分析报表.xls")})}}},La={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page userAction"},[a("el-row",[a("el-col",{attrs:{xs:24,lg:24}},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-header"},[a("span",{staticClass:"title"},[e._v("用户分析")]),e._v(" "),a("span",{staticClass:"btn",on:{click:e.downloadExcelFun}},[a("i",{staticClass:"fa fa-download"})])]),e._v(" "),a("div",{staticClass:"table-action clearfix"},[a("div",{staticClass:"toolbar"},[a("el-select",{attrs:{size:"mini",placeholder:"选择产品"},model:{value:e.tableInfo1.selected,callback:function(t){e.$set(e.tableInfo1,"selected",t)},expression:"tableInfo1.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"marginLeft",attrs:{size:"mini",placeholder:"选择类型"},on:{change:function(t){e.changeList(e.tableInfo1.type)}},model:{value:e.tableInfo1.type,callback:function(t){e.$set(e.tableInfo1,"type",t)},expression:"tableInfo1.type"}},e._l(e.opOrareatypes.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"marginLeft",attrs:{size:"mini",filterable:"",clearable:"","default-first-option":"",placeholder:"类别信息搜索"},model:{value:e.tableInfo1.iphoneopareatype,callback:function(t){e.$set(e.tableInfo1,"iphoneopareatype",t)},expression:"tableInfo1.iphoneopareatype"}},e._l(e.iphoneOropOrareatypes.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name+","+e.type}})})),e._v(" "),a("span",{staticClass:"myRangeMonth marginLeft"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.minDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"minDate",t)},expression:"tableInfo1.rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.tableInfo1.rangeDate.maxDate,callback:function(t){e.$set(e.tableInfo1.rangeDate,"maxDate",t)},expression:"tableInfo1.rangeDate.maxDate"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.doSearch(e.tableInfo1,1)}}},[a("i",{staticClass:"fa fa-search"})])],1)],1)]),e._v(" "),a("div",{staticClass:"table-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo1.loading,expression:"tableInfo1.loading"}],staticStyle:{width:"100%"},attrs:{id:"table1",data:e.tableInfo1.data,size:"small",height:e.tableInfo1.data.length>0?e.clientHeight:100,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",index:e.indexFormatter1,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cou",label:"新注册","class-name":"myClass",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"类别"}})],1),e._v(" "),a("br"),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])])],1)],1)},staticRenderFns:[]};var $a=a("vSla")(Fa,La,!1,function(e){a("k+SJ"),a("RPlT")},"data-v-565b2f8d",null).exports,Aa={data:function(){return{userperadmin:"",Statrloading:!0,activeNameData:"",activeNameTrans:"",dataInfoMenuVisible:!1,dataInfoTableVisible:!1,liuchenMenuVisible:!1,liuchenTableVisible:!1,Detail:[],Trans:[],AppName:[],addInfoData:"",channelType:[],payList:[],data2:[],valueData:[],dataInfoDataOld:[],liuchengDataOld:[]}},activated:function(){var e=this;this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),setTimeout(function(){e.getNeedInfo(e.userperadmin)},500)},methods:{getNeedInfo:function(e){this.Statrloading=!0,this.Detail=[],this.Trans=[],this.AppName=[],this.channelType=[],this.payList=[],this.dataInfoDataOld=[],this.liuchengDataOld=[];var t,a={sessionid:e.sessionid,system:1},n=this;(t=a,Pe.a.post(Fe+"getTableColumns",t)).then(function(e){if(0===e.data.status){e.data.appList.map(function(t,a){n.AppName.push({label:e.data.appList[a].name,value:e.data.appList[a].id})}),e.data.channelType.map(function(t,a){n.channelType.push(e.data.channelType[a].name)}),e.data.payList.map(function(t,a){n.payList.push(e.data.payList[a].name)}),e.data.channelType.map(function(t,a){n.dataInfoDataOld.push(e.data.channelType[a].name)}),e.data.payList.map(function(t,a){n.liuchengDataOld.push(e.data.payList[a].name)}),n.Detail=e.data.reportforms_admin;for(var t=0;t<n.Detail.length;t++)n.Detail[t].columns=n.Detail[t].columns.split(","),n.Detail[t].columns.length>0&&""==n.Detail[t].columns[0]&&(n.Detail[t].columns=[]);n.Trans=e.data.reportforms_operate;for(t=0;t<n.Trans.length;t++)n.Trans[t].columns=n.Trans[t].columns.split(","),n.Trans[t].columns.length>0&&""==n.Trans[t].columns[0]&&(n.Trans[t].columns=[]);setTimeout(function(){n.comment(n.Detail,n.Trans)},1e3),n.Statrloading=!1}1===e.data.status&&n.$router.replace("/login")})},comment:function(e,t){var a=[];e.forEach(function(e,t){a.push(e.onlyType)}),t.forEach(function(e,t){a.push(e.onlyType)});var n=[];a.map(function(e,t){e=document.getElementById(e),n.push(e)});var i=this;n.map(function(e,t){Sortable.create(e,{group:"words",animation:150,onAdd:function(e){},onUpdate:function(e){},onRemove:function(e){},onStart:function(e){},onSort:function(e){},onEnd:function(e){var t=e.from.innerText.split("\n").slice(0,-1),a={sessionid:i.userperadmin.sessionid,onlyType:e.from.id,columns:t,system:1};st(a).then(function(e){0===e.data.status&&i.$message({message:"保存配置成功",type:"success"}),1===e.data.status&&i.$router.replace("/login")})}})})},clickDataInfoMenu:function(e){1==e?(this.data2=this.generateData2(this.channelType),this.dataInfoMenuVisible=!0):2==e&&(this.data2=this.generateData2(this.payList),this.liuchenMenuVisible=!0)},modification:function(e,t){e.name?(this.addInfoData=e.name,this.valueData=e.columns):(this.addInfoData="",this.valueData=[]),1===t?this.dataInfoTableVisible=!0:2===t&&(this.liuchenTableVisible=!0)},addDataInfo:function(e){1==e&&(this.valueData=[],this.addInfoData="",this.data2=this.generateData2(this.dataInfoDataOld),this.dataInfoTableVisible=!0),2==e&&(this.valueData=[],this.addInfoData="",this.data2=this.generateData2(this.liuchengDataOld),this.liuchenTableVisible=!0)},handleChange:function(e,t,a){},generateData2:function(e){var t=[];return e.forEach(function(e,a){t.push({label:e,key:e})}),t},saveTableName:function(e){var t=null;if(1===e?t=22:2===e&&(t=21),this.addInfoData){var a={sessionid:this.userperadmin.sessionid,appName:this.addInfoData,type:t,columns:this.valueData,system:1},n=this;st(a).then(function(e){0===e.data.status&&(n.$message({message:"保存配置成功",type:"success"}),n.dataInfoMenuVisible=!1,n.dataInfoTableVisible=!1,n.liuchenMenuVisible=!1,n.liuchenTableVisible=!1,n.getNeedInfo(n.userperadmin)),1===e.data.status&&n.$router.replace("/login")})}else this.$message.error("选择需要配置的产品")}}},qa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"config",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:10,lg:10}},[a("div",{staticClass:"dataInfo"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{sm:12,md:10,lg:8,xl:5}},[a("p",{staticClass:"titleDataInfo"},[e._v("数据详情表")])]),e._v(" "),a("el-col",{attrs:{sm:8,md:10,lg:12,xl:15}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{sm:4,md:2,lg:2,xl:2}},[a("p",{staticClass:"addDataInfo"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-menu",circle:"",size:"small"},on:{click:function(t){e.clickDataInfoMenu(1)}}})],1)])],1),e._v(" "),a("div",e._l(e.Detail,function(t,n){return a("el-collapse",{key:n,attrs:{accordion:""},model:{value:e.activeNameData,callback:function(t){e.activeNameData=t},expression:"activeNameData"}},[a("el-collapse-item",{attrs:{title:t.name,name:n}},[a("ul",{staticClass:"touchStyle",attrs:{id:t.onlyType}},e._l(t.columns,function(t,n){return a("li",{key:n},[e._v(e._s(t))])}))])],1)}))],1)]),e._v(" "),a("el-col",{attrs:{md:1,lg:1}},[a("div",[e._v(" ")])]),e._v(" "),a("el-col",{attrs:{md:10,lg:10}},[a("div",{staticClass:"dataInfo"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{sm:12,md:10,lg:8,xl:5}},[a("p",{staticClass:"titleDataInfo"},[e._v("流程转化表")])]),e._v(" "),a("el-col",{attrs:{sm:8,md:10,lg:12,xl:15}},[e._v(" ")]),e._v(" "),a("el-col",{attrs:{sm:4,md:2,lg:2,xl:2}},[a("p",{staticClass:"addDataInfo"},[a("el-button",{attrs:{type:"success",icon:"el-icon-menu",circle:"",size:"small"},on:{click:function(t){e.clickDataInfoMenu(2)}}})],1)])],1),e._v(" "),e._l(e.Trans,function(t,n){return a("el-collapse",{key:n,attrs:{accordion:""},model:{value:e.activeNameTrans,callback:function(t){e.activeNameTrans=t},expression:"activeNameTrans"}},[a("el-collapse-item",{attrs:{title:t.name,name:n}},[a("ul",{staticClass:"touchStyle",attrs:{id:t.onlyType}},e._l(t.columns,function(t,n){return a("li",{key:n},[e._v(e._s(t))])}))])],1)})],2)])],1),e._v(" "),a("div",{staticClass:"menuDataInfo"},[a("el-dialog",{attrs:{title:"增加/修改",visible:e.dataInfoMenuVisible,width:"60%"},on:{"update:visible":function(t){e.dataInfoMenuVisible=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addProduct clearfix"},[a("el-button",{staticClass:"btnAddStyle",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.addDataInfo(1)}}},[e._v("新增产品")])],1),e._v(" "),a("div",{staticClass:"modelDataHeight"},[a("ul",{staticClass:"existMenu"},e._l(e.Detail,function(t,n){return a("li",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v(e._s(t.name))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.modification(t,1)}}},[e._v("修改")]),e._v(" "),a("div",{staticClass:"havedDataInfo"},e._l(t.columns,function(t){return a("span",{staticClass:"havedSpanStyle"},[e._v(e._s(t))])}))],1)}))])])],1),e._v(" "),a("div",{staticClass:"menuDataInfo"},[a("el-dialog",{attrs:{title:"表头增加修改",visible:e.dataInfoTableVisible,width:"50%"},on:{"update:visible":function(t){e.dataInfoTableVisible=t}}},[a("div",{staticClass:"addInfo"},[a("el-select",{attrs:{placeholder:"选择APP产品",size:"small"},model:{value:e.addInfoData,callback:function(t){e.addInfoData=t},expression:"addInfoData"}},e._l(e.AppName,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",[a("el-transfer",{attrs:{filterable:"",titles:["原始数据","配置数据"],"filter-placeholder":"请输入搜索信息",data:e.data2},on:{change:e.handleChange},model:{value:e.valueData,callback:function(t){e.valueData=t},expression:"valueData"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.saveTableName(1)}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"menuDataInfo"},[a("el-dialog",{attrs:{title:"增加/修改",visible:e.liuchenMenuVisible,width:"60%"},on:{"update:visible":function(t){e.liuchenMenuVisible=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addProduct clearfix"},[a("el-button",{staticClass:"btnAddStyle",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.addDataInfo(2)}}},[e._v("新增产品")])],1),e._v(" "),a("div",{staticClass:"modelDataHeight"},[a("ul",{staticClass:"existMenu"},e._l(e.Trans,function(t,n){return a("li",[a("el-button",{attrs:{type:"success",size:"small"}},[e._v(e._s(t.name))]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.modification(t,2)}}},[e._v("修改")]),e._v(" "),a("div",{staticClass:"havedDataInfo"},e._l(t.columns,function(t){return a("span",{staticClass:"havedSpanStyle"},[e._v(e._s(t))])}))],1)}))])])],1),e._v(" "),a("div",{staticClass:"menuDataInfo"},[a("el-dialog",{attrs:{title:"表头增加修改",visible:e.liuchenTableVisible,width:"50%"},on:{"update:visible":function(t){e.liuchenTableVisible=t}}},[a("div",{staticClass:"addInfo"},[a("el-select",{attrs:{placeholder:"选择APP产品",size:"small"},model:{value:e.addInfoData,callback:function(t){e.addInfoData=t},expression:"addInfoData"}},e._l(e.AppName,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",[a("el-transfer",{attrs:{filterable:"",titles:["原始数据","配置数据"],"filter-placeholder":"请输入搜索信息",data:e.data2},on:{change:e.handleChange},model:{value:e.valueData,callback:function(t){e.valueData=t},expression:"valueData"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.saveTableName(2)}}},[e._v("保存")])],1)])],1)],1)},staticRenderFns:[]};var Ra=a("vSla")(Aa,qa,!1,function(e){a("AW7O")},"data-v-5596f05e",null).exports,Ma=a("wJ7o"),Ba=a.n(Ma),Ea={name:"costDataRecord",data:function(){return{userperadmin:{},appList:[],fileData:[],fileArray:[],loading:!1,allFiles:[],page:0,uploading:!1,showImg:!1,showAllFilesFlag:!1,toogleText:"查看全部",costDataEntry:!1}},mounted:function(){for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("04"==e.data[t].meta)for(var a=0;a<e.data[t].children.length;a++)if("0401"==e.data[t].children[a].meta)for(var n=0;n<e.data[t].children[a].children.length;n++)"040101"==e.data[t].children[a].children[n].meta&&(this.costDataEntry="0"!=e.data[t].children[a].children[n].show);this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getAppArrayFun()},computed:{fileContent:function(){var e=[];if(this.showAllFilesFlag)e=this.allFiles;else{var t=0|this.page;if(0!==this.fileArray.length){var a=this.fileArray[t].list;e=this.fileDataFormatter(a)}}return e}},methods:{getAppArrayFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};Le(t).then(function(t){0===t.data.status?e.appList=t.data.appList:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.toast("服务器错误，请联系管理员","error")})},toggleImg:function(){this.showImg=!this.showImg},dateFormatter:function(e){var t,a,n,i=e.split("/");return 4===i[0].length||4===i[2].length?(t=i[0],a=("0"+i[1]).substr(-2,2),n=("0"+i[2]).substr(-2,2)):(t=("20"+i[2]).substr(-4,4),a=("0"+i[0]).substr(-2,2),n=("0"+i[1]).substr(-2,2)),t+"-"+a+"-"+n},fileDataFormatter:function(e){var t=[];for(var a in e){var n="渠道";void 0===e[a]["渠道"]&&(n="渠道名",void 0===e[a]["渠道名"]&&(n="渠道名称")),t.push({date:this.dateFormatter(e[a]["日期"]),appid:e[a].app,channelName:e[a][n],channel:e[a]["渠道号"],cost:void 0!==e[a]["成本金额"]?e[a]["成本金额"]:e[a]["成本"]})}return t},appFormatter:function(e){var t;return this.appList.forEach(function(a){a.name===e&&(t=a.id)}),t},clearFileContent:function(){var e=document.getElementById("fileHandle");this.fileArray=[],this.page=0,e.setAttribute("type","text"),e.setAttribute("type","file")},showAllFiles:function(){this.showAllFilesFlag?(this.showAllFilesFlag=!1,this.toogleText="查看全部"):(this.showAllFilesFlag=!0,this.toogleText="分页查看")},getFileContent:function(e){if(!this.loading){this.uploading=!1;var t=e.target.files,a=new FileReader,n=[],i=[],o=[],l=this;this.loading=!0;try{a.onload=function(e){try{var t=e.target.result,a=Ba.a.read(t,{type:"binary"})}catch(e){return l.loading=!1,void l.toast("文件类型不正确","error")}for(var s in a.Sheets)if(i=[],a.Sheets.hasOwnProperty(s)){a.Sheets[s]["!ref"],o=o.concat(Ba.a.utils.sheet_to_json(a.Sheets[s]));var r={id:s,list:i=i.concat(Ba.a.utils.sheet_to_json(a.Sheets[s]))};n.push(r)}l.fileData=i,l.fileArray=n,l.allFiles=l.fileDataFormatter(o),l.loading=!1},a.readAsBinaryString(t[0])}catch(e){this.loading=!1}}},uploadDataFun:function(){var e=this;if(!this.loading&&0!==this.allFiles.length){var t=this.allFiles.slice(0),a=this.appList;t.forEach(function(e){for(var t=0;t<a.length;t++)e.appid===a[t].name&&(e.appid=a[t].id)});var n,i={sessionid:this.userperadmin.sessionid,fileData:t};this.loading=!0,(n=i,Pe.a.post(Fe+"addCost",n)).then(function(t){e.loading=!1,0===t.data.status?e.uploading=!0:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading=!1,e.toast("服务器错误，请联系管理员","error")})}},toast:function(e,t){this.$message({type:t,message:e})}}},Oa={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page cost-data-record-page"},[e._m(0),e._v(" "),n("section",{staticClass:"action-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.costDataEntry,expression:"costDataEntry"}],staticClass:"fileUploadBtn btn primary"},[e._m(1),e._v(" "),n("input",{staticClass:"upload",attrs:{id:"fileHandle",type:"file"},on:{change:e.getFileContent}})]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.costDataEntry,expression:"costDataEntry"}],staticClass:"btn error",on:{click:e.clearFileContent}},[n("i",{staticClass:"fa fa-close"}),e._v("删除预览")]),e._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:e.costDataEntry,expression:"costDataEntry"}],staticClass:"btn success",on:{click:e.uploadDataFun}},[n("i",{staticClass:"fa fa-check"}),e._v("提交预览")]),e._v(" "),n("p",{staticClass:"tooltip"},[n("span",{staticClass:"start"},[e._v("注：")]),e._v("灰色"),n("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}),e._v("表示预览状态，绿色"),n("i",{staticClass:"fa fa-check-circle success",attrs:{"aria-hidden":"true"}}),e._v("表示已经提交预览。每次上传预览时，上一次未提交的预览会被覆盖。"),n("span",{staticClass:"notice",on:{mouseover:e.toggleImg,mouseout:e.toggleImg}},[e._v("查看数据格式")])])]),e._v(" "),e.showImg?n("section",{staticClass:"zindextop"},[n("img",{attrs:{src:a("6XFZ"),alt:"提示"}})]):e._e(),e._v(" "),n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"正在提交"}},[e.fileArray.length>=1?n("div",{staticClass:"table-toolbar"},[e.showAllFilesFlag?e._e():n("label",[e._v("Excel sheet：")]),e._v(" "),e.showAllFilesFlag?e._e():n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择数据页"},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}},e._l(e.fileArray,function(e,t){return n("el-option",{key:e.id,attrs:{label:e.id,value:t}})})),e._v(" "),n("button",{staticClass:"btn primary",on:{click:e.showAllFiles}},[e._v(e._s(e.toogleText))])],1):e._e(),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{id:"fileTable",data:e.fileContent,height:"400px",border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),n("el-table-column",{attrs:{prop:"appid",label:"app"}}),e._v(" "),n("el-table-column",{attrs:{prop:"channelName",label:"渠道"}}),e._v(" "),n("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"cost",label:"成本金额"}}),e._v(" "),n("el-table-column",{attrs:{prop:"state",label:"上传状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"fa fa-check-circle",class:{success:e.uploading},attrs:{"aria-hidden":"true"}})]}}])})],1)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bread-nav"},[t("p",[this._v("当前位置：数据中心 > 成本数据录入")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"text"},[t("i",{staticClass:"fa fa-upload"}),this._v("上传预览")])}]};var Ha=a("vSla")(Ea,Oa,!1,function(e){a("YvHJ")},"data-v-6e0e2ea8",null).exports,Ga={data:function(){return{userperadmin:{},first:0,searchInfo:{channelNameSelected:"",channelNameList:[],channelSelected:"",channelList:[],dateRange:[],start:"",end:"",loading:!1,first:0},tableInfo:{tableData:[],pageId:1,pageSize:10,pageSizes:[10,20,50,100,500,1e3],dataSize:0,first:1},deleteInfo:{data:[]},loading:!1,dialogInfo:{flag:!0,visible:!1,data:[]},deleteHistory:!1}},mounted:function(){for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("04"==e.data[t].meta)for(var a=0;a<e.data[t].children.length;a++)if("0402"==e.data[t].children[a].meta)for(var n=0;n<e.data[t].children[a].children.length;n++)"040201"==e.data[t].children[a].children[n].meta&&(this.deleteHistory="0"!=e.data[t].children[a].children[n].show);this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getSearchParamsFun()},methods:{deleteMuchFun:function(){this.dialogInfo.flag=!1,this.dialogInfo.visible=!0},deleteDialog:function(e,t){this.dialogInfo.flag=!0,this.dialogInfo.visible=!0,this.dialogInfo.data=[e],this.deleteInfo.data=[{date:e.date,channel:e.channel}]},deleteItemFun:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,deletions:this.deleteInfo.data};this.dialogInfo.loading=!0,(e=a,Pe.a.post(Fe+"deleteCost",e)).then(function(e){t.dialogInfo.loading=!1,t.dialogInfo.visible=!1,0===e.data.status?(t.first=0,t.toast("删除成功","success"),t.getCostRecordFun()):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.dialogInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},selectRow:function(e,t){this.deleteInfo.data=[];for(var a=0;a<e.length;a++){var n={date:e[a].date,channel:e[a].channel};this.deleteInfo.data.push(n)}},selectAll:function(e){this.deleteInfo.data=[];for(var t=0;t<e.length;t++){var a={date:e[t].date,channel:e[t].channel};this.deleteInfo.data.push(a)}},indexFormatter:function(e){return this.tableInfo.pageSize*(this.tableInfo.pageId-1)+1+e},pageSizeChange:function(e){this.tableInfo.pageId=1,this.tableInfo.pageSize=e,this.first=this.tableInfo.first,this.getCostRecordFun()},currentPageChange:function(e){this.tableInfo.pageId=e,this.first=this.tableInfo.first,this.getCostRecordFun()},searchForHistoryFun:function(){0!==this.searchInfo.dateRange.length&&(this.searchInfo.dateRange[0]=wt(this.searchInfo.dateRange[0]),this.searchInfo.dateRange[1]=wt(this.searchInfo.dateRange[1])),this.getCostRecordFun()},getSearchParamsFun:function(){var e=this,t={sessionid:this.userperadmin.sessionid};this.searchInfo.loading=!0,Ve(t).then(function(t){e.searchInfo.loading=!1,0===t.data.status?(e.searchInfo.channelNameList=t.data.channelNameList,e.searchInfo.channelList=t.data.channelNoList):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.searchInfo.loading=!1,e.toast("服务器错误，请联系管理员","error")})},getCostRecordFun:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,pageId:this.tableInfo.pageId-1,pageSize:this.tableInfo.pageSize,first:this.first};""!==this.searchInfo.channelNameSelected.replace(/[-]/g,"")&&(a.channelName=this.searchInfo.channelNameSelected.replace(/[-]/g,"")),""!==this.searchInfo.channelSelected.replace(/[-]/g,"")&&(a.channel=this.searchInfo.channelSelected.replace(/[-]/g,"")),""!==this.searchInfo.channelSelected.replace(/[-]/g,"")&&(a.channel=this.searchInfo.channelSelected.replace(/[-]/g,"")),void 0!==this.searchInfo.dateRange[0]&&(a.minDate=this.searchInfo.dateRange[0]),void 0!==this.searchInfo.dateRange[1]&&(a.maxDate=this.searchInfo.dateRange[1]),this.loading=!0,(e=a,Pe.a.post(Fe+"getCost",e)).then(function(e){t.loading=!1,0===e.data.status?(t.tableInfo.tableData=e.data.costList,e.data.listSize&&(t.tableInfo.dataSize=parseInt(e.data.listSize))):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading=!1,t.toast("服务器错误，请联系管理员","error")})},toast:function(e,t){this.$message({type:t,message:e})}}},Qa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page record-history"},[e._m(0),e._v(" "),a("section",{staticClass:"action-wrapper clearfix"},[a("div",{staticClass:"fleft"},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择/输入渠道"},model:{value:e.searchInfo.channelNameSelected,callback:function(t){e.$set(e.searchInfo,"channelNameSelected",t)},expression:"searchInfo.channelNameSelected"}},e._l(e.searchInfo.channelNameList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择/输入渠道号"},model:{value:e.searchInfo.channelSelected,callback:function(t){e.$set(e.searchInfo,"channelSelected",t)},expression:"searchInfo.channelSelected"}},e._l(e.searchInfo.channelList,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("div",{staticClass:"fleft",attrs:{id:"dateRangeInput"}},[a("span",{staticClass:"label"},[e._v("选择日期:")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchInfo.dateRange,callback:function(t){e.$set(e.searchInfo,"dateRange",t)},expression:"searchInfo.dateRange"}})],1),e._v(" "),a("div",{staticClass:"fleft"},[a("button",{staticClass:"btn primary",on:{click:e.searchForHistoryFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])]),e._v(" "),a("div",{staticClass:"fright"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.deleteHistory,expression:"deleteHistory"}],staticClass:"btn error",on:{click:e.deleteMuchFun}},[a("i",{staticClass:"fa fa-trash"}),e._v("一键删除")])])]),e._v(" "),a("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"正在加载"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData,border:""},on:{select:e.selectRow,"select-all":e.selectAll}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",index:e.indexFormatter,label:"序号",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:;"}},[a("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"},on:{click:function(a){e.deleteDialog(t.row,t.$index)}}})])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.tableInfo.pageId,"page-sizes":e.tableInfo.pageSizes,"page-size":e.tableInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogInfo.loading,expression:"dialogInfo.loading"}],attrs:{title:"删除记录",visible:e.dialogInfo.visible,width:"600px","element-loading-spinner":"el-icon-loading","element-loading-text":"正在加载"},on:{"update:visible":function(t){e.$set(e.dialogInfo,"visible",t)}}},[e.dialogInfo.flag?a("div",{staticClass:"item"},[a("span",{staticStyle:{color:"#CD270D"}},[e._v("是否删除")]),e._v(" "),a("el-table",{attrs:{data:e.dialogInfo.data,border:""}},[a("el-table-column",{attrs:{property:"date",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{property:"channelName",label:"渠道"}}),e._v(" "),a("el-table-column",{attrs:{property:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{property:"cost",label:"成本金额"}})],1),e._v(" "),a("p",[e._v("删除后不可恢复，点击后“确认”删除，点击“取消”返回录入历史页面")])],1):e._e(),e._v(" "),e.dialogInfo.flag?e._e():a("p",[e._v("是否"),a("span",{staticStyle:{color:"#CD270D"}},[e._v("批量删除")]),e._v("选中数据，删除后不可恢复。点击“确认”删除，点击“取消”关闭窗口，返回成本录入历史页面。")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInfo.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteItemFun}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bread-nav"},[t("p",[this._v("当前位置：数据中心 > 成本录入历史")])])}]};var Ua=a("vSla")(Ga,Qa,!1,function(e){a("mIUw")},"data-v-da269602",null).exports,Va={data:function(){return{sessionid:"",length:100,min:0,max:100,Statrloading:!0,newDate:"",gitTime:"",dataTablechange:"",dataList:[{value:"-1",label:"全部"}],reate:"",qudaoNum:"",qudaoNumArry:[],textarea:"",tableData3:[],multipleSelection:[],tableStaus:!1}},methods:{getSearchInfo:function(e){var t=this;clearInterval(void 0);var a,n={sessionid:e};n=Ne()(n),(a=n,Pe.a.post(Fe+"getOptimizationTaskParameter",a)).then(function(e){if(0===e.data.status){for(var a=0;a<e.data.channelNoList.length;a++)t.qudaoNumArry.push({label:e.data.channelNoList[a].split(",")[1],value:e.data.channelNoList[a]});t.dataList=e.data.fromTypeList,t.Statrloading=!1,t.searchData()}1===e.data.status&&(t.$router.replace("/login"),t.Statrloading=!1)})},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},dataTime:function(){},tablechange:function(){this.dataTablechange=""},qudaoNumFocus:function(){this.qudaoNum=""},inputReate:function(){this.reate>100&&(this.$message.error("输入必须为100以内的数字"),this.reate=null)},addDataBackInfo:function(){var e=this;if(this.gitTime)if(this.dataTablechange)if(this.reate)if(this.qudaoNum)if(this.textarea){var t,a=(new Date).valueOf(),n=this.qudaoNum.split(","),i={sessionid:this.sessionid,id:a,startDate:this.gitTime[0],endDate:this.gitTime[1],tableId:this.dataTablechange,optimization:this.reate,channelId:n[0],channel:n[1],channelName:n[2],comment:this.textarea,adminId:this.sessionid},o=Ne()(i);(t=o,Pe.a.post(Fe+"addOptimizationTask",t)).then(function(t){0===t.data.status&&e.searchData(),1===t.data.status&&e.$message.error("添加失败，请重新添加")})}else this.$message.error("备注为必填项");else this.$message.error("渠道编码为必填项");else this.$message.error("优化比例为必填项");else this.$message.error("数据表选择为必填项");else this.$message.error("日期范围为必填项")},handleSelectionChange:function(e){this.multipleSelection=e},deletDataBack:function(e,t){var a=this,n={sessionid:this.sessionid,id:e.id},i=Ne()(n);this.$confirm("确认删除？").then(function(e){a.deleteFun(i)}).catch(function(e){})},batchDelete:function(){var e=this;this.$confirm("确认删除？").then(function(t){if(e.multipleSelection.length>0){for(var a=[],n=0;n<e.multipleSelection.length;n++)a.push(e.multipleSelection[n].id);var i={sessionid:e.sessionid,id:a.toString()},o=Ne()(i);e.deleteFun(o)}}).catch(function(e){})},AkeyHeavyRun:function(){var e,t=this,a={sessionid:this.sessionid},n=Ne()(a);(e=n,Pe.a.post(Fe+"startOptimizationTask",e)).then(function(e){0===e.data.status&&t.searchData(),1===e.data.status&&(t.$message.error("一键重跑失败"),t.$router.replace("/login"))})},searchData:function(){this.tableStaus=!0;var e,t={sessionid:this.sessionid},a=Ne()(t),n=this;(e=a,Pe.a.post(Fe+"getOptimizationTask",e)).then(function(e){if(0===e.data.status){n.tableData3=e.data.optimizationTaskList;for(var t=0;t<n.tableData3.length;t++){n.tableData3[t].optimization+="%",0==n.tableData3[t].status?n.tableData3[t].progressMsg="暂未开始":1==n.tableData3[t].status?n.tableData3[t].progressMsg=e.data.optimizationTaskList[t].progressMsg:2==n.tableData3[t].status&&(n.tableData3[t].progressMsg="已完成");for(var a=0;a<n.dataList.length;a++)n.tableData3[t].tableId===n.dataList[a].id&&(n.tableData3[t].tableName=n.dataList[a].name)}n.tableStaus=!1}1===e.data.status&&n.$router.replace("/login")})},deleteFun:function(e){var t,a=this;(t=e,Pe.a.post(Fe+"deleteOptimizationTask",t)).then(function(e){0===e.data.status&&a.searchData()})},clickGetNewData:function(){this.searchData()}},mounted:function(){var e=JSON.parse(localStorage.getItem("userperadmin"));this.sessionid=e.sessionid,this.getSearchInfo(this.sessionid),this.findTime()}},ja={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"databackrun"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"seachInput",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"fontColor"},[e._v("*")]),a("span",{staticClass:"fontColorSize"},[e._v("选择重跑数据日期:")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"",editable:!1,"value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTime,callback:function(t){e.gitTime=t},expression:"gitTime"}})],1)])],1),e._v(" "),a("div",{staticClass:"lineHeight"}),e._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"fontColor"},[e._v("*")]),a("span",{staticClass:"fontColorSize"},[e._v("选择重跑数据报表:")])]),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","default-first-option":"",size:"small",placeholder:"输入/选择数据报表"},on:{focus:e.tablechange},model:{value:e.dataTablechange,callback:function(t){e.dataTablechange=t},expression:"dataTablechange"}},e._l(e.dataList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:2,offset:1}},[a("span",{staticClass:"fontColor"},[e._v("*")]),a("span",{staticClass:"fontColorSize"},[e._v("优化比例:")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{staticClass:"inputReate",attrs:{placeholder:"请输入优化比例",clearable:"",size:"small",type:"text"},nativeOn:{keyup:function(t){return e.inputReate(t)}},model:{value:e.reate,callback:function(t){e.reate=t},expression:"reate"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",{staticClass:"lilv"},[e._v("%")])]),e._v(" "),a("el-col",{attrs:{span:2}},[a("span",{staticClass:"fontColor"},[e._v("*")]),a("span",{staticClass:"fontColorSize"},[e._v("渠道编码:")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","default-first-option":"",size:"small",placeholder:"输入/选择渠道编码"},on:{focus:e.qudaoNumFocus},model:{value:e.qudaoNum,callback:function(t){e.qudaoNum=t},expression:"qudaoNum"}},e._l(e.qudaoNumArry,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"lineHeight"}),e._v(" "),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"fontColor"},[e._v("*")]),a("span",{staticClass:"fontColorSize"},[e._v("备注:")])]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"输入内容最多200字符",maxlength:e.length},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),e._v(" "),a("el-col",{attrs:{span:9,offset:2}},[a("el-button",{staticClass:"addDataBackInfo",attrs:{type:"primary",size:"small"},on:{click:e.addDataBackInfo}},[e._v("添加")])],1)],1),e._v(" "),a("div",{staticClass:"lineHeight"}),e._v(" "),a("div",{staticClass:"clickNewData"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.clickGetNewData}},[e._v("点击刷新")])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableStaus,expression:"tableStaus"}],staticClass:"table",attrs:{"element-loading-text":"数据刷新中"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData3,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tableName",label:"重跑报表"}}),e._v(" "),a("el-table-column",{attrs:{label:"重跑数据日期","show-overflow-tooltip":"",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.startDate))]),a("span",[e._v("~")]),a("span",[e._v(e._s(t.row.endDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optimization",label:"优化比例"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=t.row.status,expression:"scope.row.status !=1"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.deletDataBack(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"progressMsg",label:"进度"}})],1)],1),e._v(" "),a("div",{staticClass:"lineHeight"}),e._v(" "),a("div",{staticClass:"tableButton"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDelete}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.AkeyHeavyRun}},[e._v("一键重跑")])],1)],1)])},staticRenderFns:[]};var Wa=a("vSla")(Va,ja,!1,function(e){a("0KBX")},"data-v-2148fc84",null).exports,Ja={data:function(){return{userperadmin:{},searchInfo:{loading:!1,reportSelected:"",reportList:[],dateRange:[],startDate:"",endDate:""},tableInfo:{loading:!1,data:[],currentPage:1,pageSize:10,pageSizes:[10,20,50,100,500,1e3],dataSize:0}}},mounted:function(){this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getReportTypeFun()},methods:{getReportTypeFun:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid};this.searchInfo.loading=!0,(e=a,Pe.a.post(Fe+"getTableType",e)).then(function(e){t.searchInfo.loading=!1,0===e.data.status?t.searchInfo.reportList=e.data.fromTypeList:1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.searchInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},searchTableDataFun:function(){this.searchInfo.dateRange||(this.searchInfo.dateRange=[]),0!==this.searchInfo.dateRange.length||""!==this.searchInfo.reportSelected?(0!==this.searchInfo.dateRange.length&&(this.searchInfo.dateRange[0]=wt(this.searchInfo.dateRange[0]),this.searchInfo.dateRange[1]=wt(this.searchInfo.dateRange[1])),this.getRedoHistoryListFun()):this.toast("请至少选择一个查询条件","warning")},getRedoHistoryListFun:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,queryType:1,minDate:void 0===this.searchInfo.dateRange[0]?"":this.searchInfo.dateRange[0],maxDate:void 0===this.searchInfo.dateRange[1]?"":this.searchInfo.dateRange[1],tableId:this.searchInfo.reportSelected};this.tableInfo.loading=!0,this.tableInfo.data=[],(e=a,Pe.a.post(Fe+"getOptimizationTask",e)).then(function(e){t.tableInfo.loading=!1,0===e.data.status?t.tableInfo.data=e.data.optimizationTaskList:1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},getDetailFun:function(e){},actionDateFormatter:function(e){return kt(e.id)},optiFormatter:function(e){return e.optimization+"%"},dateRangeFormatter:function(e){return e.startDate+" 至 "+e.endDate},reportFormatter:function(e){for(var t=this.searchInfo.reportList.copyWithin(0,0),a=e.tableId,n=0;n<t.length;n++)if(t[n].id===e.tableId){a=t[n].name.trim();break}return a},pageSizeChange:function(e){},currentPageChange:function(e){},toast:function(e,t){this.$message({type:t,message:e})}}},Ya={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[e._m(0),e._v(" "),a("section",{staticClass:"table-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.searchInfo.loading,expression:"searchInfo.loading"}],staticClass:"search-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"fleft"},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入/选择报表"},model:{value:e.searchInfo.reportSelected,callback:function(t){e.$set(e.searchInfo,"reportSelected",t)},expression:"searchInfo.reportSelected"}},e._l(e.searchInfo.reportList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"fleft"},[a("span",{staticClass:"label"},[e._v("选择日期:")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchInfo.dateRange,callback:function(t){e.$set(e.searchInfo,"dateRange",t)},expression:"searchInfo.dateRange"}})],1),e._v(" "),a("button",{staticClass:"btn primary",on:{click:e.searchTableDataFun}},[a("i",{staticClass:"fa fa-search"}),e._v("查询")])]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableInfo.loading,expression:"tableInfo.loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.data,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tableId",label:"重跑报表",formatter:e.reportFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"重跑数据日期",formatter:e.dateRangeFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"optimization",label:"优化比例(%)",formatter:e.optiFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作时间",formatter:e.actionDateFormatter}}),e._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{placement:"left",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-title"},[e._v("详情")]),e._v("\n\t\t\t\t\t\t  \t\t"+e._s(t.row.comment)+"\n\t\t\t\t\t\t  \t")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[a("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})])],1)]}}])})],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bread-nav"},[t("p",[this._v("当前位置：数据中心 > 重跑历史")])])}]};var Xa=a("vSla")(Ja,Ya,!1,function(e){a("L+Gw"),a("IzAu")},"data-v-f4f72a10",null).exports,Ka={data:function(){return{userloginInfo:null,divHearderInfo:!1,partner:"",choosePartner:[],product:"",chooseproduct:[],content:"",gitTime:[],tableStaus:!1,tableData:[],deleteVisible:!1,deleteData:[],addVisible:!1,fbsData:[{date:[],appId:"",companyId:"",cooperationContent:"",cost:"",remark:""}]}},mounted:function(){this.userloginInfo=JSON.parse(localStorage.getItem("userperadmin")),this.getSelections()},methods:{getSelections:function(){var e={sessionid:this.userloginInfo.sessionid};this.divHearderInfo=!0;var t,a=this;(t=e,Pe.a.post(Fe+"partnerManager",t)).then(function(e){0===e.data.status&&(a.choosePartner=e.data.reportforms_admin,a.chooseproduct=e.data.appList,a.divHearderInfo=!1,a.searchInfo()),1===e.data.status&&a.$router.replace("/login")})},searchInfo:function(){this.tableStaus=!0;var e,t={sessionid:this.userloginInfo.sessionid,id:this.partner,appId:this.product,cooperationContent:this.content,minDate:this.gitTime&&this.gitTime.length>0?this.gitTime[0]:"",maxDate:this.gitTime&&this.gitTime.length>0?this.gitTime[1]:""},a=this;(e=t,Pe.a.post(Fe+"getOperateCosting",e)).then(function(e){if(0===e.data.status){a.tableData=e.data.reportforms_admin;for(var t=0;t<a.tableData.length;t++)a.tableData[t].synchronizeSwitch="0"!==a.tableData[t].synchronizeSwitch;a.tableStaus=!1}1===e.data.status&&a.$router.replace("/login")})},focuschoosePartner:function(){this.partner=""},focusDataTime:function(){this.gitTime=[]},addInfoToModel:function(){this.addVisible=!0,this.fbsData=[{date:[],appId:"",companyId:"",cooperationContent:"",cost:"",remark:""}]},deleteTableRow:function(e,t){this.deleteData=[e],this.deleteVisible=!0},deleteCost:function(){var e,t={sessionid:this.userloginInfo.sessionid,ruleForm:this.deleteData},a=this;(e=t,Pe.a.post(Fe+"deleteCosting",e)).then(function(e){0===e.data.status&&(a.$message({message:"删除数据成功",type:"success"}),a.deleteVisible=!1,a.searchInfo()),1===e.data.status&&a.$router.replace("/login")})},synchronize:function(e,t){var a,n={sessionid:this.userloginInfo.sessionid,id:e.id,synchronizeSwitch:e.synchronizeSwitch},i=this;(a=n,Pe.a.post(Fe+"updateCosting",a)).then(function(e){0===e.data.status&&(i.$message({message:"同步成功",type:"success"}),i.searchInfo()),1===e.data.status&&i.$router.replace("/login")})},handleSelectionChange:function(e){this.deleteData=e},addArrPush:function(){this.fbsData.push({date:[],appId:"",companyId:"",cooperationContent:"",cost:"",remark:""})},deleteRow:function(e,t){this.fbsData.splice(t,1)},modelSubmit:function(){for(var e=0;e<this.fbsData.length;e++){if(!(this.fbsData[e].date&&this.fbsData[e].appId&&this.fbsData[e].companyId&&this.fbsData[e].cooperationContent&&this.fbsData[e].cost))return void this.$message.error("日期/产品/合作方/合作内容/成本金额 为必填项");this.fbsData[e].dateNew=this.fbsData[e].date[0]+"~"+this.fbsData[e].date[1]}var t,a={sessionid:this.userloginInfo.sessionid,ruleForm:this.fbsData},n=this;(t=a,Pe.a.post(Fe+"addOrUpdateCosting",t)).then(function(e){0===e.data.status&&(n.$message({message:"新增数据成功",type:"success"}),n.addVisible=!1,n.searchInfo()),1===e.data.status&&n.$router.replace("/login")})}}},Za={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.divHearderInfo,expression:"divHearderInfo"}],staticClass:"hearder",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:5}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"输入/选择合作方"},on:{focus:e.focuschoosePartner},model:{value:e.partner,callback:function(t){e.partner=t},expression:"partner"}},e._l(e.choosePartner,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",size:"small",placeholder:"选择产品"},model:{value:e.product,callback:function(t){e.product=t},expression:"product"}},e._l(e.chooseproduct,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticClass:"templeMaring",attrs:{placeholder:"输入合作内容",clearable:"",size:"small"},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),a("el-col",{staticStyle:{"margin-left":"1rem"},attrs:{span:3}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1,size:"small"},on:{focus:e.focusDataTime},model:{value:e.gitTime,callback:function(t){e.gitTime=t},expression:"gitTime"}})],1)])],1),e._v(" "),a("el-row",{staticClass:"headerSecond",attrs:{span:24}},[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteCost}},[e._v("一键删除")])],1),e._v(" "),a("el-col",{staticClass:"marginLeft",attrs:{span:4}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addInfoToModel}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchInfo}})],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableStaus,expression:"tableStaus"}],staticClass:"table",attrs:{"element-loading-text":"数据加载中"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"small",data:e.tableData,"tooltip-effect":"dark",border:"",height:e.tableData&&e.tableData.length>0?480:120},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dateNew",label:"日期",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"合作方"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cooperationContent",label:"合作内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#909399"},on:{change:function(a){e.synchronize(t.row,t.$index)}},model:{value:t.row.synchronizeSwitch,callback:function(a){e.$set(t.row,"synchronizeSwitch",a)},expression:"scope.row.synchronizeSwitch"}}),e._v("   \n                           "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteTableRow(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"model"},[a("el-dialog",{attrs:{title:"增加",visible:e.addVisible,width:"90%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"addModel"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addArrPush}})],1),e._v(" "),a("el-table",{attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?300:120,border:"",size:"small","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"block"},[a("el-date-picker",{staticClass:"dataStyleDate",attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd",editable:!1,size:"small"},model:{value:t.row.date,callback:function(a){e.$set(t.row,"date",a)},expression:"scope.row.date"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"产品","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"选择产品"},model:{value:t.row.appId,callback:function(a){e.$set(t.row,"appId",a)},expression:"scope.row.appId"}},e._l(e.chooseproduct,function(e,t){return a("el-option",{key:t,staticClass:"dataStyle",attrs:{label:e.name,value:e.id}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"companyId",label:"合作方","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"dataStyleDate",attrs:{clearable:"",size:"mini",placeholder:"选择合作方"},model:{value:t.row.companyId,callback:function(a){e.$set(t.row,"companyId",a)},expression:"scope.row.companyId"}},e._l(e.choosePartner,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.id}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cooperationContent",label:"合作内容","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.row.cooperationContent,callback:function(a){e.$set(t.row,"cooperationContent",a)},expression:"scope.row.cooperationContent"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本金额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.row.cost,callback:function(a){e.$set(t.row,"cost",a)},expression:"scope.row.cost"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",size:"mini"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRow(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])})],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.modelSubmit}},[e._v("提交")])],1)],1)],1),e._v(" "),a("div",{staticClass:"model"},[a("el-dialog",{attrs:{title:"是否删除 ?",visible:e.deleteVisible,width:"60%"},on:{"update:visible":function(t){e.deleteVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deleteData,border:"",size:"mini"}},[a("el-table-column",{attrs:{prop:"dateNew",label:"日期",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"产品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"合作方"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cooperationContent",label:"合作内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"成本金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1),e._v(" "),a("div",{staticStyle:{"padding-top":"20px"}},[a("span",[e._v('删除后不可恢复。点击"确认"进行删除，点击"x"关闭窗口')])]),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deleteCost}},[e._v("确定")])],1)],1)],1)])},staticRenderFns:[]};var en=a("vSla")(Ka,Za,!1,function(e){a("vQzk")},"data-v-013bd86b",null).exports,tn={data:function(){return{sessionidInfo:null,tableloading:!1,fbsData:[],reviseVisible:!1,FunctionVisible:!1,useManageVisible:!1,manageTile:"",funGroupName:"",isRepetition:null,isFunRepetition:null,isFunMetaRepetition:null,isFunMetaRepetSpan:!1,addFunInfo:{changeFunGroup:"",funName:"",isShow:"",isgetUse:"",meta:""},options:[],setPermissData:[],clickIndex:null,changeInputValue:"",addGroupUser:!1,addFunctionUser:!1,lookFunSet:!1,saveSetFun:!1}},mounted:function(){for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("05"==e.data[t].meta)for(var a=0;a<e.data[t].children.length;a++)if("0501"==e.data[t].children[a].meta)for(var n=0;n<e.data[t].children[a].children.length;n++)"050101"==e.data[t].children[a].children[n].meta?this.addGroupUser="0"!=e.data[t].children[a].children[n].show:"050102"==e.data[t].children[a].children[n].meta?this.addFunctionUser="0"!=e.data[t].children[a].children[n].show:"050103"==e.data[t].children[a].children[n].meta?this.lookFunSet="0"!=e.data[t].children[a].children[n].show:"050104"==e.data[t].children[a].children[n].meta&&(this.saveSetFun="0"!=e.data[t].children[a].children[n].show);this.sessionidInfo=JSON.parse(localStorage.getItem("userperadmin")),this.getAllFunGroup()},filters:{formatDate:function(e,t){var a=new Date(e),n=a.getFullYear(),i=a.getMonth()+1,o=a.getDate(),l=a.getHours(),s=a.getMinutes(),r=a.getSeconds();return n+"-"+i+"-"+o+" "+l+":"+s+":"+(r>=10?r:"0"+r)}},methods:{getAllFunGroup:function(){var e=this,t={sessionid:this.sessionidInfo.sessionid};dt(t).then(function(t){0===t.data.status&&(e.fbsData=t.data.permissionTypeList),1===t.data.status&&e.$router.replace("/login")})},addGroup:function(){this.funGroupName="",this.reviseVisible=!0},addFun:function(){this.addFunInfo.changeFunGroup="",this.addFunInfo.funName="",this.addFunInfo.isShow="1",this.addFunInfo.isgetUse="1",this.addFunInfo.meta="",this.options=[];for(var e=0;e<this.fbsData.length;e++)this.options.push({value:this.fbsData[e].id,label:this.fbsData[e].name});this.FunctionVisible=!0},funManageName:function(){var e,t={sessionid:this.sessionidInfo.sessionid,name:this.funGroupName},a=this;a.funGroupName&&(e=t,Pe.a.post(Fe+"checkPermissionType",e)).then(function(e){if(0===e.data.status)a.isRepetition=0;else if(1===e.data.status)a.$router.replace("/login");else{if(2===e.data.status)return a.$message.error("功能组名称不能重复"),void(a.isRepetition=1);a.isRepetition=null}})},saveFunGroup:function(){if(this.funGroupName){null==this.funGroupName&&this.funManageName();var e,t={sessionid:this.sessionidInfo.sessionid,name:this.funGroupName},a=this;(e=t,Pe.a.post(Fe+"addPermissionType",e)).then(function(e){0===e.data.status&&(a.$message({message:"添加功能组成功",type:"success"}),a.reviseVisible=!1,a.getAllFunGroup()),1===e.data.status&&a.$router.replace("/login")})}else this.$message.error("添加功能组名称不能为空")},funNameRep:function(){var e,t={sessionid:this.sessionidInfo.sessionid,name:this.addFunInfo.funName},a=this;(e=t,Pe.a.post(Fe+"checkPermission",e)).then(function(e){0===e.data.status?a.isFunRepetition=0:1===e.data.status?a.$router.replace("/login"):2===e.data.status?(a.$message.error("功能名称重复"),a.isFunRepetition=1):a.isFunRepetition=null})},funIDRep:function(){var e,t={sessionid:this.sessionidInfo.sessionid,meta:this.addFunInfo.meta},a=this;(e=t,Pe.a.post(Fe+"checkMeta",e)).then(function(e){0===e.data.status?(a.isFunMetaRepetition=0,a.isFunMetaRepetSpan=!1):1===e.data.status?a.$router.replace("/login"):2===e.data.status?(a.isFunMetaRepetSpan=!0,a.isFunMetaRepetition=1):(a.isFunMetaRepetition=null,a.isFunMetaRepetSpan=!1)})},saveAddFunction:function(){if(this.addFunInfo.changeFunGroup)if(this.addFunInfo.funName)if(this.addFunInfo.meta)if(this.addFunInfo.meta&&2!==this.addFunInfo.meta.length&&4!==this.addFunInfo.meta.length&&6!==this.addFunInfo.meta.length)this.$message.error("功能ID长度必须2位/4位/6位");else{var e,t={sessionid:this.sessionidInfo.sessionid,name:this.addFunInfo.funName,type:this.addFunInfo.changeFunGroup,meta:this.addFunInfo.meta,allshow:parseInt(this.addFunInfo.isShow),isuse:parseInt(this.addFunInfo.isgetUse)},a=this;(e=t,Pe.a.post(Fe+"addPermission",e)).then(function(e){0===e.data.status&&(a.$message({message:"添加功能成功",type:"success"}),a.FunctionVisible=!1),1===e.data.status&&a.$router.replace("/login")})}else this.$message.error("功能ID不能为空");else this.$message.error("功能名称不能为空");else this.$message.error("请选择归属功能组")},useManage:function(e,t){var a=this;this.clickIndex=null;var n,i={sessionid:this.sessionidInfo.sessionid,type:e.id};(n=i,Pe.a.post(Fe+"getPermission",n)).then(function(t){if(0===t.data.status){a.setPermissData=t.data.permissions;for(var n=0;n<a.setPermissData.length;n++)a.setPermissData[n].allshow=0!==a.setPermissData[n].allshow,a.setPermissData[n].isuse=0!==a.setPermissData[n].isuse;a.useManageVisible=!0,a.manageTile=e.name+"功能管理"}1===t.data.status&&a.$router.replace("/login")})},clickShowList:function(e,t,a){this.setFunName(e)},clickShowuse:function(e){this.setFunName(e)},setFunName:function(e){var t,a={sessionid:this.sessionidInfo.sessionid,id:e.id,name:e.name,type:e.type,allshow:e.allshow,isuse:e.isuse,meta:e.meta},n=this;(t=a,Pe.a.post(Fe+"updatePermission",t)).then(function(t){0===t.data.status&&n.$message({message:"修改"+e.name+"保存功能成功",type:"success"}),1===t.data.status&&n.$router.replace("/login")})}}},an={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"groupBox"},[a("div",{staticClass:"clickBtn"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addGroupUser,expression:"addGroupUser"}],staticClass:"btnStyleone",attrs:{type:"primary",size:"small"},on:{click:e.addGroup}},[e._v("添加功能组")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addFunctionUser,expression:"addFunctionUser"}],staticClass:"btnStyletow",attrs:{type:"primary",size:"small"},on:{click:e.addFun}},[e._v("添加功能")])],1),e._v(" "),a("div",{staticClass:"tablesys"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"80%"},attrs:{data:e.fbsData,border:"",size:"mini","element-loading-text":"拼命加载中..."}},[a("el-table-column",{attrs:{type:"index",label:"排序"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.updateTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"组名"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.lookFunSet,expression:"lookFunSet"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.useManage(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-align-justify"})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加一个功能组",visible:e.reviseVisible,width:"50%"},on:{"update:visible":function(t){e.reviseVisible=t}}},[a("el-form",[a("el-row",{staticStyle:{"padding-bottom":"20px"}},[a("el-col",{attrs:{span:4}},[e._v("功能组名称:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{input:e.funManageName},model:{value:e.funGroupName,callback:function(t){e.funGroupName=t},expression:"funGroupName"}})],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.reviseVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveFunGroup}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加一个功能",visible:e.FunctionVisible,width:"50%"},on:{"update:visible":function(t){e.FunctionVisible=t}}},[a("el-form",[a("el-row",[a("div",{staticClass:"showPadding"},[a("el-col",{attrs:{span:4}},[e._v("归属功能组:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{attrs:{placeholder:"选择功能组"},model:{value:e.addFunInfo.changeFunGroup,callback:function(t){e.$set(e.addFunInfo,"changeFunGroup",t)},expression:"addFunInfo.changeFunGroup"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"showPadding"},[a("el-col",{attrs:{span:4}},[e._v("功能名称:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{placeholder:"请输入名称"},on:{input:e.funNameRep},model:{value:e.addFunInfo.funName,callback:function(t){e.$set(e.addFunInfo,"funName",t)},expression:"addFunInfo.funName"}})],1)],1),e._v(" "),a("div",{staticClass:"showPadding"},[a("el-col",{attrs:{span:4}},[e._v("ID:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-input",{attrs:{maxlength:6,placeholder:"请输入唯一ID(2或4或6位)"},on:{input:e.funIDRep},model:{value:e.addFunInfo.meta,callback:function(t){e.$set(e.addFunInfo,"meta",t)},expression:"addFunInfo.meta"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isFunMetaRepetSpan,expression:"isFunMetaRepetSpan"}],staticClass:"fontSizeSty"},[e._v("功能ID名称重复")])],1)],1),e._v(" "),a("div",{staticClass:"showPadding"},[a("el-col",{attrs:{span:4}},[e._v("在列表显示:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-radio",{attrs:{label:"1"},model:{value:e.addFunInfo.isShow,callback:function(t){e.$set(e.addFunInfo,"isShow",t)},expression:"addFunInfo.isShow"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.addFunInfo.isShow,callback:function(t){e.$set(e.addFunInfo,"isShow",t)},expression:"addFunInfo.isShow"}},[e._v("否")])],1)],1),e._v(" "),a("div",[a("el-col",{attrs:{span:4}},[e._v("是否限权:")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-radio",{attrs:{label:"1"},model:{value:e.addFunInfo.isgetUse,callback:function(t){e.$set(e.addFunInfo,"isgetUse",t)},expression:"addFunInfo.isgetUse"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.addFunInfo.isgetUse,callback:function(t){e.$set(e.addFunInfo,"isgetUse",t)},expression:"addFunInfo.isgetUse"}},[e._v("否")])],1)],1)])],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.FunctionVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveAddFunction}},[e._v("提交")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.manageTile,visible:e.useManageVisible,width:"50%"},on:{"update:visible":function(t){e.useManageVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.setPermissData,border:"",size:"mini","element-loading-text":"拼命加载中..."}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"功能名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.clickIndex!==t.$index?a("span",{staticClass:"clickSpanStyle"},[e._v(e._s(t.row.name))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"是否显示在列表"},scopedSlots:e._u([{key:"default",fn:function(t){return["总结中心"!=t.row.name&&"日报"!=t.row.name?a("el-switch",{directives:[{name:"show",rawName:"v-show",value:e.saveSetFun,expression:"saveSetFun"}],attrs:{"active-color":"#13ce66","inactive-color":"#999999"},on:{change:function(a){e.clickShowList(t.row,t.$index)}},model:{value:t.row.allshow,callback:function(a){e.$set(t.row,"allshow",a)},expression:"scope.row.allshow"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"是否限权"},scopedSlots:e._u([{key:"default",fn:function(t){return["总结中心"!=t.row.name&&"日报"!=t.row.name?a("el-switch",{directives:[{name:"show",rawName:"v-show",value:e.saveSetFun,expression:"saveSetFun"}],attrs:{"active-color":"#13ce66","inactive-color":"#999999"},on:{change:function(a){e.clickShowuse(t.row,t.$index)}},model:{value:t.row.isuse,callback:function(a){e.$set(t.row,"isuse",a)},expression:"scope.row.isuse"}}):e._e()]}}])})],1)],1)],1)},staticRenderFns:[]};var nn=a("vSla")(tn,an,!1,function(e){a("I0oz")},"data-v-5dbed063",null).exports,on={data:function(){return{userLocalInfo:null,isShow:!0,tableshow:!1,loading:!1,userpermission:null,userperadmin:{},dialogVisible:!1,userlevel:[],superior:[],userdepartment:[],seach:{sessionid:"",name:"",email:"",departmentId:"",level:"",pageId:0,pageSize:10,first:0},currentPage:1,pageSizes:[10,20,50],dataSize:0,pagesize:10,fbsData:[],ruleForm:{sessionid:"",email:"",pwd:"",name:"",departmentId:"",level:"",higherId:""},addSaveLoading:!1,clickGetUserInfo:null,clickJurisdiction:null,showSerch:!0,havedFunGroup:null,useManageVisible:!1,tableloading:!1,manageTile:null,setPermissData:null,saveAddUserInfo:null,addUserId:!1,manageUsers:!1}},mounted:function(){try{for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("05"==e.data[t].meta)for(var a=0;a<e.data[t].children.length;a++)if("0502"==e.data[t].children[a].meta)for(var n=0;n<e.data[t].children[a].children.length;n++)"050201"==e.data[t].children[a].children[n].meta?this.addUserId="0"!=e.data[t].children[a].children[n].show:"050202"==e.data[t].children[a].children[n].meta&&(this.manageUsers="0"!=e.data[t].children[a].children[n].show)}catch(e){}this.userLocalInfo=JSON.parse(localStorage.getItem("userperadmin"));var i=JSON.parse(localStorage.getItem("userperadmin"));i.admin?(this.userperadmin=i,this.ruleForm.sessionid=this.userperadmin.sessionid,this.seach.sessionid=this.userperadmin.sessionid,this.userpermission=this.userperadmin.admin.level,this.userpermission>2?this.isShow=!1:this.isShow=!0,this.secrch()):this.userperadmin={}},methods:{secrch:function(){var e=this;if(this.seach.email){if(!/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(this.seach.email))return void this.$message.error("输入邮箱格式不正确")}"0"===this.seach.departmentId&&(this.seach.departmentId=""),"0"===this.seach.level&&(this.seach.level=""),this.loading=!0;var t,a=Ne()(this.seach);(t=a,Pe.a.post(Fe+"getAdmin",t)).then(function(t){if(0===t.data.status)if(e.fbsData=t.data.adminList,e.fbsData.length<1)e.loading=!1,e.tableshow=!1;else{for(var a=0;a<e.fbsData.length;a++)e.fbsData[a].date=e.formatDate(e.fbsData[a].date),5===e.fbsData[a].departmentId?e.fbsData[a].departmentId="运营部":6===e.fbsData[a].departmentId?e.fbsData[a].departmentId="技术部":7===e.fbsData[a].departmentId&&(e.fbsData[a].departmentId="市场部"),1===e.fbsData[a].level?e.fbsData[a].level="一级账号":2===e.fbsData[a].level?e.fbsData[a].level="二级账号":3===e.fbsData[a].level&&(e.fbsData[a].level="三级账号");t.data.listSize?e.dataSize=parseFloat(t.data.listSize):e.dataSize=e.dataSize,e.loading=!1,e.tableshow=!0}else 1===t.data.status&&(e.tableshow=!1,e.$router.replace("/login"))})},addUser:function(){var e=this;this.ruleForm.email="",this.ruleForm.pwd="",this.ruleForm.name="",this.ruleForm.departmentId="",this.ruleForm.level="",this.ruleForm.higherId="",this.userdepartment=[],5===this.userperadmin.admin.departmentId?this.userdepartment.push({name:"运营部",id:5}):6===this.userperadmin.admin.departmentId?this.userdepartment.push({name:"技术部",id:6}):7===this.userperadmin.admin.departmentId&&this.userdepartment.push({name:"市场部",id:7}),this.userlevel=[],1===this.userperadmin.admin.level?this.userlevel=[{name:"二级账号",id:2},{name:"三级账号",id:3}]:this.userlevel=[{name:"三级账号",id:3}];var t,a={sessionid:this.userperadmin.sessionid};a=Ne()(a),(t=a,Pe.a.post(Fe+"AdminParameter",t)).then(function(t){0===t.data.status&&(e.superior=t.data.adminList,e.dialogVisible=!0),1===t.data.status&&e.$router.replace("/login")}).catch(function(t){e.$message.error("获取负责人信息失败")})},pageSizeChange:function(e){this.seach.pageSize=e,this.seach.first=1,this.secrch()},currentPageChange:function(e){this.seach.pageId=1*e-1,this.seach.first=1,this.secrch()},adminuser:function(e,t){this.clickGetUserInfo=e,this.havedFunGroup=null;var a={sessionid:this.userLocalInfo.sessionid},n=this;dt(a).then(function(e){0===e.data.status&&(n.havedFunGroup=e.data.permissionTypeList,n.showSerch=!1),1===e.data.status&&n.$router.replace("/login")})},readonlyuser:function(e,t){},deleteuser:function(e,t){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(""===t.ruleForm.email)t.$message.error("邮箱不能为空");else if(""===t.ruleForm.pwd)t.$message.error("密码不能为空");else if(""===t.ruleForm.name)t.$message.error("姓名不能为空");else if(""===t.ruleForm.departmentId)t.$message.error("职能部门不能为空");else if(""===t.ruleForm.level)t.$message.error("账号级别不能为空");else if(""===t.ruleForm.higherId)t.$message.error("上司不能为空");else if(t.ruleForm.email){if(!/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(t.ruleForm.email))return void t.$message.error("输入邮箱格式不正确");t.addSaveLoading=!0;var a=t,n=Ne()(a.ruleForm);(i=n,Pe.a.post(Fe+"addAdmin",i)).then(function(e){0===e.data.status&&(a.$message({message:e.data.statusMsg,type:"success"}),a.addSaveLoading=!1,a.dialogVisible=!1,a.secrch()),1===e.data.status&&(a.$router.replace("/login"),a.addSaveLoading=!1,a.dialogVisible=!1)}).catch(function(e){a.addSaveLoading=!1,a.dialogVisible=!1,a.$message.error("保存失败")})}var i})},clickFunGroup:function(e){this.tableloading=!0,this.manageTile=e.name;var t={sessionid:this.userLocalInfo.sessionid,adminid:this.clickGetUserInfo.id,type:e.id};this.saveAddUserInfo=t;var a,n=this;(a=t,Pe.a.post(Fe+"getAdminPermission",a)).then(function(e){if(0===e.data.status){n.setPermissData=e.data.adminPermissionList;for(var t=0;t<e.data.adminPermissionList.length;t++)n.setPermissData[t].show="0"!==e.data.adminPermissionList[t].show;n.tableloading=!1,n.useManageVisible=!0}1===e.data.status&&n.$router.replace("/login")})},clickShowuse:function(e,t){var a,n={sessionid:this.saveAddUserInfo.sessionid,type:this.saveAddUserInfo.type,adminid:this.saveAddUserInfo.adminid,id:e.id,name:e.name,show:e.show},i=this;(a=n,Pe.a.post(Fe+"addAdminPermission",a)).then(function(t){e.id=t.data.id,0===t.data.status&&i.$message({message:"修改"+e.name+"授权成功",type:"success"}),1===t.data.status&&i.$router.replace("/login")})}}},ln={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"UserControl"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSerch,expression:"!showSerch"}],staticClass:"header",staticStyle:{"text-align":"left"}},[a("el-button",{staticStyle:{border:"0px"},attrs:{size:"small"},nativeOn:{click:function(t){e.showSerch=!0}}},[a("i",{staticClass:"el-icon-back"}),e._v("  返回账号信息")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showSerch,expression:"showSerch"}],staticClass:"seachInfoFun"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:3,sm:3,md:4}},[a("el-input",{attrs:{placeholder:"姓名搜索"},model:{value:e.seach.name,callback:function(t){e.$set(e.seach,"name",t)},expression:"seach.name"}})],1),e._v(" "),a("el-col",{attrs:{xs:3,sm:3,md:4}},[a("el-input",{attrs:{placeholder:"邮箱搜索"},model:{value:e.seach.email,callback:function(t){e.$set(e.seach,"email",t)},expression:"seach.email"}})],1),e._v(" "),a("el-col",{attrs:{xs:4,sm:3,md:4}},[a("el-select",{attrs:{placeholder:"选择职能部门"},model:{value:e.seach.departmentId,callback:function(t){e.$set(e.seach,"departmentId",t)},expression:"seach.departmentId"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"市场部",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"运营部",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"技术部",value:"6"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:4,sm:3,md:4}},[a("el-select",{attrs:{placeholder:"选择账号等级"},model:{value:e.seach.level,callback:function(t){e.$set(e.seach,"level",t)},expression:"seach.level"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"一级账号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"二级账号",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"三级账号",value:"3"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:10,sm:8,md:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.secrch}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addUserId,expression:"addUserId"}],attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addUser}})],1)],1),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"90%"},attrs:{data:e.fbsData,border:"",size:"small","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentId",label:"职能部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"账号等级"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"创建时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"showTitle",label:"权限管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.manageUsers,expression:"manageUsers"}],attrs:{"close-transition":"",type:"text",size:"small"},on:{click:function(a){e.adminuser(t.row,t.$index)}}},[e._v("管理")])]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableshow,expression:"tableshow"}],staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"创建新用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"邮箱(账号)",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职能部门",prop:"departmentId"}},[a("el-col",{attrs:{span:10}},[a("el-select",{attrs:{placeholder:"选择职能部门",ali:""},model:{value:e.ruleForm.departmentId,callback:function(t){e.$set(e.ruleForm,"departmentId",t)},expression:"ruleForm.departmentId"}},e._l(e.userdepartment,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账号级别",prop:"level"}},[a("el-col",{attrs:{span:10}},[a("el-select",{attrs:{placeholder:"选择账号级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.userlevel,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"上司",prop:"higherId"}},[a("el-col",{attrs:{span:10}},[a("el-select",{attrs:{placeholder:"默认创建者"},model:{value:e.ruleForm.higherId,callback:function(t){e.$set(e.ruleForm,"higherId",t)},expression:"ruleForm.higherId"}},e._l(e.superior,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.addSaveLoading},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showSerch,expression:"!showSerch"}],staticClass:"fungroup"},e._l(e.havedFunGroup,function(t,n){return a("div",{staticClass:"havedGroup"},[a("el-button",{staticClass:"btnStyle",on:{click:function(a){e.clickFunGroup(t)}}},[e._v(e._s(t.name))])],1)})),e._v(" "),a("el-dialog",{attrs:{title:e.manageTile,visible:e.useManageVisible,width:"50%"},on:{"update:visible":function(t){e.useManageVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.setPermissData,border:"",size:"mini","element-loading-text":"拼命加载中..."}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"功能名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"clickSpanStyle"},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"className",label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{directives:[{name:"show",rawName:"v-show",value:"总结中心"!=t.row.name&&"日报"!=t.row.name,expression:"(scope.row.name !='总结中心')&&(scope.row.name !='日报')"}],attrs:{"active-color":"#13ce66","inactive-color":"#999999"},on:{change:function(a){e.clickShowuse(t.row,t.$index)}},model:{value:t.row.show,callback:function(a){e.$set(t.row,"show",a)},expression:"scope.row.show"}})]}}])})],1)],1)],1)},staticRenderFns:[]};var sn=a("vSla")(on,ln,!1,function(e){a("bQKG")},"data-v-2856d030",null).exports,rn={data:function(){return{userloginInfo:null,deleteStatus:!1,Statrloading:!1,company:"",chooseCompanyArry:[],cooperationType:"",waysOfCooperationArry:[{name:"供应商",id:1},{name:"客户",id:2}],contentOfCooperation:"",tableLoding:!1,fbsData:[],reviseVisible:!1,infoStatus:null,modelTitle:"",ruleForm:{company:"",ourCompanyId:"",abbreviation:"",bankAccount:"",myComponyBankNum:"",bank:"",myComponyOpenBank:"",dutyParagraph:"",myComponydutyNum:"",taxcode:"",myComponyTel:"",phone:"",myComponyAddress:"",address:"",myComponyInvoiceType:"",contacts:"",invoiceContentId:"",mobileno:"",email:"",pwd:"",cooperationContent:"",cooperationType:""},InvoiceContentOptions:[],rules:{company:[{required:!0,message:"公司名称为必填项",trigger:"change"}],bankAccount:[{required:!0,message:"银行账号为必填项",trigger:"change"}],abbreviation:[{required:!0,message:"公司简称为必填项",trigger:"change"}],ourCompanyId:[{required:!0,message:"我方公司名称为必选项",trigger:"change"}],bank:[{required:!0,message:"开户行为必填项",trigger:"change"}],dutyParagraph:[{required:!0,message:"税号为必填项",trigger:"change"}],taxcode:[{required:!0,message:"税收编码为必填项",trigger:"change"}],phone:[{required:!0,message:"公司电话为必填项",trigger:"change"}],address:[{required:!0,message:"公司地址为必填项",trigger:"change"}],contacts:[{required:!0,message:"联系人为必填项",trigger:"change"}],mobileno:[{required:!0,message:"联系人电话为必填项",trigger:"change"}],email:[{required:!0,message:"联系人邮箱为必填项",trigger:"change"},{type:"email",message:"联系人邮箱不合法",trigger:"change"}],pwd:[{required:!0,message:"账号初始密码为必填项",trigger:"change"}],cooperationContent:[{required:!0,message:"合作内容为必填项",trigger:"change"}],cooperationType:[{required:!0,message:"合作方式为必选项",trigger:"change"}],invoiceContentId:[{required:!0,message:"发票内容为必选项",trigger:"change"}]},selectways:[{name:"供应商",id:"48"},{name:"客户",id:"49"}],myComponyName:[{name:"上海麦广互娱文化传媒股份有限公司",id:"1"},{name:"上海麦广网络科技有限公司",id:"2"},{name:"霍尔果斯财马科技",id:"3"}]}},mounted:function(){try{for(var e=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),t=0;t<e.data.length;t++)if("06"==e.data[t].meta)for(var a=0;a<e.data[t].children.length;a++)if("0601"==e.data[t].children[a].meta)for(var n=0;n<e.data[t].children[a].children.length;n++)"060101"==e.data[t].children[a].children[n].meta&&(this.deleteStatus="0"!=e.data[t].children[a].children[n].show)}catch(e){}this.userloginInfo=JSON.parse(localStorage.getItem("userperadmin")),this.getSelections()},methods:{getSelections:function(){var e={sessionid:this.userloginInfo.sessionid};this.Statrloading=!0;var t=this;ut(e).then(function(e){0===e.data.status&&(t.chooseCompanyArry=e.data.reportforms_admin,t.Statrloading=!1,t.searchInfo()),1===e.data.status&&t.$router.replace("/login")})},focuschooseCompany:function(){this.company=""},focuswaysOfCooperation:function(){this.cooperationType=""},addComponyInfo:function(){this.addDialog(),this.infoStatus=0,this.ruleForm={company:"",ourCompanyId:"",bankAccount:"",abbreviation:"",myComponyBankNum:"",bank:"",myComponyOpenBank:"",dutyParagraph:"",myComponydutyNum:"",taxcode:"",myComponyTel:"",phone:"",myComponyAddress:"",address:"",myComponyInvoiceType:"",contacts:"",invoiceContentId:"",mobileno:"",email:"",pwd:"",cooperationContent:"",cooperationType:""},this.modelTitle="新增合作方账户信息",this.reviseVisible=!0},searchInfo:function(){var e={sessionid:this.userloginInfo.sessionid,company:this.company,cooperationType:this.cooperationType,cooperationContent:this.contentOfCooperation};this.tableLoding=!0;var t=this;ut(e).then(function(e){0===e.data.status&&(t.fbsData=e.data.reportforms_admin,t.InvoiceContentOptions=e.data.invoiceContentList,t.tableLoding=!1),1===e.data.status&&t.$router.replace("/login")})},addDialog:function(){var e=this;this.$nextTick(function(){try{e.$refs.ruleForm.resetFields()}catch(e){}})},closeDialog:function(e){var t=this;this.$nextTick(function(){t.$refs.ruleForm.resetFields(),document.getElementsByClassName("modelStyle")[0].scrollTop=0,e()})},chooseMycomony:function(e){var t,a={sessionid:this.userloginInfo.sessionid,ourCompanyId:e},n=this;(t=a,Pe.a.post(Fe+"getOurCompany",t)).then(function(e){0===e.data.status&&(n.ruleForm.myComponyBankNum=e.data.reportforms_admin[0].accountNo,n.ruleForm.myComponyOpenBank=e.data.reportforms_admin[0].bank,n.ruleForm.myComponydutyNum=e.data.reportforms_admin[0].taxpayerNo,n.ruleForm.myComponyTel=e.data.reportforms_admin[0].phone,n.ruleForm.myComponyAddress=e.data.reportforms_admin[0].address,n.ruleForm.myComponyInvoiceType=e.data.reportforms_admin[0].name,n.InvoiceContentOptions=e.data.appList),1===e.data.status&&n.$router.replace("/login")}).catch(function(e){})},reviseComponyInfo:function(e,t){this.infoStatus=1,this.ruleForm={id:e.id,company:e.company,ourCompanyId:e.ourCompanyId,abbreviation:e.abbreviation,bankAccount:e.bankAccount,myComponyBankNum:e.ourAccountNo,bank:e.bank,myComponyOpenBank:e.ourBank,dutyParagraph:e.dutyParagraph,myComponydutyNum:e.taxpayerNo,taxcode:e.taxcode,myComponyTel:e.ourPhone,phone:e.phone,myComponyAddress:e.ourAddress,address:e.address,myComponyInvoiceType:e.ourInvoiceType,contacts:e.contacts,invoiceContentId:parseInt(e.invoiceContentId),mobileno:e.mobileno,email:e.email,pwd:e.pwd,cooperationContent:e.cooperationContent,cooperationType:e.cooperationType},this.modelTitle="修改合作方账户信息",this.reviseVisible=!0},deleteRow:function(e,t){var a=this,n="是否删除 "+e.company+" (公司名称),删除后不可恢复,是否要删除?";this.$confirm(n,"提示",{}).then(function(){var t,n={sessionid:a.userloginInfo.sessionid,ruleForm:{id:e.id,company:e.company,contacts:e.contacts,mobileno:e.mobileno,cooperationType:e.cooperationType,cooperationContent:e.cooperationContent}},i=a;(t=n,Pe.a.post(Fe+"deletePartner",t)).then(function(e){0===e.data.status&&(i.$message({message:"删除数据成功",type:"success"}),i.searchInfo()),1===e.data.status&&i.$router.replace("/login")})}).catch(function(){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a,n={sessionid:t.userloginInfo.sessionid,infoStatus:t.infoStatus,ruleForm:t.ruleForm},i=t;(a=n,Pe.a.post(Fe+"addOrUpdatePartner",a)).then(function(e){0===e.data.status&&(i.$message({message:"提交保存成功",type:"success"}),document.getElementsByClassName("modelStyle")[0].scrollTop=0,i.reviseVisible=!1,i.searchInfo()),1===e.data.status&&i.$router.replace("/login")})})}}},cn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"公司名称"},on:{focus:e.focuschooseCompany},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},e._l(e.chooseCompanyArry,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.company}})}))],1),e._v(" "),a("el-col",{attrs:{span:3,offset:1}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"合作方式"},on:{focus:e.focuswaysOfCooperation},model:{value:e.cooperationType,callback:function(t){e.cooperationType=t},expression:"cooperationType"}},e._l(e.waysOfCooperationArry,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-input",{attrs:{clearable:"",size:"small",placeholder:"合作内容"},model:{value:e.contentOfCooperation,callback:function(t){e.contentOfCooperation=t},expression:"contentOfCooperation"}})],1),e._v(" "),a("el-col",{attrs:{span:4,offset:1}},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addComponyInfo}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"1rem"},attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchInfo}})],1)],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoding,expression:"tableLoding"}],staticStyle:{width:"90%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?480:120,border:"",size:"small","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobileno",label:"联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"合作方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cooperationContent",label:"合作内容"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.reviseComponyInfo(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-wrench"}),e._v("修改")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deleteStatus,expression:"deleteStatus"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteRow(t.row,t.$index)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"model"},[a("el-dialog",{attrs:{title:e.modelTitle,visible:e.reviseVisible,width:"60%","before-close":e.closeDialog},on:{"update:visible":function(t){e.reviseVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm modelStyle",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":!0,"label-width":"120px"}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司名称:",prop:"company"}},[a("el-input",{attrs:{clearable:"",size:"small",maxlength:20},model:{value:e.ruleForm.company,callback:function(t){e.$set(e.ruleForm,"company",t)},expression:"ruleForm.company"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"我方公司名称:",prop:"ourCompanyId"}},[a("el-select",{staticStyle:{width:"15rem"},attrs:{size:"small",placeholder:"请选择公司"},on:{change:function(t){e.chooseMycomony(e.ruleForm.ourCompanyId)}},model:{value:e.ruleForm.ourCompanyId,callback:function(t){e.$set(e.ruleForm,"ourCompanyId",t)},expression:"ruleForm.ourCompanyId"}},e._l(e.myComponyName,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司简称:",prop:"abbreviation"}},[a("el-input",{attrs:{clearable:"",size:"small",maxlength:20},model:{value:e.ruleForm.abbreviation,callback:function(t){e.$set(e.ruleForm,"abbreviation",t)},expression:"ruleForm.abbreviation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"银行账号:",prop:"myComponyBankNum"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.ruleForm.myComponyBankNum,callback:function(t){e.$set(e.ruleForm,"myComponyBankNum",t)},expression:"ruleForm.myComponyBankNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"银行账号:",prop:"bankAccount"}},[a("el-input",{attrs:{clearable:"",size:"small",maxlength:20},model:{value:e.ruleForm.bankAccount,callback:function(t){e.$set(e.ruleForm,"bankAccount",t)},expression:"ruleForm.bankAccount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"开户银行:",prop:"myComponyOpenBank"}},[a("el-input",{attrs:{type:"textarea",rows:2,size:"small",disabled:!0},model:{value:e.ruleForm.myComponyOpenBank,callback:function(t){e.$set(e.ruleForm,"myComponyOpenBank",t)},expression:"ruleForm.myComponyOpenBank"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"开户银行:",prop:"bank"}},[a("el-input",{attrs:{clearable:"",size:"small",maxlength:20},model:{value:e.ruleForm.bank,callback:function(t){e.$set(e.ruleForm,"bank",t)},expression:"ruleForm.bank"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"税号:",prop:"myComponydutyNum"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.ruleForm.myComponydutyNum,callback:function(t){e.$set(e.ruleForm,"myComponydutyNum",t)},expression:"ruleForm.myComponydutyNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"税号:",prop:"dutyParagraph"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.dutyParagraph,callback:function(t){e.$set(e.ruleForm,"dutyParagraph",t)},expression:"ruleForm.dutyParagraph"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司电话:",prop:"myComponyTel"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.ruleForm.myComponyTel,callback:function(t){e.$set(e.ruleForm,"myComponyTel",t)},expression:"ruleForm.myComponyTel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"税收编码:",prop:"taxcode"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.taxcode,callback:function(t){e.$set(e.ruleForm,"taxcode",t)},expression:"ruleForm.taxcode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司地址:",prop:"myComponyAddress"}},[a("el-input",{attrs:{type:"textarea",rows:2,size:"small",disabled:!0},model:{value:e.ruleForm.myComponyAddress,callback:function(t){e.$set(e.ruleForm,"myComponyAddress",t)},expression:"ruleForm.myComponyAddress"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司电话:",prop:"phone"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"发票类型:",prop:"myComponyInvoiceType"}},[a("el-input",{attrs:{size:"small",disabled:!0},model:{value:e.ruleForm.myComponyInvoiceType,callback:function(t){e.$set(e.ruleForm,"myComponyInvoiceType",t)},expression:"ruleForm.myComponyInvoiceType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公司地址:",prop:"address"}},[a("el-input",{attrs:{type:"textarea",rows:2,clearable:"",size:"small"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"发票内容:",prop:"invoiceContentId"}},[a("el-select",{staticStyle:{width:"11rem"},attrs:{clearable:"",size:"small",placeholder:"发票内容"},model:{value:e.ruleForm.invoiceContentId,callback:function(t){e.$set(e.ruleForm,"invoiceContentId",t)},expression:"ruleForm.invoiceContentId"}},e._l(e.InvoiceContentOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"联系人:",prop:"contacts"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.contacts,callback:function(t){e.$set(e.ruleForm,"contacts",t)},expression:"ruleForm.contacts"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"联系人电话:",prop:"mobileno"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.mobileno,callback:function(t){e.$set(e.ruleForm,"mobileno",t)},expression:"ruleForm.mobileno"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"联系人邮箱:",prop:"email"}},[a("el-input",{attrs:{type:"textarea",rows:2,clearable:"",size:"small"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"账号初始密码:",prop:"pwd"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"合作内容:",prop:"cooperationContent"}},[a("el-input",{attrs:{clearable:"",size:"small"},model:{value:e.ruleForm.cooperationContent,callback:function(t){e.$set(e.ruleForm,"cooperationContent",t)},expression:"ruleForm.cooperationContent"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"合作方式:",prop:"cooperationType"}},[a("el-select",{staticStyle:{width:"11rem"},attrs:{clearable:"",size:"small",placeholder:"合作方式"},model:{value:e.ruleForm.cooperationType,callback:function(t){e.$set(e.ruleForm,"cooperationType",t)},expression:"ruleForm.cooperationType"}},e._l(e.selectways,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]};var dn,un=a("vSla")(rn,cn,!1,function(e){a("Y63p")},"data-v-60a7eb4c",null).exports,pn=a("a3Yh"),hn=a.n(pn),fn={props:["billList","show"],data:function(){return{showTableIndex:0}},mounted:function(){this.billList.length>1&&this.exportExcel()},filters:{rewardPriceFormatter:function(e,t){return e.toString()}},methods:{indexFormatter:function(e){return e+1},closeBillPreview:function(){this.$emit("close")},getExplorer:function(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>=0?"ie":e.indexOf("Firefox")>=0?"Firefox":e.indexOf("Chrome")>=0?"Chrome":e.indexOf("Opera")>=0?"Opera":e.indexOf("Safari")>=0?"Safari":void 0},exportExcel:function(){if("ie"==this.getExplorer()){var e=document.getElementById(tableid),t=new ActiveXObject("Excel.Application"),a=t.Workbooks.Add(),n=a.Worksheets(1),i=document.body.createTextRange();i.moveToElementText(e),i.select(),i.execCommand("Copy"),n.Paste(),t.Visible=!0;try{var o=t.Application.GetSaveAsFilename("Excel.xls","Excel Spreadsheets (*.xls), *.xls")}catch(e){print("Nested catch caught "+e)}finally{a.SaveAs(o),a.Close(savechanges=!1),t.Quit(),t=null,dn=window.setInterval("Cleanup();",1)}}else this.tableToExcel(this.billList)},Cleanup:function(){window.clearInterval(dn),CollectGarbage()},tableToExcel:function(e){var t,a=this;(t=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},function(e){for(var n=0;n<e.length;n++){a.showTableIndex=n+1;var i=document.getElementById(e[n].id),o={worksheet:name||"Worksheet",table:i.innerHTML},l=document.getElementById("doExport"+n);l.href="data:application/vnd.ms-excel;base64,"+(s=t('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>table{margin: 0 auto;border-left: 1px solid #E8EBF4;border-top: 1px solid #E8EBF4;;font-size: 14px;border-collapse: collapse;}tr{border-top: 1px solid #EBEEF5;height: 30px;}td{border-bottom: 1px solid #CCD3E8;border-right: 1px solid #CCD3E8;text-align: left; padding-left: 20px;}.background{background: #E8EBF4text-align: center;}.item{padding-left: 30px;text-align: left;}</style></head><body><table>{table}</table></body></html>',o),window.btoa(unescape(encodeURIComponent(s)))),l.download=e[n].billName,l.click(),a.billList[n].downloadState=1}var s})(e)}}},mn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page downloadExcel-page"},[a("p",{staticClass:"title"},[a("a",{staticClass:"btn close",on:{click:e.closeBillPreview}},[a("i",{staticClass:"fa fa-close"}),e._v("关闭")]),e._v(" "),a("span",[e._v("账单预览")]),e._v(" "),1===e.billList.length?a("a",{staticClass:"btn",on:{click:e.exportExcel}},[a("i",{staticClass:"fa fa-download"}),e._v("下载")]):e._e(),e._v(" "),e._l(e.billList,function(e,t){return a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:t,staticClass:"btn",attrs:{id:"doExport"+t}})})],2),e._v(" "),e._l(e.billList,function(t,n){return a("table",{directives:[{name:"show",rawName:"v-show",value:1===e.billList.length,expression:"billList.length === 1"}],key:n,attrs:{id:t.id}},[e._m(0,!0),e._v(" "),a("tr",[a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("合作方名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.channelName))]),e._v(" "),a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("结算日期")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.payDate))])]),e._v(" "),a("tr",[a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("发票类型")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v("增值税专用发票")]),e._v(" "),a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("备注")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.demo))])]),e._v(" "),e._m(1,!0),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"2"}},[e._v(e._s(t.payMonth))]),e._v(" "),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[e._v(e._s(e._f("rewardPriceFormatter")(t.payRatio)))]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"2"}},[e._v(e._s(t.payData))]),e._v(" "),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"5"}},[e._v(e._s(t.payMount)+"元")])]),e._v(" "),e._m(2,!0),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("公司名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromCompany))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("公司名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toCompany))])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("纳税识别号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTaxNo)+" ")]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("纳税识别号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toTaxNo)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开户银行")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromBank))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("银行名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toBank))])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开户账号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromBankNo)+" ")]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("收款账户")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toBankNo)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("注册地址")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromAdress))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("税收编码")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toTaxNumber)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("电话")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTel))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2",rowspan:"8"}},[e._v("公司盖章")]),e._v(" "),a("td",{attrs:{colspan:"5",rowspan:"8"}})]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开票内容")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTicketContent))])]),e._v(" "),e._m(3,!0),e._v(" "),e._m(4,!0),e._v(" "),a("tr")])}),e._v(" "),e.billList.length>1?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.billList,size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"billName",label:"账单名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"下载状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{staticClass:"fa fa-check",class:{success:1==e.row.downloadState}})]}}])})],1):e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",{attrs:{rowspan:"3"}},[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center","font-size":"22px",height:"40px"},attrs:{colspan:"14"}},[this._v("上海麦广互娱文化传媒股份有限公司结算单")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[this._v("结算月份")]),this._v(" "),t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"5"}},[this._v("结算比例")]),this._v(" "),t("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[this._v("结算数据")]),this._v(" "),t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"5"}},[this._v("结算金额")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("开票信息")]),this._v(" "),t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("收款方信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("邮寄地址（账单请打印同发票一起寄出）")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"7",rowspan:"5"}})])}]};var vn,bn=[],gn=[],_n={components:{"download-excel":a("vSla")(fn,mn,!1,function(e){a("Y3Jw")},"data-v-e4fee63a",null).exports},data:function(){return{userperadmin:{},loading:!1,currentPosition:{page:1,menu:[{id:1,name:"渠道商账单"},{id:2,name:"账单详情"},{id:3,name:"账单预览"}]},distributorInfo:{selected:"",list:[]},firstChannelInfo:{selected:"",list:[]},paymentCompanyInfo:{selected:"",list:[]},appInfo:{selected:"",list:[]},adminInfo:{selected:"",list:[]},billStateInfo:{selected:"",list:[]},billAdminStatusList:[],rangeDate:{minDate:"",maxDate:""},isUpdateSelected:"",billTableInfo:{table:[],loading:!1,isRefreshBill:0},billDetailDialog:{visible:!1,loading:!1,form:{billId:"",proxyName:"",mainChannelName:"",adminname:"",payCompany:"",month:"",cost:"",status:"",action:""}},billDetailInfo:{loading:!1,curApp:"",curDistributor:"",curFirstChannel:"",proxyInfo:{},billInfo:{},balanceAccountList:{},billDetails:[],billStepList:[]},batchLoading:!1,billIdList:[],billLists:[],singleBill:[],errorBillList:[],billExcel:[],batchShenPiInfo:{visible:!1,action:"",data:[]}}},mounted:function(){this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getBillParameterFun()},filters:{getAppNameFilter:function(e){for(var t="",a=0;a<bn.length;a++)if(e==bn[a].id){t=bn[a].name;break}return t},tableStatusFilter:function(e){for(var t=e,a=0;a<gn.length;a++)if(gn[a].id==e){t=gn[a].name;break}return t},tableStatusStyleFilter:function(e){var t="";return 43==e.status&&(t="unChenck"),44==e.status&&(t="checking"),45==e.status&&(t="denail"),46==e.status&&(t="noPay"),47==e.status&&(t="pay"),1==e.isUpdate&&(t+=" isUpdate"),t},tableStatusStyleFilter1:function(e){return 43==e?"":44==e?"fa-spinner":45==e?"fa-close":46==e?"fa-check":47==e?"fa-check":void 0}},computed:{showPage1:function(){return 1===this.currentPosition.page},showPage2:function(){return 2===this.currentPosition.page},showPage3:function(){return 3===this.currentPosition.page},billDetailInfoTitle:function(){return this.billDetailInfo.curApp+"-"+this.billDetailInfo.curDistributor+"-"+this.billDetailInfo.curFirstChannel}},methods:(vn={indexFormatter:function(e){return e+1},batchShenPiFun:function(){0===this.batchShenPiInfo.data.length?this.toast("您未选择账单","warning"):this.batchShenPiInfo.visible=!0},doBatchShenPiFun:function(){var e=this;if(""!=this.batchShenPiInfo.action&&void 0!=this.batchShenPiInfo.action){var t="",a=this;this.batchShenPiInfo.data.forEach(function(e,n){n===a.batchShenPiInfo.data.length-1?t+=e.id:t+=e.id+","});var n,i={sessionid:this.userperadmin.sessionid,status:this.batchShenPiInfo.action,ids:t};(n=i,Pe.a.post(Fe+"batchUpdateBill",n)).then(function(t){0==t.data.status?(e.batchShenPiInfo.visible=!1,e.getBillFun()):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(e){})}else this.toast("请选择审批操作","error")},selectChange:function(e){this.batchShenPiInfo.data=e},selectedFun:function(e,t){if(0==t.isUpdate)return this.$refs.billTable.toggleRowSelection(t),void this.toast("您目前不能审核该账单","warning")},toggleCurrentMenu:function(e){e<this.currentPosition.page&&(this.currentPosition.page=e)},isUpdateSelectedChange:function(){this.getBillFun()},updateBillFun:function(e){var t,a=this,n={sessionid:this.userperadmin.sessionid,id:e.id};this.billTableInfo.loading=!0,(t=n,Pe.a.post(Fe+"updateBill",t)).then(function(e){a.billTableInfo.loading=!1,0===e.data.status||(1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error"))}).catch(function(e){a.billTableInfo.loading=!1})},updateBillState:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,id:this.billDetailDialog.form.billId,status:this.billDetailDialog.form.action};this.billDetailDialog.loading=!0,(e=a,Pe.a.post(Fe+"updateBillStatus",e)).then(function(e){t.billDetailDialog.loading=!1,0===e.data.status?(t.billDetailDialog.visible=!1,t.getBillFun()):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.billDetailDialog.loading=!1})},downloadBillExcel:function(e){this.billExcel=[],!0===e?(this.billExcel=this.billLists,this.currentPosition.page=3):(this.billExcel=this.singleBill,this.currentPosition.page=3)},closePreview:function(){this.currentPosition.page=1},previewBill:function(e){this.viewDetailFun(e,1)}},hn()(vn,"indexFormatter",function(e){return e+1}),hn()(vn,"tableAppFormatter",function(e,t,a){for(var n=a,i=this.appInfo.list,o=0;o<i.length;o++)if(i[o].id==a){n=i[o].name;break}return n}),hn()(vn,"tableStatusFormatter",function(e,t,a){for(var n=a,i=this.billStateInfo.list,o=0;o<i.length;o++)if(i[o].id==a){n=i[o].name;break}return n}),hn()(vn,"rewardPriceFormatter",function(e,t){if(e){var a=e.split(","),n=[],i=[];if(a.length<=1){var o=e.split("/");o.length>1?n.push(o[1]):n.push(a[0])}else this.editFcTypeData=a,a.forEach(function(e,t){var a=e.split("/");i.push({max:a[0],price:a[1]}),n[t]=0===t?"0 - "+a[0]+" : "+a[1]:parseInt(i[t-1].max)+1+" - "+a[0]+" : "+a[1]});return n}}),hn()(vn,"chineseDate",function(e){var t=e.split("-"),a=t[0]+"年",n=t[1]+"月";return t.length>2?a+n+(t[2]+"日"):a+n}),hn()(vn,"rangeDateFormatter",function(e,t,a){return void 0===e.maxdate?this.chineseDate(a):this.chineseDate(e.mindate)+" - "+this.chineseDate(e.maxdate)}),hn()(vn,"closePage2Fun",function(){this.currentPosition.page=1,this.billDetailInfo.proxyInfo={},this.billDetailInfo.billInfo={},this.billDetailInfo.balanceAccountList={},this.billDetailInfo.billDetails=[]}),hn()(vn,"openStateDialog",function(e){0!=e.isUpdate?(this.billDetailDialog.form={},this.billDetailDialog.visible=!0,this.billDetailDialog.form.billId=e.id,this.billDetailDialog.form.proxyName=e.proxyName,this.billDetailDialog.form.mainChannelName=e.mainChannelName,this.billDetailDialog.form.adminname=e.adminname,this.billDetailDialog.form.payCompany=e.payCompany,this.billDetailDialog.form.month=e.month,this.billDetailDialog.form.cost=e.cost,this.billDetailDialog.form.status=parseInt(e.status)):this.toast("您目前不能审核该账单","warning")}),hn()(vn,"getBillParameterFun",function(){var e,t=this,a={sessionid:this.userperadmin.sessionid};this.loading=!0,(e=a,Pe.a.post(Fe+"getBillParameter",e)).then(function(e){t.loading=!1,0===e.data.status?(t.distributorInfo.list=e.data.proxyNameList,t.firstChannelInfo.list=e.data.mainChannelNameList,t.paymentCompanyInfo.list=e.data.balanceAccountList,t.appInfo.list=e.data.appList,t.adminInfo.list=e.data.billAdminList,t.billStateInfo.list=e.data.billStatusList,t.billAdminStatusList=e.data.billAdminStatusList,bn=e.data.appList,gn=e.data.billStatusList):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading=!1})}),hn()(vn,"searchAction",function(){this.getBillFun()}),hn()(vn,"getBillFun",function(e){var t=this;if(this.rangeDate.minDate||(this.rangeDate.minDate=""),this.rangeDate.maxDate||(this.rangeDate.maxDate=""),""==this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""!=this.rangeDate.minDate||""==this.rangeDate.maxDate)if(this.rangeDate.minDate>this.rangeDate.maxDate)this.toast("起始月份不能大于终止月份","error");else{var a,n={sessionid:this.userperadmin.sessionid,proxyName:this.distributorInfo.selected,mainChannelName:this.firstChannelInfo.selected,payCompany:this.paymentCompanyInfo.selected,adminId:this.adminInfo.selected,appId:this.appInfo.selected,status:this.billStateInfo.selected,maxDate:wt(this.rangeDate.maxDate).substr(0,7),minDate:wt(this.rangeDate.minDate).substr(0,7)};this.billTableInfo.loading=!0,(a=n,Pe.a.post(Fe+"getBill",a)).then(function(e){if(t.billTableInfo.loading=!1,0===e.data.status){t.billTableInfo.isRefreshBill=e.data.isRefreshBill,t.billTableInfo.table=e.data.billList;var a=t;t.billIdList=[],t.billTableInfo.table&&t.billTableInfo.table.forEach(function(e){a.billIdList.push({id:e.id,billName:e.product})})}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error");t.loading=!1}).catch(function(e){t.billTableInfo.loading=!1})}else this.toast("请选择起始月份","error");else this.toast("请选择终止月份","error")}),hn()(vn,"getAppName",function(e){for(var t="",a=this.appInfo.list,n=0;n<a.length;n++)if(e==a[n].id){t=a[n].name;break}return t}),hn()(vn,"batchDownload",function(){if(""!=this.distributorInfo.selected||""!=this.firstChannelInfo.selected||""!=this.paymentCompanyInfo.selected||""!=this.adminInfo.selected||""!=this.appInfo.selected||""!=this.billStateInfo.selected||""!=this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""==this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""!=this.rangeDate.minDate||""==this.rangeDate.maxDate)if(this.rangeDate.minDate>this.rangeDate.maxDate)this.toast("起始月份不能大于终止月份","error");else{this.loading=!0,this.billLists=[],this.errorBillList=[];for(var e=0;e<this.billIdList.length;e++)e==this.billIdList.length-1?this.viewDetailFun(this.billIdList[e],2,1):this.viewDetailFun(this.billIdList[e],2)}else this.toast("请选择起始月份","error");else this.toast("请选择终止月份","error");else this.toast("请至少选择一个搜索条件","warning")}),hn()(vn,"viewDetailFun",function(e,t,a){var n=this;t||(this.currentPosition.page=2,this.billDetailInfo.curApp=this.getAppName(e.appId),this.billDetailInfo.curDistributor=e.proxyName,this.billDetailInfo.curFirstChannel=e.mainChannelName);var i,o={sessionid:this.userperadmin.sessionid,id:e.id};this.billDetailInfo.loading=!0,(i=o,Pe.a.post(Fe+"getBillDetails",i)).then(function(a){if(0===a.data.status)if(2===t){var i="";i=(r=a.data.bill.month.split("-"))[0]+"年"+r[1]+"月";var o="";bn.forEach(function(e){a.data.bill.appId==e.id&&(o=e.name)});try{n.billLists.push({id:"bill"+e.id,billName:a.data.bill.product,partnerName:a.data.proxy.company,payDate:a.data.bill.createTime,ticketType:"增值税专用发票",demo:o,payMonth:i,payData:a.data.billDetails[0].rewardSum,payRatio:a.data.billDetails[0].price,payMount:a.data.billDetails[0].cost2,fromCompany:a.data.balanceAccountList[0].company,fromTaxNo:a.data.balanceAccountList[0].taxpayerNo,fromBank:a.data.balanceAccountList[0].bank,fromBankNo:a.data.balanceAccountList[0].accountNo,fromAdress:a.data.balanceAccountList[0].address,fromTel:a.data.balanceAccountList[0].phone,fromTicketContent:"",toCompany:a.data.proxy.company,toTaxNo:a.data.proxy.dutyParagraph,toBank:a.data.proxy.bank,toBankNo:a.data.proxy.bankAccount,toTaxNumber:void 0!==a.data.proxy.taxNo?a.data.proxy.taxNo:"",downloadState:0}),n.billLists.length===n.billIdList.length-n.errorBillList.length&&n.downloadBillExcel(!0)}catch(t){n.errorBillList.push(e.id)}}else if(1===t){i="";i=(r=a.data.bill.month.split("-"))[0]+"年"+r[1]+"月",n.singleBill=[];o="";bn.forEach(function(e){a.data.bill.appId==e.id&&(o=e.name)}),n.singleBill.push({id:"bill"+e.id,billName:a.data.bill.product,channelName:a.data.bill.mainChannelName,partnerName:a.data.proxy.company,payDate:a.data.bill.createTime,ticketType:"增值税专用发票",demo:o,payMonth:i,payData:a.data.billDetails[0].rewardSum,payRatio:a.data.billDetails[0].price,payMount:a.data.billDetails[0].cost2,fromCompany:a.data.balanceAccountList[0].company,fromTaxNo:a.data.balanceAccountList[0].taxpayerNo,fromBank:a.data.balanceAccountList[0].bank,fromBankNo:a.data.balanceAccountList[0].accountNo,fromAdress:a.data.balanceAccountList[0].address,fromTel:a.data.balanceAccountList[0].phone,fromTicketContent:"",toCompany:a.data.proxy.company,toTaxNo:a.data.proxy.dutyParagraph,toBank:a.data.proxy.bank,toBankNo:a.data.proxy.bankAccount,toTaxNumber:void 0!==a.data.proxy.taxNo?a.data.proxy.taxNo:"",downloadState:0}),n.downloadBillExcel()}else{n.billDetailInfo.proxyInfo=a.data.proxy,n.billDetailInfo.billInfo=a.data.bill,n.billDetailInfo.balanceAccountList=a.data.balanceAccountList[0],n.billDetailInfo.billDetails=a.data.billDetails;var l=a.data.billDetails.slice(0),s=n;l.forEach(function(e,t,a){e.price=s.rewardPriceFormatter(e.price)}),n.billDetailInfo.billDetails=l,n.billDetailInfo.billStepList=a.data.billStepList;var r;i="";i=(r=a.data.bill.month.split("-"))[0]+"年"+r[1]+"月",n.singleBill=[],n.singleBill.push({id:"bill"+e.id,billName:a.data.bill.product,channelName:a.data.bill.mainChannelName,partnerName:a.data.proxy.company,payDate:a.data.bill.createTime,ticketType:"增值税专用发票",demo:"",payMonth:i,payData:a.data.billDetails[0].rewardSum,payRatio:a.data.billDetails[0].price,payMount:a.data.billDetails[0].cost2,fromCompany:a.data.balanceAccountList[0].company,fromTaxNo:a.data.balanceAccountList[0].taxpayerNo,fromBank:a.data.balanceAccountList[0].bank,fromBankNo:a.data.balanceAccountList[0].accountNo,fromAdress:a.data.balanceAccountList[0].address,fromTel:a.data.balanceAccountList[0].phone,fromTicketContent:"",toCompany:a.data.proxy.company,toTaxNo:a.data.proxy.dutyParagraph,toBank:a.data.proxy.bank,toBankNo:a.data.proxy.bankAccount,toTaxNumber:void 0!==a.data.proxy.taxNo?a.data.proxy.taxNo:"",downloadState:0})}else 1===a.data.status?n.$router.replace("/login"):n.toast(a.data.statusMsg,"error");n.loading=!1,n.billDetailInfo.loading=!1}).catch(function(e){n.loading=!1,n.billDetailInfo.loading=!1})}),hn()(vn,"toast",function(e,t){this.$message({type:t,message:e})}),vn)},yn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page distributor-bill"},[a("div",{staticClass:"bread-nav"},[a("span",{staticClass:"current-text"},[e._v("当前位置：")]),e._v(" "),e._l(e.currentPosition.menu,function(t,n){return e.currentPosition.page>=t.id?a("span",{class:{menuActive:e.currentPosition.page>t.id},on:{click:function(a){e.toggleCurrentMenu(t.id)}}},[n>0?a("span",[e._v(">")]):e._e(),e._v(" "+e._s(t.name))]):e._e()})],2),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPage1,expression:"showPage1"}],staticClass:"page1"},[a("el-row",{staticClass:"search-wrapper"},[a("el-col",{staticClass:"handler-panel",attrs:{xs:24,sm:20}},[a("el-col",{attrs:{xs:24,sm:20}},[a("el-select",{staticClass:"px360W mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择渠道商"},model:{value:e.distributorInfo.selected,callback:function(t){e.$set(e.distributorInfo,"selected",t)},expression:"distributorInfo.selected"}},e._l(e.distributorInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{staticClass:"px360W mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择付款公司"},model:{value:e.paymentCompanyInfo.selected,callback:function(t){e.$set(e.paymentCompanyInfo,"selected",t)},expression:"paymentCompanyInfo.selected"}},e._l(e.paymentCompanyInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.company}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择一级渠道"},model:{value:e.firstChannelInfo.selected,callback:function(t){e.$set(e.firstChannelInfo,"selected",t)},expression:"firstChannelInfo.selected"}},e._l(e.firstChannelInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择产品"},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.adminInfo.selected,callback:function(t){e.$set(e.adminInfo,"selected",t)},expression:"adminInfo.selected"}},e._l(e.adminInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.adminname,value:e.adminId}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择账单状态"},model:{value:e.billStateInfo.selected,callback:function(t){e.$set(e.billStateInfo,"selected",t)},expression:"billStateInfo.selected"}},e._l(e.billStateInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("起始月份：")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"起始月份"},model:{value:e.rangeDate.minDate,callback:function(t){e.$set(e.rangeDate,"minDate",t)},expression:"rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("终止月份：")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"终止月份"},model:{value:e.rangeDate.maxDate,callback:function(t){e.$set(e.rangeDate,"maxDate",t)},expression:"rangeDate.maxDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:4}},[a("button",{staticClass:"btn primary",on:{click:e.searchAction}},[a("i",{staticClass:"fa fa-search"}),e._v("搜索")])])],1),e._v(" "),a("el-col",{staticClass:"btn-panel",attrs:{xs:24,sm:4}},[a("button",{staticClass:"btn primary download",on:{click:e.batchDownload}},[a("i",{directives:[{name:"loading",rawName:"v-loading",value:e.batchLoading,expression:"batchLoading"}],staticClass:"fa fa-cloud-download"})]),e._v(" "),a("button",{staticClass:"btn primary download",on:{click:e.batchShenPiFun}},[a("i",{staticClass:"fa fa-check-square-o",attrs:{"aria-hidden":"true"}})])])],1),e._v(" "),a("div",{staticClass:"table-wrapper tableMinHeight"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.billTableInfo.loading,expression:"billTableInfo.loading"}],ref:"billTable",staticStyle:{width:"100%"},attrs:{data:e.billTableInfo.table,size:"small",height:"90%",border:""},on:{"selection-change":e.selectChange,select:e.selectedFun}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"账单ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"产品",formatter:e.tableAppFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminname",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proxyName",label:"渠道商",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mainChannelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payCompany",label:"付款公司",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"归属期间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"含税成本金额(元)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"生成时间",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"tableA",class:e._f("tableStatusStyleFilter")(t.row),on:{click:function(a){e.openStateDialog(t.row)}}},[a("i",{staticClass:"fa",class:e._f("tableStatusStyleFilter1")(t.row.status)}),e._v("\r\n\t                \t"+e._s(e._f("tableStatusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账单详情",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewDetailFun(t.row)}}},[e._v("明细")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.previewBill(t.row)}}},[e._v("预览")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.billTableInfo.isRefreshBill&&1==t.row.isUpdate,expression:"billTableInfo.isRefreshBill == 1 && scope.row.isUpdate == 1"}],attrs:{type:"text",size:"small"},on:{click:function(a){e.updateBillFun(t.row)}}},[e._v("重跑")])]}}])})],1)],1)],1)]),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPage2,expression:"showPage2"},{name:"loading",rawName:"v-loading",value:e.billDetailInfo.loading,expression:"billDetailInfo.loading"}],staticClass:"page2 form-wrapper"},[a("div",{staticClass:"page-title"},[a("p",[e._v(e._s(e.billDetailInfoTitle)+" 账单详情")]),e._v(" "),a("p",{staticClass:"small"},[e._v("（产品名称 - 渠道商名称 - 一级渠道名称）")]),e._v(" "),a("button",{staticClass:"btn primary download",on:{click:e.downloadBillExcel}},[a("i",{staticClass:"fa fa-cloud-download"})]),e._v(" "),a("span",{staticClass:"back",on:{click:e.closePage2Fun}},[a("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})])]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"block distributorInfo",attrs:{sx:24,sm:12}},[a("div",{staticClass:"block-title"},[a("span",[e._v("渠道商信息")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"proxyName"}},[e._v("渠道商：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.company,expression:"billDetailInfo.proxyInfo.company"}],attrs:{type:"text",id:"proxyName",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.company},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bankAccount"}},[e._v("银行账户：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.bankAccount,expression:"billDetailInfo.proxyInfo.bankAccount"}],attrs:{type:"text",id:"bankAccount",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.bankAccount},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"bankAccount",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bank"}},[e._v("开户行：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.bank,expression:"billDetailInfo.proxyInfo.bank"}],attrs:{type:"text",id:"bank",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.bank},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.dutyParagraph,expression:"billDetailInfo.proxyInfo.dutyParagraph"}],attrs:{type:"text",id:"dutyParagraph",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.dutyParagraph},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"dutyParagraph",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税收编码：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.taxNo,expression:"billDetailInfo.proxyInfo.taxNo"}],attrs:{type:"text",id:"dutyParagraph",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.taxNo},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"taxNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"phone"}},[e._v("公司电话：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.proxyInfo.phone,expression:"billDetailInfo.proxyInfo.phone"}],attrs:{type:"text",id:"phone",readonly:"true"},domProps:{value:e.billDetailInfo.proxyInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.proxyInfo,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group textarea-group"},[a("label",{attrs:{for:"address"}},[e._v("公司地址：")]),e._v(" "),a("textarea",{attrs:{rows:"2",disabled:"true"}},[e._v(e._s(e.billDetailInfo.proxyInfo.address))])])])]),e._v(" "),a("el-col",{staticClass:"block companyInfo",attrs:{sx:24,sm:12}},[a("div",{staticClass:"block-title"},[a("span",[e._v("付款公司信息")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"company"}},[e._v("公司名称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccountList.company,expression:"billDetailInfo.balanceAccountList.company"}],attrs:{type:"text",id:"company",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccountList.company},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccountList,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"accountNo"}},[e._v("银行账号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccountList.accountNo,expression:"billDetailInfo.balanceAccountList.accountNo"}],attrs:{type:"text",id:"accountNo",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccountList.accountNo},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccountList,"accountNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bank"}},[e._v("开户行：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccountList.bank,expression:"billDetailInfo.balanceAccountList.bank"}],attrs:{type:"text",id:"bank",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccountList.bank},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccountList,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"taxpayerNo"}},[e._v("税号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccountList.taxpayerNo,expression:"billDetailInfo.balanceAccountList.taxpayerNo"}],attrs:{type:"text",id:"taxpayerNo",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccountList.taxpayerNo},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccountList,"taxpayerNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"phone"}},[e._v("公司电话：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccountList.phone,expression:"billDetailInfo.balanceAccountList.phone"}],attrs:{type:"text",id:"phone",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccountList.phone},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccountList,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group textarea-group"},[a("label",{attrs:{for:"address"}},[e._v("公司地址：")]),e._v(" "),a("textarea",{attrs:{rows:"2",disabled:"true"}},[e._v(e._s(e.billDetailInfo.balanceAccountList.address))])])])])],1),e._v(" "),a("el-row",{staticClass:"block",attrs:{gutter:20}},[a("el-col",{staticClass:"distributorInfo",attrs:{sx:24}},[a("div",{staticClass:"block-title"},[a("span",[e._v("账单信息")])]),e._v(" "),a("el-row",{staticClass:"content"},[a("el-col",{staticClass:"block",attrs:{sx:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"appId"}},[e._v("产品名称：")]),e._v(" "),a("input",{attrs:{type:"text",id:"appId",readonly:"true"},domProps:{value:e._f("getAppNameFilter")(e.billDetailInfo.billInfo.appId)}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"adminname"}},[e._v("负责人：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.billInfo.adminname,expression:"billDetailInfo.billInfo.adminname"}],attrs:{type:"text",id:"adminname",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.adminname},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.billInfo,"adminname",t.target.value)}}})])]),e._v(" "),a("el-col",{staticClass:"block",attrs:{sx:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cost"}},[e._v("申请金额(元)：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.billInfo.cost,expression:"billDetailInfo.billInfo.cost"}],attrs:{type:"text",id:"cost",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.cost},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.billInfo,"cost",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"month"}},[e._v("归属期间：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.billInfo.month,expression:"billDetailInfo.billInfo.month"}],attrs:{type:"text",id:"month",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.month},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.billInfo,"month",t.target.value)}}})])])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"block",attrs:{gutter:20}},[a("el-col",{staticClass:"distributorInfo",attrs:{sx:24}},[a("div",{staticClass:"block-title"},[a("span",[e._v("详细信息")])]),e._v(" "),a("div",{staticClass:"content table-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.billDetailInfo.billDetails,size:"small",height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardType",label:"分成方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"分成价格",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.price,function(t){return a("p",[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"cost2",label:"含税成本金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardSum",label:"推广数据"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"归属期间(账期)",formatter:e.rangeDateFormatter,width:"220"}})],1)],1)])],1),e._v(" "),a("el-row",{staticClass:"block",attrs:{gutter:20}},[a("el-col",{staticClass:"distributorInfo",attrs:{sx:24}},[a("div",{staticClass:"block-title"},[a("span",[e._v("审批路径")])]),e._v(" "),a("div",{staticClass:"content table-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.billDetailInfo.billStepList,size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"流程",width:"80",align:"center",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"审核人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"审核时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核状态",align:"center"}})],1)],1)])],1),e._v(" "),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn primary",on:{click:e.closePage2Fun}},[e._v("关闭")])])],1)]),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[e.showPage3?a("div",{staticClass:"page3 previewBill"},[a("download-excel",{attrs:{billList:e.billExcel},on:{close:e.closePreview}})],1):e._e()]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.billDetailDialog.loading,expression:"billDetailDialog.loading"}],attrs:{title:"修改渠道账单状态",visible:e.billDetailDialog.visible,width:"550px",center:""},on:{"update:visible":function(t){e.$set(e.billDetailDialog,"visible",t)}}},[a("form",{staticClass:"form-wrapper"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"proxyName"}},[e._v("渠道商：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.proxyName,expression:"billDetailDialog.form.proxyName"}],attrs:{type:"text",id:"proxyName",readonly:"true"},domProps:{value:e.billDetailDialog.form.proxyName},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"proxyName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"channelName"}},[e._v("渠道名称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.mainChannelName,expression:"billDetailDialog.form.mainChannelName"}],attrs:{type:"text",id:"channelName",readonly:"true"},domProps:{value:e.billDetailDialog.form.mainChannelName},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"mainChannelName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"admin"}},[e._v("负责人：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.adminname,expression:"billDetailDialog.form.adminname"}],attrs:{type:"text",id:"admin",readonly:"true"},domProps:{value:e.billDetailDialog.form.adminname},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"adminname",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"payCompany"}},[e._v("付款公司：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.payCompany,expression:"billDetailDialog.form.payCompany"}],attrs:{type:"text",id:"payCompany",readonly:"true"},domProps:{value:e.billDetailDialog.form.payCompany},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"payCompany",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"month"}},[e._v("归属期间：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.month,expression:"billDetailDialog.form.month"}],attrs:{type:"text",id:"month",readonly:"true"},domProps:{value:e.billDetailDialog.form.month},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"month",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cost"}},[e._v("含税成本金额(元)：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.cost,expression:"billDetailDialog.form.cost"}],attrs:{type:"text",id:"cost",readonly:"true"},domProps:{value:e.billDetailDialog.form.cost},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"cost",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"status"}},[e._v("账单当前状态：")]),e._v(" "),a("input",{attrs:{type:"text",id:"status",readonly:"true"},domProps:{value:e._f("tableStatusFilter")(e.billDetailDialog.form.status)}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"billState"}},[e._v("审批操作：")]),e._v(" "),a("el-select",{staticClass:"mrgB billState",attrs:{size:"small",filterable:"","default-first-option":"",placeholder:"选择账单状态"},model:{value:e.billDetailDialog.form.action,callback:function(t){e.$set(e.billDetailDialog.form,"action",t)},expression:"billDetailDialog.form.action"}},e._l(e.billAdminStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.billDetailDialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateBillState}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"批量审批",center:"",width:"400",visible:e.batchShenPiInfo.visible},on:{"update:visible":function(t){e.$set(e.batchShenPiInfo,"visible",t)}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.batchShenPiInfo.data,height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"appId",label:"产品",formatter:e.tableAppFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminname",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proxyName",label:"渠道商",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mainChannelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"payCompany",label:"付款公司",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"归属期间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"含税成本金额(元)",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"生成时间",width:"90"}})],1),e._v(" "),a("div",{staticClass:"input-group",staticStyle:{"text-align":"center","margin-top":"10px"}},[a("label",{attrs:{for:"billState"}},[e._v("审批操作：")]),e._v(" "),a("el-select",{staticClass:"mrgB billState",attrs:{size:"small",filterable:"","default-first-option":"",placeholder:"选择账单状态"},model:{value:e.batchShenPiInfo.action,callback:function(t){e.$set(e.batchShenPiInfo,"action",t)},expression:"batchShenPiInfo.action"}},e._l(e.billAdminStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.batchShenPiInfo.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doBatchShenPiFun}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var In,Cn=a("vSla")(_n,yn,!1,function(e){a("U4Bn"),a("cjMj")},"data-v-3d502942",null).exports,xn={props:["billList","show"],data:function(){return{showTableIndex:0}},mounted:function(){this.billList.length>1&&this.exportExcel()},methods:{indexFormatter:function(e){return e+1},closeBillPreview:function(){this.$emit("close")},getExplorer:function(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>=0?"ie":e.indexOf("Firefox")>=0?"Firefox":e.indexOf("Chrome")>=0?"Chrome":e.indexOf("Opera")>=0?"Opera":e.indexOf("Safari")>=0?"Safari":void 0},exportExcel:function(){if("ie"==this.getExplorer()){var e=document.getElementById(tableid),t=new ActiveXObject("Excel.Application"),a=t.Workbooks.Add(),n=a.Worksheets(1),i=document.body.createTextRange();i.moveToElementText(e),i.select(),i.execCommand("Copy"),n.Paste(),t.Visible=!0;try{var o=t.Application.GetSaveAsFilename("Excel.xls","Excel Spreadsheets (*.xls), *.xls")}catch(e){print("Nested catch caught "+e)}finally{a.SaveAs(o),a.Close(savechanges=!1),t.Quit(),t=null,In=window.setInterval("Cleanup();",1)}}else this.tableToExcel(this.billList)},Cleanup:function(){window.clearInterval(In),CollectGarbage()},tableToExcel:function(e){var t,a=this;(t=function(e,t){return e.replace(/{(\w+)}/g,function(e,a){return t[a]})},function(e){for(var n=0;n<e.length;n++){a.showTableIndex=n+1;var i=document.getElementById(e[n].id),o={worksheet:name||"Worksheet",table:i.innerHTML},l=document.getElementById("doExport"+n);l.href="data:application/vnd.ms-excel;base64,"+(s=t('<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>table{margin: 0 auto;border-left: 1px solid #E8EBF4;border-top: 1px solid #E8EBF4;;font-size: 14px;border-collapse: collapse;}tr{border-top: 1px solid #EBEEF5;height: 30px;}td{border-bottom: 1px solid #CCD3E8;border-right: 1px solid #CCD3E8;text-align: left; padding-left: 20px;}.background{background: #E8EBF4text-align: center;}.item{padding-left: 30px;text-align: left;}</style></head><body><table>{table}</table></body></html>',o),window.btoa(unescape(encodeURIComponent(s)))),l.download=e[n].billName,l.click(),a.billList[n].downloadState=1}var s})(e)}}},Dn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page downloadExcel-page"},[a("p",{staticClass:"title"},[a("a",{staticClass:"btn close",on:{click:e.closeBillPreview}},[a("i",{staticClass:"fa fa-close"}),e._v("关闭")]),e._v(" "),a("span",[e._v("账单预览")]),e._v(" "),1===e.billList.length?a("a",{staticClass:"btn",on:{click:e.exportExcel}},[a("i",{staticClass:"fa fa-download"}),e._v("下载")]):e._e(),e._v(" "),e._l(e.billList,function(e,t){return a("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:t,staticClass:"btn",attrs:{id:"doExport"+t}})})],2),e._v(" "),e._l(e.billList,function(t,n){return a("table",{directives:[{name:"show",rawName:"v-show",value:1===e.billList.length,expression:"billList.length === 1"}],key:n,attrs:{id:t.id}},[e._m(0,!0),e._v(" "),a("tr",[a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("合作方名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.partnerName))]),e._v(" "),a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("结算日期")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.payDate))])]),e._v(" "),a("tr",[a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("发票类型")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v("增值税专用发票")]),e._v(" "),a("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"left"},attrs:{colspan:"2"}},[e._v("备注")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.demo))])]),e._v(" "),e._m(1,!0),e._v(" "),a("tr",[a("td",{staticStyle:{"padding-left":"30px","text-align":"center"},attrs:{colspan:"7"}},[e._v(e._s(t.payMonth))]),e._v(" "),a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"7"}},[e._v(e._s(t.payMount)+"元")])]),e._v(" "),e._m(2,!0),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("公司名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromCompany))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("公司名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toCompany))])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("纳税识别号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTaxNo)+" ")]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("纳税识别号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toTaxNo)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开户银行")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromBank))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("银行名称")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toBank))])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开户账号")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromBankNo)+" ")]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("收款账户")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toBankNo)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("注册地址")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromAdress))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("税收编码")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.toTaxNumber)+" ")])]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("电话")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTel))]),e._v(" "),a("td",{staticClass:"item",attrs:{colspan:"2",rowspan:"8"}},[e._v("公司盖章")]),e._v(" "),a("td",{attrs:{colspan:"5",rowspan:"8"}})]),e._v(" "),a("tr",[a("td",{staticClass:"item",attrs:{colspan:"2"}},[e._v("开票内容")]),e._v(" "),a("td",{staticStyle:{"padding-left":"30px"},attrs:{colspan:"5"}},[e._v(e._s(t.fromTicketContent))])]),e._v(" "),e._m(3,!0),e._v(" "),e._m(4,!0),e._v(" "),a("tr")])}),e._v(" "),e.billList.length>1?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.billList,size:"small",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"billName",label:"账单名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"下载状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("i",{staticClass:"fa fa-check",class:{success:1==e.row.downloadState}})]}}])})],1):e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("tr",{attrs:{rowspan:"3"}},[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center","font-size":"22px",height:"40px"},attrs:{colspan:"14"}},[this._v("上海麦广互娱文化传媒股份有限公司结算单")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background item",staticStyle:{background:"#E8EBF4","padding-left":"30px","text-align":"center"},attrs:{colspan:"7"}},[this._v("结算月份")]),this._v(" "),t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("结算金额")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("开票信息")]),this._v(" "),t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("收款方信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{staticClass:"background",staticStyle:{background:"#E8EBF4","text-align":"center"},attrs:{colspan:"7"}},[this._v("邮寄地址（账单请打印同发票一起寄出）")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",{attrs:{colspan:"7",rowspan:"5"}})])}]};var wn=[],Sn={components:{"download-excel":a("vSla")(xn,Dn,!1,function(e){a("VGth")},"data-v-18cc9450",null).exports},data:function(){return{userperadmin:"",pageLoading:!1,currentPosition:{page:1,menu:[{id:1,name:"合作方账单"},{id:2,name:"账单详情"},{id:3,name:"账单预览"}]},partnerInfo:{selected:"",list:[]},companyInfo:{selected:"",list:[]},appInfo:{selected:"",list:[]},cooperationInfo:{selected:"",list:[]},billStateInfo:{selected:"",list:[]},billAdminStatusList:[],rangeDate:{minDate:"",maxDate:""},billTableInfo:{loading:!1,table:[]},billDetailDialog:{visible:!1,loading:!1,form:{billId:"",company:"",cooperationType:"",ourCompany:"",month:"",cost:"",actualCost:"",status:"",action:""}},billDetailInfo:{loading:!1,curApp:"",curPartner:"",partner:{},billInfo:{},balanceAccount:{},billDetail:[],billStepList:[],cooperationType:""},batchLoading:!1,billLists:[],singleBill:[],billExcel:[]}},mounted:function(){this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getSearchParams()},filters:{tableStatusFilter:function(e){for(var t=e,a=0;a<wn.length;a++)if(wn[a].id==e){t=wn[a].name;break}return t},tableStatusStyleFilter:function(e){var t="";return 55==e.status&&(t="unChenck"),56==e.status&&(t="checking"),57==e.status&&(t="getMoney"),58==e.status&&(t="pay"),1==e.isUpdate&&(t+=" isUpdate"),t},tableStatusStyleFilter1:function(e){return 55==e?"":56==e?"fa-spinner":57==e?"fa-check":58==e?"fa-check-square-o":void 0}},computed:{showPage1:function(){return 1===this.currentPosition.page},showPage2:function(){return 2===this.currentPosition.page},showPage3:function(){return 3===this.currentPosition.page},billDetailInfoTitle:function(){return this.billDetailInfo.curApp+"-"+this.billDetailInfo.curPartner},cooperationType:function(){return"供应商"==this.billDetailInfo.cooperationType},actualCostModify:function(){return 55!=this.billDetailDialog.form.status},canSelectedStatus:function(){var e=[],t=this;return this.billStateInfo.list.forEach(function(a){a.id>t.billDetailDialog.form.status&&e.push(a)}),e}},methods:{toggleCurrentMenu:function(e){e<this.currentPosition.page&&(this.currentPosition.page=e)},closePage2Fun:function(){this.currentPosition.page=1,this.billDetailInfo.proxyInfo={},this.billDetailInfo.billInfo={},this.billDetailInfo.balanceAccountList={},this.billDetailInfo.billDetails=[]},rangeDateFormatter:function(e,t,a){return void 0===e.maxdate?this.chineseDate(a):this.chineseDate(e.mindate)+" - "+this.chineseDate(e.maxdate)},getSearchParams:function(){var e,t=this,a={sessionid:this.userperadmin.sessionid};this.pageLoading=!0,(e=a,Pe.a.post(Fe+"getPartnerBillPara",e)).then(function(e){t.pageLoading=!1,0===e.data.status?(t.appInfo.list=e.data.appList,t.partnerInfo.list=e.data.partnerList,t.companyInfo.list=e.data.balanceAccountList,t.cooperationInfo.list=e.data.payList,t.billStateInfo.list=e.data.billStatusList,e.data.appList,wn=e.data.billStatusList):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.pageLoading=!1})},searchAction:function(){this.getBillList()},batchDownload:function(){""!=this.partnerInfo.selected||""!=this.companyInfo.selected||""!=this.appInfo.selected||""!=this.cooperationInfo.selected||""!=this.billStateInfo.selected||""!=this.rangeDate.minDate||""!=this.rangeDate.maxDate?""==this.rangeDate.minDate||""!=this.rangeDate.maxDate?""!=this.rangeDate.minDate||""==this.rangeDate.maxDate?this.rangeDate.minDate>this.rangeDate.maxDate?this.toast("起始月份不能大于终止月份","error"):(this.billTableInfo.loading=!0,this.getExportInfo()):this.toast("请选择起始月份","error"):this.toast("请选择终止月份","error"):this.toast("请至少选择一个搜索条件","warning")},downloadBillExcel:function(e){this.billExcel=[],!0===e?(this.billExcel=this.billLists,this.billTableInfo.loading=!1,this.currentPosition.page=3):(this.billExcel=this.singleBill,this.batchLoading=!1,this.currentPosition.page=3)},getBillList:function(){var e=this;if(this.rangeDate.minDate||(this.rangeDate.minDate=""),this.rangeDate.maxDate||(this.rangeDate.maxDate=""),""==this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""!=this.rangeDate.minDate||""==this.rangeDate.maxDate)if(this.rangeDate.minDate>this.rangeDate.maxDate)this.toast("起始月份不能大于终止月份","error");else{var t,a={sessionid:this.userperadmin.sessionid,cooperationCompany:this.partnerInfo.selected,payCompany:this.companyInfo.selected,appId:this.appInfo.selected,cooperationType:this.cooperationInfo.selected,status:this.billStateInfo.selected,minDate:wt(this.rangeDate.minDate).substr(0,7),maxDate:wt(this.rangeDate.maxDate).substr(0,7)};this.billTableInfo.loading=!0,(t=a,Pe.a.post(Fe+"getPartnerBill",t)).then(function(t){e.billTableInfo.loading=!1,0===t.data.status?e.billTableInfo.table=t.data.reportforms_admin:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.billTableInfo.loading=!1})}else this.toast("请选择起始月份","error");else this.toast("请选择终止月份","error")},openStateDialog:function(e){0==e.isUpdate&&this.toast("您目前不能审核该账单","warning"),this.billDetailDialog.form={},this.billDetailDialog.visible=!0,this.billDetailDialog.form.billId=e.id,this.billDetailDialog.form.company=e.company,this.billDetailDialog.form.cooperationType=e.cooperationType,this.billDetailDialog.form.ourCompany=e.ourCompany,this.billDetailDialog.form.month=e.month,this.billDetailDialog.form.cost=e.cost,this.billDetailDialog.form.actualCost=e.actualCost,this.billDetailDialog.form.status=parseInt(e.status)},viewDetailFun:function(e){this.currentPosition.page=2,this.billDetailInfo.curApp=e.app,this.billDetailInfo.curPartner=e.company,this.billDetailInfo.cooperationType=e.cooperationType;var t=[e.id];this.getExportInfo(t)},previewBill:function(e){this.batchLoading=!0;var t=[e.id];this.getExportInfo(t,1)},updateBillFun:function(){},indexFormatter:function(e){return e+1},tableAppFormatter:function(e,t,a){for(var n=a,i=this.appInfo.list,o=0;o<i.length;o++)if(i[o].id==a){n=i[o].name;break}return n},getExportInfo:function(e,t){var a=this,n=[];if(void 0!=e)n=e;else for(var i=this.billTableInfo.table,o=0;o<i.length;o++)"客户"!==i[o].cooperationType&&n.push(i[o].id);if(0===n.length&&1==t)return this.toast("您未选择账单或您选择的账单是“客户的合作方式”","warning"),void(this.billTableInfo.loading=!1);var l,s={sessionid:this.userperadmin.sessionid,ids:n};(l=s,Pe.a.post(Fe+"exportPartnerBillData",l)).then(function(n){if(0===n.data.status)if(void 0!=e){var i=n.data.reportforms_admin[0];a.billDetailInfo.partner=JSON.parse(i.partner),a.billDetailInfo.billInfo={appName:i.app,companyId:i.companyId,cost:i.cost,createTime:i.createTime,month:i.month,ourCompanyId:i.ourCompanyId,invoiceContent:i.invoiceContent,remark:i.remark},a.billDetailInfo.balanceAccount=JSON.parse(i.balanceAccount),a.billDetailInfo.billDetail=JSON.parse(i.billDetail),a.singleBill=[],s=(s=i.month.split("-"))[0]+"年"+s[1]+"月";var o=i.app+"_"+a.billDetailInfo.partner.company+s;a.singleBill.push({id:"bill1",billName:o,partnerName:a.billDetailInfo.partner.company,payDate:i.createTime,ticketType:"增值税专用发票",demo:a.billDetailInfo.billInfo.appName,payMonth:s,payMount:i.cost,fromCompany:a.billDetailInfo.balanceAccount.company,fromTaxNo:a.billDetailInfo.balanceAccount.taxpayerNo,fromBank:a.billDetailInfo.balanceAccount.bank,fromBankNo:a.billDetailInfo.balanceAccount.accountNo,fromAdress:a.billDetailInfo.balanceAccount.address,fromTel:a.billDetailInfo.balanceAccount.phone,fromTicketContent:a.billDetailInfo.billInfo.invoiceContent,toCompany:a.billDetailInfo.partner.company,toTaxNo:a.billDetailInfo.partner.dutyParagraph,toBank:a.billDetailInfo.partner.bank,toBankNo:a.billDetailInfo.partner.bankAccount,toTaxNumber:void 0!==a.billDetailInfo.partner.taxcode?a.billDetailInfo.partner.taxcode:"",downloadState:0}),1==t&&a.downloadBillExcel()}else{i=n.data.reportforms_admin;a.billLists=[];for(var l=0;l<i.length;l++){var s,r=JSON.parse(i[l].partner),c={appName:i[l].app,companyId:i[l].companyId,cost:i[l].cost,createTime:i[l].createTime,month:i[l].month,ourCompanyId:i[l].ourCompanyId,remark:i[l].remark},d=JSON.parse(i[l].balanceAccount);JSON.parse(i[l].billDetail);s=(s=i[l].month.split("-"))[0]+"年"+s[1]+"月";o=c.appName+"_"+r.company+s;a.billLists.push({id:"bill"+(l+1),billName:o,partnerName:r.company,payDate:c.createTime,ticketType:"增值税专用发票",demo:c.appName,payMonth:s,payMount:c.cost,fromCompany:d.company,fromTaxNo:d.taxpayerNo,fromBank:d.bank,fromBankNo:d.accountNo,fromAdress:d.address,fromTel:d.phone,fromTicketContent:"",toCompany:r.company,toTaxNo:r.dutyParagraph,toBank:r.bank,toBankNo:r.bankAccount,toTaxNumber:void 0!==r.taxcode?r.taxcode:"",downloadState:0})}a.downloadBillExcel(!0)}else 1===n.data.status?a.$router.replace("/login"):a.toast(n.data.statusMsg,"error")}).catch(function(e){a.billTableInfo.loading=!1})},pushExcelData:function(e){},closePreview:function(){this.currentPosition.page=1},updateBillState:function(){var e=this;if(""!=this.billDetailDialog.form.action&&void 0!=this.billDetailDialog.form.action){var t,a={sessionid:this.userperadmin.sessionid,id:this.billDetailDialog.form.billId,status:this.billDetailDialog.form.action,actualCost:this.billDetailDialog.form.actualCost};this.billDetailDialog.loading=!0,(t=a,Pe.a.post(Fe+"updatePartnerBill",t)).then(function(t){e.billDetailDialog.loading=!1,0===t.data.status?(e.billDetailDialog.visible=!1,e.getBillList()):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.billDetailDialog.loading=!1})}else this.toast("请选择审批状态","warning")},toast:function(e,t){this.$message({type:t,message:e})}}},kn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"page page-partner"},[a("div",{staticClass:"bread-nav"},[a("span",{staticClass:"current-text"},[e._v("当前位置：")]),e._v(" "),e._l(e.currentPosition.menu,function(t,n){return e.currentPosition.page>=t.id?a("span",{class:{menuActive:e.currentPosition.page>t.id},on:{click:function(a){e.toggleCurrentMenu(t.id)}}},[n>0?a("span",[e._v(">")]):e._e(),e._v(" "+e._s(t.name))]):e._e()})],2),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPage1,expression:"showPage1"}],staticClass:"page1"},[a("el-row",{staticClass:"search-wrapper"},[a("el-col",{staticClass:"handler-panel",attrs:{xs:24,sm:20}},[a("el-col",{attrs:{xs:24,sm:20}},[a("el-select",{staticClass:"px360W mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择合作方"},model:{value:e.partnerInfo.selected,callback:function(t){e.$set(e.partnerInfo,"selected",t)},expression:"partnerInfo.selected"}},e._l(e.partnerInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.company}})})),e._v(" "),a("el-select",{staticClass:"px360W mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择我方公司"},model:{value:e.companyInfo.selected,callback:function(t){e.$set(e.companyInfo,"selected",t)},expression:"companyInfo.selected"}},e._l(e.companyInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.company,value:e.company}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择产品"},model:{value:e.appInfo.selected,callback:function(t){e.$set(e.appInfo,"selected",t)},expression:"appInfo.selected"}},e._l(e.appInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择合作方式"},model:{value:e.cooperationInfo.selected,callback:function(t){e.$set(e.cooperationInfo,"selected",t)},expression:"cooperationInfo.selected"}},e._l(e.cooperationInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),e._v(" "),a("el-select",{staticClass:"mrgB",attrs:{clearable:"",filterable:"","default-first-option":"",placeholder:"选择账单状态"},model:{value:e.billStateInfo.selected,callback:function(t){e.$set(e.billStateInfo,"selected",t)},expression:"billStateInfo.selected"}},e._l(e.billStateInfo.list,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("起始月份：")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"起始月份"},model:{value:e.rangeDate.minDate,callback:function(t){e.$set(e.rangeDate,"minDate",t)},expression:"rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("终止月份：")]),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"终止月份"},model:{value:e.rangeDate.maxDate,callback:function(t){e.$set(e.rangeDate,"maxDate",t)},expression:"rangeDate.maxDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:24,sm:4}},[a("button",{staticClass:"btn primary",on:{click:e.searchAction}},[a("i",{staticClass:"fa fa-search"}),e._v("搜索")])])],1),e._v(" "),a("el-col",{staticClass:"btn-panel",attrs:{xs:24,sm:4}},[a("button",{staticClass:"btn primary download",on:{click:e.batchDownload}},[a("i",{staticClass:"fa fa-cloud-download"})])])],1),e._v(" "),a("div",{staticClass:"table-wrapper",staticStyle:{height:"500px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.billTableInfo.loading,expression:"billTableInfo.loading"}],staticStyle:{width:"100%"},attrs:{data:e.billTableInfo.table,size:"small",height:"90%",border:""}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"账单ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"app",label:"产品"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"合作方",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cooperationType",label:"合作方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ourCompany",label:"我方公司",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"归属期间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"含税金额(元)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actualCost",label:"实际金额(元)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"生成时间",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"tableA",class:e._f("tableStatusStyleFilter")(t.row),on:{click:function(a){e.openStateDialog(t.row)}}},[a("i",{staticClass:"fa",class:e._f("tableStatusStyleFilter1")(t.row.status)}),e._v("\n\t\t                \t"+e._s(e._f("tableStatusFilter")(t.row.status)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账单详情",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewDetailFun(t.row)}}},[e._v("明细")]),e._v(" "),"客户"!==t.row.cooperationType?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.previewBill(t.row)}}},[e._v("预览")]):e._e()]}}])})],1)],1)],1)]),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPage2,expression:"showPage2"},{name:"loading",rawName:"v-loading",value:e.billDetailInfo.loading,expression:"billDetailInfo.loading"}],staticClass:"page2 form-wrapper"},[a("div",{staticClass:"page-title"},[a("p",[e._v(e._s(e.billDetailInfoTitle)+" 账单详情")]),e._v(" "),a("p",{staticClass:"small"},[e._v("（产品名称 - 合作方名称）")]),e._v(" "),e.cooperationType?a("button",{staticClass:"btn primary download",on:{click:e.downloadBillExcel}},[a("i",{staticClass:"fa fa-cloud-download"})]):e._e(),e._v(" "),a("span",{staticClass:"back",on:{click:e.closePage2Fun}},[a("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})])]),e._v(" "),e.cooperationType?a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"block distributorInfo",attrs:{sx:24,sm:12}},[a("div",{staticClass:"block-title"},[a("span",[e._v("合作方信息")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"proxyName"}},[e._v("合作方名称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.company,expression:"billDetailInfo.partner.company"}],attrs:{type:"text",id:"proxyName",readonly:"true"},domProps:{value:e.billDetailInfo.partner.company},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bankAccount"}},[e._v("银行账户：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.bankAccount,expression:"billDetailInfo.partner.bankAccount"}],attrs:{type:"text",id:"bankAccount",readonly:"true"},domProps:{value:e.billDetailInfo.partner.bankAccount},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"bankAccount",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bank"}},[e._v("开户行：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.bank,expression:"billDetailInfo.partner.bank"}],attrs:{type:"text",id:"bank",readonly:"true"},domProps:{value:e.billDetailInfo.partner.bank},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.dutyParagraph,expression:"billDetailInfo.partner.dutyParagraph"}],attrs:{type:"text",id:"dutyParagraph",readonly:"true"},domProps:{value:e.billDetailInfo.partner.dutyParagraph},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"dutyParagraph",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税收编码：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.taxcode,expression:"billDetailInfo.partner.taxcode"}],attrs:{type:"text",id:"dutyParagraph",readonly:"true"},domProps:{value:e.billDetailInfo.partner.taxcode},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"taxcode",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"phone"}},[e._v("公司电话：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.partner.phone,expression:"billDetailInfo.partner.phone"}],attrs:{type:"text",id:"phone",readonly:"true"},domProps:{value:e.billDetailInfo.partner.phone},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.partner,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group textarea-group"},[a("label",{attrs:{for:"address"}},[e._v("公司地址：")]),e._v(" "),a("textarea",{attrs:{rows:"2",disabled:"true"}},[e._v(e._s(e.billDetailInfo.partner.address))])])])]),e._v(" "),a("el-col",{staticClass:"block companyInfo",attrs:{sx:24,sm:12}},[a("div",{staticClass:"block-title"},[a("span",[e._v("我方公司信息")])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"company"}},[e._v("公司名称：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccount.company,expression:"billDetailInfo.balanceAccount.company"}],attrs:{type:"text",id:"company",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccount.company},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccount,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"accountNo"}},[e._v("银行账号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccount.accountNo,expression:"billDetailInfo.balanceAccount.accountNo"}],attrs:{type:"text",id:"accountNo",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccount.accountNo},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccount,"accountNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"bank"}},[e._v("开户行：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccount.bank,expression:"billDetailInfo.balanceAccount.bank"}],attrs:{type:"text",id:"bank",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccount.bank},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccount,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"taxpayerNo"}},[e._v("税号：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccount.taxpayerNo,expression:"billDetailInfo.balanceAccount.taxpayerNo"}],attrs:{type:"text",id:"taxpayerNo",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccount.taxpayerNo},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccount,"taxpayerNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"phone"}},[e._v("公司电话：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.balanceAccount.phone,expression:"billDetailInfo.balanceAccount.phone"}],attrs:{type:"text",id:"phone",readonly:"true"},domProps:{value:e.billDetailInfo.balanceAccount.phone},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.balanceAccount,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group textarea-group"},[a("label",{attrs:{for:"address"}},[e._v("公司地址：")]),e._v(" "),a("textarea",{attrs:{rows:"2",disabled:"true"}},[e._v(e._s(e.billDetailInfo.balanceAccount.address))])])])])],1):e._e(),e._v(" "),a("el-row",{staticClass:"block",attrs:{gutter:20}},[a("el-col",{staticClass:"distributorInfo",attrs:{sx:24}},[a("div",{staticClass:"block-title"},[a("span",[e._v("账单信息")])]),e._v(" "),a("el-row",{staticClass:"content"},[a("el-col",{staticClass:"block",attrs:{sx:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"appId"}},[e._v("产品名称：")]),e._v(" "),a("input",{attrs:{type:"text",id:"appId",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.appName}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"adminname"}},[e._v("合作方式：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.cooperationType,expression:"billDetailInfo.cooperationType"}],attrs:{type:"text",id:"adminname",readonly:"true"},domProps:{value:e.billDetailInfo.cooperationType},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo,"cooperationType",t.target.value)}}})])]),e._v(" "),a("el-col",{staticClass:"block",attrs:{sx:24,sm:12}},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cost"}},[e._v("申请金额(元)：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.billInfo.cost,expression:"billDetailInfo.billInfo.cost"}],attrs:{type:"text",id:"cost",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.cost},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.billInfo,"cost",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"month"}},[e._v("归属期间：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailInfo.billInfo.month,expression:"billDetailInfo.billInfo.month"}],attrs:{type:"text",id:"month",readonly:"true"},domProps:{value:e.billDetailInfo.billInfo.month},on:{input:function(t){t.target.composing||e.$set(e.billDetailInfo.billInfo,"month",t.target.value)}}})])])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"block",attrs:{gutter:20}},[a("el-col",{staticClass:"distributorInfo",attrs:{sx:24}},[a("div",{staticClass:"block-title"},[a("span",[e._v("详细信息")])]),e._v(" "),a("div",{staticClass:"content table-wrapper"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.billDetailInfo.billDetail,size:"small",height:"300",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",index:e.indexFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"含税成本金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dateNew",label:"归属期间(账期)"}})],1)],1)])],1),e._v(" "),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn primary",on:{click:e.closePage2Fun}},[e._v("关闭")])])],1)]),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[e.showPage3?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.batchLoading,expression:"batchLoading"}],staticClass:"page3 previewBill"},[a("download-excel",{attrs:{billList:e.billExcel},on:{close:e.closePreview}})],1):e._e()]),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.billDetailDialog.loading,expression:"billDetailDialog.loading"}],attrs:{title:"修改账单状态",visible:e.billDetailDialog.visible,width:"550px",center:""},on:{"update:visible":function(t){e.$set(e.billDetailDialog,"visible",t)}}},[a("form",{staticClass:"form-wrapper"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"company"}},[e._v("合作方：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.company,expression:"billDetailDialog.form.company"}],attrs:{type:"text",id:"company",readonly:"true"},domProps:{value:e.billDetailDialog.form.company},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cooperationType"}},[e._v("合作方式：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.cooperationType,expression:"billDetailDialog.form.cooperationType"}],attrs:{type:"text",id:"cooperationType",readonly:"true"},domProps:{value:e.billDetailDialog.form.cooperationType},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"cooperationType",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"ourCompany"}},[e._v("我方公司：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.ourCompany,expression:"billDetailDialog.form.ourCompany"}],attrs:{type:"text",id:"ourCompany",readonly:"true"},domProps:{value:e.billDetailDialog.form.ourCompany},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"ourCompany",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"month"}},[e._v("归属期间：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.month,expression:"billDetailDialog.form.month"}],attrs:{type:"text",id:"month",readonly:"true"},domProps:{value:e.billDetailDialog.form.month},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"month",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cost"}},[e._v("含税成本金额(元)：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.cost,expression:"billDetailDialog.form.cost"}],attrs:{type:"text",id:"cost",readonly:"true"},domProps:{value:e.billDetailDialog.form.cost},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"cost",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"cost"}},[e._v("实际金额(元)：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.billDetailDialog.form.actualCost,expression:"billDetailDialog.form.actualCost"}],attrs:{type:"text",id:"cost",readonly:e.actualCostModify},domProps:{value:e.billDetailDialog.form.actualCost},on:{input:function(t){t.target.composing||e.$set(e.billDetailDialog.form,"actualCost",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"status"}},[e._v("账单当前状态：")]),e._v(" "),a("input",{attrs:{type:"text",id:"status",readonly:"true"},domProps:{value:e._f("tableStatusFilter")(e.billDetailDialog.form.status)}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.canSelectedStatus.length>0,expression:"canSelectedStatus.length > 0"}],staticClass:"input-group"},[a("label",{attrs:{for:"billState"}},[e._v("审批操作：")]),e._v(" "),a("el-select",{staticClass:"mrgB billState",attrs:{size:"small",filterable:"","default-first-option":"",placeholder:"选择账单状态"},model:{value:e.billDetailDialog.form.action,callback:function(t){e.$set(e.billDetailDialog.form,"action",t)},expression:"billDetailDialog.form.action"}},e._l(e.canSelectedStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.billDetailDialog.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateBillState}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var Tn=a("vSla")(Sn,kn,!1,function(e){a("U/2B"),a("t5cY")},"data-v-8706b0ae",null).exports,Nn={data:function(){return{userperadmin:"",pageLoading:!1,currentPosition:{page:1,menu:[{id:1,name:"财务同步"}]},startLimit:{disabledDate:function(e){var t=new Date("2018-02-28"),a=new Date;return e.getTime()<t.getTime()||e.getTime()>a.getTime()}},endLimit:{disabledDate:function(e){var t=new Date("2018-02-28"),a=new Date;return e.getTime()<t.getTime()||e.getTime()>a.getTime()}},rangeDate:{minDate:"",maxDate:"",synName:"",price:""},returnMsg:"",returnMsgArr:[]}},mounted:function(){this.userperadmin=JSON.parse(localStorage.getItem("userperadmin"))},methods:{synchrFinance:function(){var e,t=this;if(""!=this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""==this.rangeDate.minDate||""!=this.rangeDate.maxDate)if(""!=this.rangeDate.minDate||""==this.rangeDate.maxDate){if(this.rangeDate.minDate>this.rangeDate.maxDate)this.toast("起始月份不能大于终止月份","error");else if(!this.rangeDate.synName){var a={sessionid:this.userperadmin.sessionid,minDate:this.rangeDate.minDate,maxDate:this.rangeDate.maxDate};this.pageLoading=!0,(e=a,Pe.a.post(Fe+"FinanceTask",e)).then(function(e){0===e.data.status?(t.pageLoading=!1,t.returnMsg=e.data.statusMsg,t.returnMsgArr=e.data.statusMsg.split(";"),t.returnMsgArr.pop()):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.pageLoading=!1})}}else this.toast("请选择同步的起始月份","error");else this.toast("请选择同步的结束月份","error");else this.toast("请选择同步的日期期间","error")},toast:function(e,t){this.$message({type:t,message:e})}}},zn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"page",attrs:{"element-loading-text":"正在同步，请稍后"}},[a("div",{staticClass:"bread-nav"},[a("span",{staticClass:"current-text"},[e._v("当前位置：财务中心 > ")]),e._v(" "),e._l(e.currentPosition.menu,function(t,n){return e.currentPosition.page>=t.id?a("span",{class:{menuActive:e.currentPosition.page>t.id},on:{click:function(a){e.toggleCurrentMenu(t.id)}}},[n>0?a("span",[e._v(">")]):e._e(),e._v(" "+e._s(t.name))]):e._e()})],2),e._v(" "),a("div",{staticClass:"page1"},[a("el-row",{staticClass:"search-wrapper"},[a("div",{staticClass:"myRangeMonth"},[a("label",{attrs:{for:""}},[e._v("开始")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini",type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":e.startLimit},model:{value:e.rangeDate.minDate,callback:function(t){e.$set(e.rangeDate,"minDate",t)},expression:"rangeDate.minDate"}}),e._v(" "),a("label",{attrs:{for:""}},[e._v("结束")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{size:"mini",type:"date",placeholder:"结束日期","value-format":"yyyy-MM-dd","picker-options":e.endLimit},model:{value:e.rangeDate.maxDate,callback:function(t){e.$set(e.rangeDate,"maxDate",t)},expression:"rangeDate.maxDate"}}),e._v(" "),a("label",[e._v("名称")]),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"输入名称"},model:{value:e.rangeDate.synName,callback:function(t){e.$set(e.rangeDate,"synName",t)},expression:"rangeDate.synName"}}),e._v(" "),a("label",[e._v("价格")]),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"输入价格"},model:{value:e.rangeDate.price,callback:function(t){e.$set(e.rangeDate,"price",t)},expression:"rangeDate.price"}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.synchrFinance}},[a("i",{staticClass:"fa fa-refresh"}),e._v(" 同步")])],1)]),e._v(" "),a("div",{staticClass:"content-wrapper"},[e._m(0),e._v(" "),a("div",{staticClass:"content"},e._l(e.returnMsgArr,function(t,n){return a("p",{key:n},[a("span",{staticClass:"index"},[e._v(e._s(n+1))]),e._v(e._s(t))])}))])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"content-title"},[t("span",[this._v("同步反馈")])])}]};var Pn=a("vSla")(Nn,zn,!1,function(e){a("ICD9"),a("+rXm")},"data-v-3a28d595",null).exports;me.default.use(ge.a);var Fn=new ge.a({routes:[{path:"/Login",component:Dt,name:"",meta:"00",hidden:!0},{path:"/",redirect:"/Login",meta:"00",hidden:!0},{path:"/",component:ke,name:"总结中心",iconCls:"el-icon-edit-outline",meta:"03",children:[{path:"/dailyInfo",component:Mt,name:"日报",meta:"0301"},{path:"/dailyHistory",component:Ht,name:"日报历史",meta:"0302"},{path:"/resultsTheQuery",component:Ut,name:"业绩查询",meta:"0303"}]},{path:"/",component:ke,name:"渠道中心",iconCls:"el-icon-message",meta:"01",children:[{path:"/SharedPaes",component:jt,name:"",meta:"0100",hidden:!0},{path:"/proxy",component:ta,name:"渠道商管理",meta:"0101"},{path:"/channel",component:oa,name:"渠道管理",meta:"0102"}]},{path:"/",component:ke,name:"报表中心",iconCls:"el-icon-tickets",meta:"02",children:[{path:"/dataInfo",component:ra,name:"数据详情",meta:"0201"},{path:"/ProcessConversTable",component:ha,name:"流程转化表",meta:"0203"},{path:"/seoDataInfo",component:va,name:"SEO/SEM查询",meta:"0205"},{path:"/ReportConfigurat",component:Ra,name:"报表配置",meta:"0206"},{path:"/userAction",component:ga,name:"用户行为",meta:"0204",children:[{path:"/generationOfuser",component:Ca,name:"概况",meta:"020401"},{path:"/analyzeOfuser",component:wa,name:"转化分析",meta:"020402"},{path:"/durationAnalysis",component:Ta,name:"时长分析",meta:"020403"},{path:"/returnAnalysis",component:Pa,name:"返回分析",meta:"020404"},{path:"/userAnalysis",component:$a,name:"用户分析",meta:"020405"}]}]},{path:"/",component:ke,name:"数据中心",iconCls:"el-icon-date",meta:"04",children:[{path:"/costDataRecord",component:Ha,name:"成本数据录入",meta:"0401"},{path:"/recordHistory",component:Ua,name:"成本录入历史",meta:"0402"},{path:"/DataBackRun",component:Wa,name:"数据重跑",meta:"0403"},{path:"/RedoHistory",component:Xa,name:"重跑历史",meta:"0404"},{path:"/OpCostDataManagement",component:en,name:"运营成本数据管理",meta:"0405"}]},{path:"/",component:ke,name:"运营中心",iconCls:"el-icon-news",meta:"06",children:[{path:"/PartnerManagement",component:un,name:"合作方管理",meta:"0601"}]},{path:"/",component:ke,name:"财务中心",iconCls:"el-icon-news",meta:"07",children:[{path:"/distributorBill",component:Cn,name:"渠道商账单",meta:"0701"},{path:"/partnerBill",component:Tn,name:"合作方账单",meta:"0702"},{path:"/synchrFinanace",component:Pn,name:"财务同步",meta:"0703"}]},{path:"/",component:ke,name:"系统中心",iconCls:"el-icon-setting",meta:"05",children:[{path:"/functionalGroup",component:nn,name:"功能列表",meta:"0501"},{path:"/UserControl",component:sn,name:"账号管理",meta:"0502"}]}]}),Ln=(a("kf6B"),a("9rMa"));me.default.use(Ln.a);var $n=new Ln.a.Store({state:{ip:"10.68.6.168"},mutations:{}}),An=(a("HBSQ"),a("l4ih"),a("/MtV"));a("cfw3"),a("aO2o"),a("vfE7"),a("/eGH"),a("qYjU"),a("B6j4"),me.default.prototype.$echarts=An,me.default.use(fe.a),me.default.use(pe.a),me.default.use(de.a),me.default.use(re.a),me.default.use(le.a),me.default.use(ie.a),me.default.use(ae.a),me.default.use(ee.a),me.default.use(K.a),me.default.use(Y.a),me.default.use(W.a),me.default.use(V.a),me.default.use(Q.a),me.default.use(H.a),me.default.use(E.a),me.default.use(M.a),me.default.use(q.a),me.default.use($.a),me.default.use(F.a),me.default.use(z.a),me.default.use(T.a),me.default.use(S.a),me.default.use(D.a),me.default.use(C.a.directive),me.default.use(y.a),me.default.use(g.a),me.default.use(v.a),me.default.use(f.a),me.default.use(p.a),me.default.use(d.a),me.default.use(r.a),me.default.prototype.$confirm=l.a.confirm,me.default.prototype.$message=i.a,me.default.prototype.$loading=C.a.service,me.default.config.productionTip=!1,Fn.beforeEach(function(e,t,a){"/login"==e.path&&sessionStorage.removeItem("loginStatus"),JSON.parse(sessionStorage.getItem("loginStatus"))||"/login"==e.path?a():a({path:"/login"})}),new me.default({el:"#app",router:Fn,store:$n,components:{App:be},template:"<App/>"}),me.default.prototype.formatDate=function(e){var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return t+"-"+a+"-"+n+" "+i+":"+o+":"+(l>=10?l:"0"+l)},me.default.prototype.dataToMs=function(e){return new Date(e).getTime()}},Nvu4:function(e,t){},O1AO:function(e,t){},"OB/q":function(e,t){},OYV6:function(e,t){},PNTh:function(e,t){},Q56g:function(e,t){},"QJ/b":function(e,t){},RPlT:function(e,t){},SYDC:function(e,t){},SvtX:function(e,t){},TYaI:function(e,t){},"U/2B":function(e,t){},U4Bn:function(e,t){},UgjM:function(e,t){},"V/iC":function(e,t){},VGth:function(e,t){},VI7t:function(e,t){},XSlk:function(e,t){},Y3Jw:function(e,t){},Y63p:function(e,t){},YvHJ:function(e,t){},Z1FY:function(e,t){},ar6X:function(e,t){},bQKG:function(e,t){},"cT+Q":function(e,t){},cgky:function(e,t){},cjMj:function(e,t){},dNAP:function(e,t){},dqi2:function(e,t){},eKrN:function(e,t){},htiv:function(e,t){},"k+SJ":function(e,t){},kPzD:function(e,t){},kf6B:function(e,t){!function(e,t){var a=e.documentElement,n="orientationchange"in window?"orientationchange":"resize",i=function(){var e,t,n=(t=navigator.userAgent,navigator.appVersion,e={trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webkit:t.indexOf("AppleWebkit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:t.indexOf("Mobile")>-1||t.indexOf("mobile")>-1,ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),wechat:t.indexOf("MicroMessenger")>-1},(navigator.browserLanguge||navigator.language).toLowerCase(),e.ios||e.iPhone||e.iPad?e.mobile?"ios_mobile":"ios_pc":e.android?"android":"pc"),i=a.clientWidth,o="landscape",l=16;i&&("pc"==n||"ios_pc"==n?(l=i<=1204?Math.floor(i/54):Math.floor(i/70),o="horizontal"):l=Math.floor(i/23),a.style.fontSize=l+"px",a.className=o)};i(),e.addEventListener&&(t.addEventListener(n,i,!1),e.addEventListener("DOMContentLoaded",i,!1))}(document,window)},l4ih:function(e,t){},lOZR:function(e,t){},lgM4:function(e,t){},mIUw:function(e,t){},mgiI:function(e,t){},qBOo:function(e,t){},"qo+K":function(e,t){},rY1A:function(e,t){},s6as:function(e,t){},t5cY:function(e,t){},vGfU:function(e,t){},vHvv:function(e,t){},vQzk:function(e,t){},vyZ2:function(e,t){},yAd9:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e641d5a4e61dfc3d4346.js.map