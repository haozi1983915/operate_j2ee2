webpackJsonp([6],{"2QO6":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),n=a.n(i),s=a("2sCs"),o=a.n(s),l=a("P9l9"),r={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:"",optionsApp:""},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",chooseApp:[],hours:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],startHour:"",endHour:"",gitTimeold:[],gitTimeNew:{},checkList:["总计","渠道信息","负责人"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],headerTitle:[],headerTitEnglish:[],allheaderTitle:[],key:1,fbsDataHeight:null,tableloading:!1,fontCheack:{total:!0,qudaoNumber:!0,qudaoClass:!0,fuzeren:!0,time:!0,versions:!0},secrchSetData:{},currentPage:1,pageSizes:[50,100,300,500],dataSize:0,pagesize:50,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0,downDataInfo:{}}},watch:{checkList:function(e){this.key=this.key+1}},filters:{addSuffix:function(e){return"登录转化"==e||"传证转化"==e||"绑卡转化"==e||"信息转化"==e||"联系人转化"==e||"视频转化"==e||"进件转化"==e||"开户成功率"==e||"开户总转化"==e||"注册失败率"==e?"%":void 0}},methods:{getClientHeight:function(){var e=window.document.documentElement.clientHeight;this.fbsDataHeight=e-300},sharchInfoSelect:function(e){var t=this,a={sessionid:e},i=n()(a);o.a.all([Object(l.V)(i).then(function(e){if(0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],n=e.data.adminIdList[a].split(",")[1];t.fuzheren.push({value:i,label:n}),t.qudaoInfo.optionsqudao=e.data.channelNameList,t.qudaoInfo.optionsqudaonum=e.data.channelNoList}1===e.data.status&&t.$router.replace("/login")}),Object(l.S)(i).then(function(e){if(t.chooseApp=e.data.appList,t.qudaoInfo.optionsApp=t.chooseApp[2].id,0===e.data.status){for(var a=0;a<e.data.channelAttribute.length;a++){var i=e.data.channelAttribute[a].id,n=e.data.channelAttribute[a].name;t.qudaoshuxing.push({value:i,label:n})}t.channelType=e.data.channelType,t.channelSubdivision=e.data.channelSubdivision}1===e.data.status&&t.$router.replace("/login")})]).then(o.a.spread(function(e,a){t.Statrloading=!1,t.search()}))},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,i=this.channelType[t].name;this.options4.push({label:i,id:a})}for(var n=1;n<this.options4.length;n++){this.options4[n].options=[];for(var s=0;s<this.channelSubdivision.length;s++)this.options4[n].id===this.channelSubdivision[s].higherId&&this.options4[n].options.push({value:this.channelSubdivision[s].higherId+","+this.channelSubdivision[s].id,label:this.channelSubdivision[s].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();this.newDate=t+"-"+a+"-"+i},tableTimeStyle:function(e){if(4==e){if(""!=this.startHour)if(""==this.endHour)this.endHour=this.startHour;else if(parseInt(this.startHour)>parseInt(this.endHour))return void this.$message.error("开始小时必须小于结束小时");if(""!=this.endHour)if(""==this.startHour)this.startHour=this.endHour;else if(parseInt(this.startHour)>parseInt(this.endHour))return void this.$message.error("开始小时必须小于结束小时")}this.iconImgIndex=e,this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.headerTitle=[],this.fbsData=[],this.tableloading=!0,this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channel:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",appId:this.qudaoInfo.optionsApp,adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first,tag:this.checkList},4==this.iconImgIndex?(this.secrchSetData.minHour=this.startHour,this.secrchSetData.maxHour=this.endHour):(delete this.secrchSetData.minHour,delete this.secrchSetData.maxHour);var t=this,a=n()(this.secrchSetData);Object(l._9)(a).then(function(a){if(0===a.data.status){t.fbsData=[],t.headerTitle=[],t.fbsData=a.data.reportforms_admin;for(var i=0;i<t.fbsData.length;i++)for(var n in t.fbsData[i])isNaN(t.fbsData[i][n])||(t.fbsData[i][n]=parseFloat(t.fbsData[i][n]));t.allheaderTitle=a.data.proxyNameList,t.headerTitEnglish=a.data.mainChannelNameList;var s=[],o=["总计","渠道信息","负责人"];for(i=0;i<o.length;i++)t.checkList.indexOf(o[i])<0&&s.push(o[i]);if(s.length>0)for(i=0;i<s.length;i++)if("渠道信息"==s[i])["渠道号","渠道","渠道分类"].map(function(e){var a=t.allheaderTitle.indexOf(e);a>0&&(t.allheaderTitle.splice(a,1),t.headerTitEnglish.splice(a,1))});else{var l=t.allheaderTitle.indexOf(s[i]);l>0&&(t.allheaderTitle.splice(l,1),t.headerTitEnglish.splice(l,1))}t.allheaderTitle.map(function(e,a){t.headerTitle.push({headerTit:e,showStatus:!0})}),a.data.listSize?(1===e.secrchSetData.dateType&&(t.dataTimeDay=parseInt(a.data.listSize),t.dataSize=t.dataTimeDay),2===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth),3===e.secrchSetData.dateType&&(t.dataTimeMoth=parseInt(a.data.listSize),t.dataSize=t.dataTimeMoth),4===e.secrchSetData.dateType&&(t.dataSize=parseInt(a.data.listSize))):t.dataSize=t.dataSize,t.tableloading=!1,t.first=0}1===a.data.status&&t.$router.replace("/login")}).catch(function(e){t.$message.error("数据搜索失败"),t.tableloading=!1})},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""},valuequdaoChange:function(){this.qudaoInfo.valuequdao=this.qudaoInfo.valuequdao.replace(/\-/gi,"")},valuequdaonumChange:function(){this.qudaoInfo.valuequdaonum=this.qudaoInfo.valuequdaonum},dataTime:function(){this.gitTimeold=[]},dataTimeYMD:function(e){return e.getFullYear()+"-"+(e.getMonth()+1<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<9?"0"+e.getDate():e.getDate())},clickRow:function(e,t,a){},downData:function(){this.downDataInfo=this.secrchSetData;var e=n()(this.downDataInfo);Object(l.y)(e).then(function(e){var t=e.data,a=new Blob([t]);if("download"in document.createElement("a")){var i=document.createElement("a");i.download="运营流程转化统计表.xls",i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,"运营流程转化统计表.xls")})}},mounted:function(){var e=localStorage.getItem("userperadmin");this.sessionid=JSON.parse(e).sessionid;var t=new Date;t.setTime(t.getTime()-864e5);var a=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()>=10?t.getDate():"0"+t.getDate()),i=new Date;i.setTime(i.getTime());var n=i.getFullYear()+"-"+(i.getMonth()+1>=10?i.getMonth()+1:"0"+(i.getMonth()+1))+"-"+(i.getDate()>=10?i.getDate():"0"+i.getDate());this.gitTimeold=[a,n],this.findTime(),this.getClientHeight(),this.sharchInfoSelect(this.sessionid)}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道"},on:{focus:e.focusQudao,change:e.valuequdaoChange},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号"},on:{focus:e.focusQudaonum,change:e.valuequdaonumChange},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t,i){return a("el-option-group",{key:i,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{"default-first-option":"",placeholder:"APP"},model:{value:e.qudaoInfo.optionsApp,callback:function(t){e.$set(e.qudaoInfo,"optionsApp",t)},expression:"qudaoInfo.optionsApp"}},e._l(e.chooseApp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("br"),e._v(" "),a("div",[a("el-select",{staticClass:"templeMaring",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"开始小时"},model:{value:e.startHour,callback:function(t){e.startHour=t},expression:"startHour"}},e._l(e.hours,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("span",{staticStyle:{"font-size":"14px","margin-left":"-15px"}},[e._v("至")]),e._v(" "),a("el-select",{staticClass:"templeMaring",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"结束小时"},model:{value:e.endHour,callback:function(t){e.endHour=t},expression:"endHour"}},e._l(e.hours,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"","value-format":"yyyy-MM-dd"},on:{focus:e.dataTime},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1),e._v(" "),a("div",{staticStyle:{height:"1rem"}}),e._v(" "),a("el-row",{staticClass:"clearfloat",attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"总计"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道信息"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"负责人"}})],1)],1),e._v(" "),a("label",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"fa fa-sun-o",attrs:{type:"success",size:"mini"},on:{click:function(t){e.tableTimeStyle(1)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-moon-o",attrs:{type:"success",size:"mini"},on:{click:function(t){e.tableTimeStyle(2)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-times",attrs:{type:"success",size:"mini"},on:{click:function(t){e.tableTimeStyle(3)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-clock-o",attrs:{type:"success",size:"mini"},on:{click:function(t){e.tableTimeStyle(4)}}}),e._v(" "),a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"},on:{click:e.downData}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],key:e.key,staticStyle:{width:"100%"},attrs:{data:e.fbsData,height:e.fbsData&&e.fbsData.length>0?e.fbsDataHeight:150,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0},on:{"row-click":e.clickRow}},e._l(e.headerTitle,function(t,i){return t.showStatus?a("el-table-column",{key:t.headerTit,attrs:{prop:e.headerTitEnglish[i],label:t.headerTit,sortable:"",width:"日期"==t.headerTit?160:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("span",[e._v(e._s(n.row[e.headerTitEnglish[i]])+e._s(e._f("addSuffix")(t.headerTit)))])]}}])}):e._e()})),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]},d=a("vSla")(r,u,!1,function(e){a("Ujfx")},"data-v-d6951342",null);t.default=d.exports},Ujfx:function(e,t){}});