webpackJsonp([17],{"69PL":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("P9l9"),n={data:function(){return{userperadmin:"",Statrloading:!0,activeNameData:"",activeNameTrans:"",dataInfoMenuVisible:!1,dataInfoTableVisible:!1,liuchenMenuVisible:!1,liuchenTableVisible:!1,Detail:[],Trans:[],AppName:[],addInfoData:"",channelType:[],payList:[],data2:[],valueData:[],dataInfoDataOld:[],liuchengDataOld:[]}},mounted:function(){var a=this;this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),setTimeout(function(){a.getNeedInfo(a.userperadmin)},500)},methods:{getNeedInfo:function(a){this.Statrloading=!0,this.Detail=[],this.Trans=[],this.AppName=[],this.channelType=[],this.payList=[],this.dataInfoDataOld=[],this.liuchengDataOld=[];var t={sessionid:a.sessionid,system:2},e=this;Object(s._17)(t).then(function(a){if(0===a.data.status){a.data.appList.map(function(t,s){e.AppName.push({label:a.data.appList[s].name,value:a.data.appList[s].id})}),a.data.channelType.map(function(t,s){e.channelType.push(a.data.channelType[s].name)}),a.data.payList.map(function(t,s){e.payList.push(a.data.payList[s].name)}),a.data.channelType.map(function(t,s){e.dataInfoDataOld.push(a.data.channelType[s].name)}),a.data.payList.map(function(t,s){e.liuchengDataOld.push(a.data.payList[s].name)}),e.Detail=a.data.reportforms_admin;for(var t=0;t<e.Detail.length;t++)e.Detail[t].columns=e.Detail[t].columns.split(","),e.Detail[t].columns.length>0&&""==e.Detail[t].columns[0]&&(e.Detail[t].columns=[]);for(e.Trans=a.data.reportforms_operate,t=0;t<e.Trans.length;t++)e.Trans[t].columns=e.Trans[t].columns.split(","),e.Trans[t].columns.length>0&&""==e.Trans[t].columns[0]&&(e.Trans[t].columns=[]);setTimeout(function(){e.comment(e.Detail,e.Trans)},1e3),e.Statrloading=!1}1===a.data.status&&e.$router.replace("/login")})},comment:function(a,t){var e=[];a.forEach(function(a,t){e.push(a.onlyType)}),t.forEach(function(a,t){e.push(a.onlyType)});var n=[];e.map(function(a,t){a=document.getElementById(a),n.push(a)});var l=this;n.map(function(a,t){Sortable.create(a,{group:"words",animation:150,onAdd:function(a){},onUpdate:function(a){},onRemove:function(a){},onStart:function(a){},onSort:function(a){},onEnd:function(a){var t=a.from.innerText.split("\n").slice(0,-1),e={sessionid:l.userperadmin.sessionid,onlyType:a.from.id,columns:t,system:2};Object(s._30)(e).then(function(a){0===a.data.status&&l.$message({message:"保存配置成功",type:"success"}),1===a.data.status&&l.$router.replace("/login")})}})})},clickDataInfoMenu:function(a){1==a?(this.data2=this.generateData2(this.channelType),this.dataInfoMenuVisible=!0):2==a&&(this.data2=this.generateData2(this.payList),this.liuchenMenuVisible=!0)},modification:function(a,t){a.name?(this.addInfoData=a.name,this.valueData=a.columns):(this.addInfoData="",this.valueData=[]),1===t?this.dataInfoTableVisible=!0:2===t&&(this.liuchenTableVisible=!0)},addDataInfo:function(a){1==a&&(this.valueData=[],this.addInfoData="",this.data2=this.generateData2(this.dataInfoDataOld),this.dataInfoTableVisible=!0),2==a&&(this.valueData=[],this.addInfoData="",this.data2=this.generateData2(this.liuchengDataOld),this.liuchenTableVisible=!0)},handleChange:function(a,t,e){},generateData2:function(a){var t=[];return a.forEach(function(a,e){t.push({label:a,key:a})}),t},saveTableName:function(a){var t=null;if(1===a?t=22:2===a&&(t=21),this.addInfoData){var e={sessionid:this.userperadmin.sessionid,appName:this.addInfoData,type:t,columns:this.valueData,system:2},n=this;Object(s._30)(e).then(function(a){0===a.data.status&&(n.$message({message:"保存配置成功",type:"success"}),n.dataInfoMenuVisible=!1,n.dataInfoTableVisible=!1,n.liuchenMenuVisible=!1,n.liuchenTableVisible=!1,n.getNeedInfo(n.userperadmin)),1===a.data.status&&n.$router.replace("/login")})}else this.$message.error("选择需要配置的产品")}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.Statrloading,expression:"Statrloading"}],staticClass:"config",attrs:{"element-loading-text":"拼命加载中..."}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{md:10,lg:10}},[e("div",{staticClass:"dataInfo"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{sm:12,md:10,lg:8,xl:5}},[e("p",{staticClass:"titleDataInfo"},[a._v("数据详情表")])]),a._v(" "),e("el-col",{attrs:{sm:8,md:10,lg:12,xl:15}},[a._v(" ")]),a._v(" "),e("el-col",{attrs:{sm:4,md:2,lg:2,xl:2}},[e("p",{staticClass:"addDataInfo"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-menu",circle:"",size:"small"},on:{click:function(t){a.clickDataInfoMenu(1)}}})],1)])],1),a._v(" "),e("div",a._l(a.Detail,function(t,s){return e("el-collapse",{key:s,attrs:{accordion:""},model:{value:a.activeNameData,callback:function(t){a.activeNameData=t},expression:"activeNameData"}},[e("el-collapse-item",{attrs:{title:t.name,name:s}},[e("ul",{staticClass:"touchStyle",attrs:{id:t.onlyType}},a._l(t.columns,function(t,s){return e("li",{key:s},[a._v(a._s(t))])}))])],1)}))],1)]),a._v(" "),e("el-col",{attrs:{md:1,lg:1}},[e("div",[a._v(" ")])]),a._v(" "),e("el-col",{attrs:{md:10,lg:10}},[e("div",{staticClass:"dataInfo"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{sm:12,md:10,lg:8,xl:5}},[e("p",{staticClass:"titleDataInfo"},[a._v("流程转化表")])]),a._v(" "),e("el-col",{attrs:{sm:8,md:10,lg:12,xl:15}},[a._v(" ")]),a._v(" "),e("el-col",{attrs:{sm:4,md:2,lg:2,xl:2}},[e("p",{staticClass:"addDataInfo"},[e("el-button",{attrs:{type:"success",icon:"el-icon-menu",circle:"",size:"small"},on:{click:function(t){a.clickDataInfoMenu(2)}}})],1)])],1),a._v(" "),a._l(a.Trans,function(t,s){return e("el-collapse",{key:s,attrs:{accordion:""},model:{value:a.activeNameTrans,callback:function(t){a.activeNameTrans=t},expression:"activeNameTrans"}},[e("el-collapse-item",{attrs:{title:t.name,name:s}},[e("ul",{staticClass:"touchStyle",attrs:{id:t.onlyType}},a._l(t.columns,function(t,s){return e("li",{key:s},[a._v(a._s(t))])}))])],1)})],2)])],1),a._v(" "),e("div",{staticClass:"menuDataInfo"},[e("el-dialog",{attrs:{title:"增加/修改",visible:a.dataInfoMenuVisible,width:"60%"},on:{"update:visible":function(t){a.dataInfoMenuVisible=t}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addProduct clearfix"},[e("el-button",{staticClass:"btnAddStyle",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(t){a.addDataInfo(1)}}},[a._v("新增产品")])],1),a._v(" "),e("div",{staticClass:"modelDataHeight"},[e("ul",{staticClass:"existMenu"},a._l(a.Detail,function(t,s){return e("li",[e("el-button",{attrs:{type:"success",size:"small"}},[a._v(a._s(t.name))]),a._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){a.modification(t,1)}}},[a._v("修改")]),a._v(" "),e("div",{staticClass:"havedDataInfo"},a._l(t.columns,function(t){return e("span",{staticClass:"havedSpanStyle"},[a._v(a._s(t))])}))],1)}))])])],1),a._v(" "),e("div",{staticClass:"menuDataInfo"},[e("el-dialog",{attrs:{title:"表头增加修改",visible:a.dataInfoTableVisible,width:"50%"},on:{"update:visible":function(t){a.dataInfoTableVisible=t}}},[e("div",{staticClass:"addInfo"},[e("el-select",{attrs:{placeholder:"选择APP产品",size:"small"},model:{value:a.addInfoData,callback:function(t){a.addInfoData=t},expression:"addInfoData"}},a._l(a.AppName,function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.label}})}))],1),a._v(" "),e("br"),a._v(" "),e("br"),a._v(" "),e("div",[e("el-transfer",{attrs:{filterable:"",titles:["原始数据","配置数据"],"filter-placeholder":"请输入搜索信息",data:a.data2},on:{change:a.handleChange},model:{value:a.valueData,callback:function(t){a.valueData=t},expression:"valueData"}})],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){a.saveTableName(1)}}},[a._v("保存")])],1)])],1),a._v(" "),e("div",{staticClass:"menuDataInfo"},[e("el-dialog",{attrs:{title:"增加/修改",visible:a.liuchenMenuVisible,width:"60%"},on:{"update:visible":function(t){a.liuchenMenuVisible=t}}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"addProduct clearfix"},[e("el-button",{staticClass:"btnAddStyle",attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(t){a.addDataInfo(2)}}},[a._v("新增产品")])],1),a._v(" "),e("div",{staticClass:"modelDataHeight"},[e("ul",{staticClass:"existMenu"},a._l(a.Trans,function(t,s){return e("li",[e("el-button",{attrs:{type:"success",size:"small"}},[a._v(a._s(t.name))]),a._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){a.modification(t,2)}}},[a._v("修改")]),a._v(" "),e("div",{staticClass:"havedDataInfo"},a._l(t.columns,function(t){return e("span",{staticClass:"havedSpanStyle"},[a._v(a._s(t))])}))],1)}))])])],1),a._v(" "),e("div",{staticClass:"menuDataInfo"},[e("el-dialog",{attrs:{title:"表头增加修改",visible:a.liuchenTableVisible,width:"50%"},on:{"update:visible":function(t){a.liuchenTableVisible=t}}},[e("div",{staticClass:"addInfo"},[e("el-select",{attrs:{placeholder:"选择APP产品",size:"small"},model:{value:a.addInfoData,callback:function(t){a.addInfoData=t},expression:"addInfoData"}},a._l(a.AppName,function(a){return e("el-option",{key:a.value,attrs:{label:a.label,value:a.label}})}))],1),a._v(" "),e("br"),a._v(" "),e("br"),a._v(" "),e("div",[e("el-transfer",{attrs:{filterable:"",titles:["原始数据","配置数据"],"filter-placeholder":"请输入搜索信息",data:a.data2},on:{change:a.handleChange},model:{value:a.valueData,callback:function(t){a.valueData=t},expression:"valueData"}})],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){a.saveTableName(2)}}},[a._v("保存")])],1)])],1)],1)},staticRenderFns:[]},i=e("vSla")(n,l,!1,function(a){e("9xj1")},"data-v-035c4dc9",null);t.default=i.exports},"9xj1":function(a,t){}});