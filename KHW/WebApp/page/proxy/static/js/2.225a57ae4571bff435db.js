webpackJsonp([2],{"72x0":function(e,t,n){n("7XU4"),e.exports=n("AKd3").Object.keys},"7XU4":function(e,t,n){var a=n("OXaN"),i=n("5pnV");n("t+Om")("keys",function(){return function(e){return i(a(e))}})},"7kr7":function(e,t){},"Cl/E":function(e,t,n){var a=n("5pnV"),i=n("/r4/"),s=n("XvZ9").f;e.exports=function(e){return function(t){for(var n,o=i(t),l=a(o),r=l.length,c=0,h=[];r>c;)s.call(o,n=l[c++])&&h.push(e?[n,o[n]]:o[n]);return h}}},MgeX:function(e,t,n){e.exports={default:n("XEbU"),__esModule:!0}},NWpI:function(e,t,n){var a=n("FITv"),i=n("Cl/E")(!1);a(a.S,"Object",{values:function(e){return i(e)}})},XEbU:function(e,t,n){n("NWpI"),e.exports=n("AKd3").Object.values},ZLEe:function(e,t,n){e.exports={default:n("72x0"),__esModule:!0}},"t+Om":function(e,t,n){var a=n("FITv"),i=n("AKd3"),s=n("BRDz");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),a(a.S+a.F*s(function(){n(1)}),"Object",o)}},wkKt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("3cXf");var a=n("MgeX"),i=n.n(a),s=n("ZLEe"),o=n.n(s),l=n("P9l9"),r=n("dia3"),c={},h={data:function(){return{editAll:0,firstLevelChannel:"",userperadmin:{},first:0,show:4,companyList:[],channelCountList:{},companySelected:"",fuzzySearchCompany:"",loading:!1,loading1:!1,loading2:!1,loading3:!1,loading4:!1,loading5:!1,loading6:!1,companyTableData:[],currentPage:1,pageSizes:[10,20,50],pageSize:10,dataSize:0,editId:"",createTime:"",channelCou:"",permissionId:"",actionCompanyInfo:{sessionid:"",company:"",bankAccount:"",bank:"",dutyParagraph:"",phone:"",address:"",contacts:"",mobileno:"",email:"",pwd:""},actionValidate:{mobileNo:!1,email:!1,channelNo:!1},isEdit:!1,editChannelId:"",editRewardId:"",editRewards:[],channelInfo:{proxyId:"",channelName:"",channelList:[],channelNo:"",channelNoList:[],channelLevel:"",channelLevalList:[{channelNo:"",name:"全部渠道级别"},{channelNo:1,name:"一级渠道"},{channelNo:2,name:"二级渠道"}],channelMan:"",channelManList:[],appSelected:[],currentPage:1,pageSizes:[10,20,50],pageSize:10,dataSize:0,first:0,show:1},currentCompany:"",currentFirstLevelChannelNo:"",channelTableData:[],companyInfo:{id:"",name:"",channelCount:0},createChannelAuthority:!1,channelAttributeList:[],channelTypeList:[],subdivisionList:[],hasError:!1,originChannelNo:"",originChannel:"",channelPrefix:"",actionChannelInfo:{sessionid:"",proxyId:"",higherChannelId:"",level:"",channelName:"",channelNamePY:"",channelNo:"",channel:"",isCreate:1,appId:"",attribute:"",type:"",subdivision:"",url:"",rewardId:"",gitTimestartAndEnd:"",adminId:"",permissionId:"",rewards:[],isSynchro:1,synchronous:1,seo:0,status:1,pwd:"",isChange:0},firstLevelChannelRewardInfo:{visible:!1,loading:!1,tableData:[]},appInfo:{appList:[],appSelected:"",payForAppList:[]},channelAttributeInfo:{attributeList:[],attributeSelected:"",attributeIdSelected:"",parentIdSelected:""},channelTypeInfo:{typeListAll:[],typeList:[],typeSelected:""},channelDivisionInfo:{divisionListAll:[],divisionList:[],divisionSelected:""},firstLevelFcDataList:[],mainReward:{channelId:"",data:{}},fcType:{isStep:0,stepData:"",text:"分成单价",text1:"注册用户",unitText:"元"},fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]},editFcTypeData:[],rewardTypeInfo:{typeList:[],typeSelected:26},settlementCycleInfo:{typeListAll:[],typeList:[],typeSelected:"",disabled:!1},cacCostTypeInfo:{typeListAll:[],typeList:[],typeSelected:""},manInfo:{manListAll:[],manList:[],manSelected:""},datetimeInfo:{currentDate:"",currentDatetime:""},chartPermissionInfo:{id:0,registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1},fcHistoryList:[],dialogVisible:!1,addNewChannel:!1,channelEdit:!1,DividedHistory:!1}},mounted:function(){var e=this;try{for(var t=JSON.parse(unescape(sessionStorage.getItem("userPermiss"))),n=0;n<t.data.length;n++)if("01"==t.data[n].meta&&t.data[n].children&&t.data[n].children.length>0)for(var a=0;a<t.data[n].children.length;a++)if("0102"==t.data[n].children[a].meta&&t.data[n].children[a].children&&t.data[n].children[a].children.length>0)for(var i=0;i<t.data[n].children[a].children.length;i++)"010201"==t.data[n].children[a].children[i].meta?this.addNewChannel="0"!=t.data[n].children[a].children[i].show:"010202"==t.data[n].children[a].children[i].meta?this.channelEdit="0"!=t.data[n].children[a].children[i].show:"010203"==t.data[n].children[a].children[i].meta&&(this.DividedHistory="0"!=t.data[n].children[a].children[i].show)}catch(e){}var s=JSON.parse(localStorage.getItem("userperadmin"));this.userperadmin=s,this.editAll=1|this.userperadmin.admin.editAll;var o={sessionid:s.sessionid};this.loading1=!0,Object(l.v)(o).then(function(t){if(e.loading1=!1,0===t.data.status){e.companyList=t.data.proxyList;for(var n=0;n<e.companyList.length;n++){var a=e.companyList[n].id.toString();e.channelCountList[a]={channelCount:e.companyList[n].channelCou}}}else 1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading1=!1,e.toast("服务器错误，请联系管理员","error")}),this.getChannelParams(),this.searchChannelList(1),this.setActionChannelParams()},filters:{fcNumberFilter:function(e){for(var t=0;t<c.length;t++)if(e===c[t].id)return c[t].other.split(",")[0]},fcNumber1Filter:function(e){for(var t=0;t<c.length;t++)if(e===c[t].id)return c[t].other.split(",")[1]},fcNumber2Filter:function(e){for(var t=0;t<c.length;t++)if(e===c[t].id)return c[t].other.split(",")[2]},firstFcFormatter:function(e){return e?parseInt(e.max)+1:0},lastFcFormatter:function(e){return parseInt(e.max)+1},rewardTypeIdFilter:function(e){for(var t=0;t<c.length;t++)if(e===c[t].id)return c[t].name}},computed:{current:function(){return 1===this.show?"渠道商列表":2===this.show?"新增渠道商":3===this.show?"编辑渠道商信息":"子渠道商列表"},searchPage:function(){return this.currentPage-1},channelListPosition:function(){return 2===this.channelInfo.show?"新增渠道":"编辑渠道信息"}},methods:{appFormatter:function(e,t,n){var a=n;return this.appInfo.appList.forEach(function(e){e.id===n&&(a=e.name)}),a},companyChange:function(e){this.companyInfo.channelCount=this.channelCountList[e.toString()].channelCount,this.actionChannelInfo.channelNo="",this.actionChannelInfo.channel="",this.actionChannelInfo.proxyId=e,this.companyInfo.channelCount>0?(this.actionChannelInfo.level="二级渠道",this.createChannelAuthority=!1):(this.actionChannelInfo.level="一级渠道",this.createChannelAuthority=!0,this.initFcOfFirstChannel(e))},indexFormatter1:function(e){return this.channelInfo.pageSize*(this.channelInfo.currentPage-1)+1+e},timeStempFormatter:function(e,t,n){return Object(r.h)(e.date)},getChannelFcHistoryFun:function(e,t){var n=this;this.dialogVisible=!0;var a={sessionid:this.userperadmin.sessionid,channelId:e.id};this.fcHistoryList=[],this.loading6=!0,Object(l._9)(a).then(function(e){if(n.loading6=!1,0===e.data.status){n.fcHistoryList=e.data.rewardList;var t=n;n.fcHistoryList.forEach(function(e,n,a){a[n].rewardPrice=t.rewardPriceFormatter(e.rewardPrice,1)})}else 1===e.data.status?n.$router.replace("/login"):n.toast(e.data.statusMsg,"error")}).catch(function(e){n.loading6=!1,n.toast("服务器错误，请联系管理员1","error")})},checkCompanyFun:function(){},checkMobileNo:function(){return""!==this.actionCompanyInfo.mobileno&&11===this.actionCompanyInfo.mobileno.length&&/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(this.actionCompanyInfo.mobileno)?(this.actionValidate.mobileNo=!1,!0):(this.toast("联系人不正确","warning"),this.actionValidate.mobileNo=!0,!1)},checkEmail:function(){return""===this.actionCompanyInfo.email||-1===this.actionCompanyInfo.email.indexOf("@")||-1===this.actionCompanyInfo.email.indexOf(".")?(this.actionValidate.email=!0,this.toast("联系人邮箱不正确","warning"),!1):(this.actionValidate.email=!1,!0)},checkMobileNoFun:function(){var e=this;if((2===this.show||3===this.show)&&this.checkMobileNo()){var t={sessionid:this.userperadmin.sessionid,mobileNo:this.actionCompanyInfo.mobileno};Object(l.r)(t).then(function(t){0===t.data.status||(1===t.data.status?e.$router.replace("/login"):(e.hasError=!0,e.toast(t.data.statusMsg,"error")))}).catch(function(t){e.toast("服务器错误，请联系管理员","error")})}},checkEmailFun:function(){var e=this;if((2===this.show||3===this.show)&&this.checkEmail()){var t={sessionid:this.userperadmin.sessionid,email:this.actionCompanyInfo.email};Object(l.p)(t).then(function(t){0===t.data.status||(1===t.data.status?e.$router.replace("/login"):(e.hasError=!0,e.toast(t.data.statusMsg,"error")))}).catch(function(t){e.toast("服务器错误，请联系管理员","error")})}},companyFilter:function(e){this.fuzzySearchCompany=e},searchByCompany:function(){var e,t=parseInt(this.companySelected);""===this.companySelected?this.getChannelList():isNaN(t)?(e={sessionid:this.userperadmin.sessionid,company:this.companySelected,first:0},this.getChannelList(e)):(e={sessionid:this.userperadmin.sessionid,id:this.companySelected,first:0},this.getChannelList(e))},getChannelList:function(e){var t=this;this.loading||(e?(e.pageId=this.searchPage,e.pageSize=this.pageSize):e={sessionid:this.userperadmin.sessionid,first:this.first,pageId:this.searchPage,pageSize:this.pageSize},this.loading=!0,Object(l.k)(e).then(function(e){t.loading=!1,0===e.data.status?(e.data.listSize&&(t.dataSize=parseInt(e.data.listSize)),t.companyTableData=e.data.proxyList):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading=!1,t.toast("服务器错误，请联系管理员","error")}))},pageSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.first=1,this.getChannelList()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.getChannelList()},cancelAdd:function(){this.resetActionInput(),this.show=1},saveCompanyInfo:function(){var e,t=this;if(!this.loading4)if(""!==this.actionCompanyInfo.company)if(""!==this.actionCompanyInfo.bankAccount)if(""!==this.actionCompanyInfo.bank)if(""!==this.actionCompanyInfo.dutyParagraph&&18===this.actionCompanyInfo.dutyParagraph.length)if(""!==this.actionCompanyInfo.phone)if(""!==this.actionCompanyInfo.address)if(""!==this.actionCompanyInfo.contacts)if(""!==this.actionCompanyInfo.mobileno&&11===this.actionCompanyInfo.mobileno.length)if(""!==this.actionCompanyInfo.email)if(-1!==this.actionCompanyInfo.email.indexOf("@"))if(""!==this.actionCompanyInfo.pwd||2!==this.show){var n=this.chartPermissionInfo;this.permissionFormatter(n,3),n=this.permissionFormatter(n,2),(e=this.actionCompanyInfo).channelPermission=n,2===this.show&&(e.sessionid=this.userperadmin.sessionid),3===this.show&&(e.id=this.editId,e.channelCou=this.channelCou,e.permissionId=this.permissionId,e.createTime=this.createTime),this.loading4=!0,Object(l._22)(e).then(function(e){t.loading4=!1,0===e.data.status?(t.toast("保存成功","success"),t.show=1,t.getChannelList()):1===e.data.status?t.$router.replace("/login"):(t.chartPermissionInfo=t.permissionFormatter(t.chartPermissionInfo,1),t.toast(e.data.statusMsg,"error"))}).catch(function(e){t.loading4=!1,t.toast("服务器错误，请联系管理员","error")})}else this.toast("初始密码不能为空","warning");else this.toast("联系人邮箱格式不正确","warning");else this.toast("联系人邮箱不能为空","warning");else this.toast("联系人电话不能为空且长度为11","warning");else this.toast("联系人不能为空","warning");else this.toast("公司地址不能为空","warning");else this.toast("公司电话不能为空","warning");else this.toast("税号不能为空且长度为18","warning");else this.toast("开户行不能为空","warning");else this.toast("银行账号不能为空","warning");else this.toast("公司名称不能为空","warning")},backToIndex:function(){this.show=1,this.channelInfo.show=1,this.channelInfo.channelList=[],this.channelInfo.channelName="",this.channelInfo.channelNoList=[],this.channelInfo.channelNo="",this.channelInfo.channelLevalList=[],this.channelInfo.channelLevel="",this.manInfo.manSelected="",this.manInfo.manList=[]},backToChannelList:function(){this.channelInfo.show=1,this.resetChannelInfo()},subChannels:function(e,t){this.show=4,this.channelTableData=[],this.channelInfo.proxyId=e.id,this.companyInfo.id=e.id,this.companyInfo.name=e.company,this.currentCompany=e.company,this.permissionId=e.permissionId,this.currentFirstLevelChannelNo=e.channelNo,this.getChannelParams(),this.searchChannelList(1)},resetActionInput:function(){this.actionCompanyInfo.company="",this.actionCompanyInfo.bankAccount="",this.actionCompanyInfo.bank="",this.actionCompanyInfo.dutyParagraph="",this.actionCompanyInfo.phone="",this.actionCompanyInfo.address="",this.actionCompanyInfo.contacts="",this.actionCompanyInfo.mobileno="",this.actionCompanyInfo.email="",this.actionCompanyInfo.pwd="",this.permissionFormatter(this.chartPermissionInfo,4)},editCompany:function(e,t){var n=this;this.show=3,this.editId=e.id,this.createTime=e.createTime,this.channelCou=e.channelCou,this.permissionId=e.permissionId,this.actionCompanyInfo.sessionid=this.userperadmin.sessionid,this.actionCompanyInfo.company=e.company,this.actionCompanyInfo.bankAccount=void 0===e.bankAccount?"0":e.bankAccount,this.actionCompanyInfo.bank=void 0===e.bank?"0":e.bank,this.actionCompanyInfo.dutyParagraph=void 0===e.dutyParagraph?"0":e.dutyParagraph,this.actionCompanyInfo.phone=void 0===e.phone?"0":e.phone,this.actionCompanyInfo.address=void 0===e.address?"0":e.address,this.actionCompanyInfo.contacts=e.contacts,this.actionCompanyInfo.mobileno=e.mobileno,this.actionCompanyInfo.email=e.email,this.actionCompanyInfo.pwd=e.pwd;var a={sessionid:this.userperadmin.sessionid,permissionId:e.permissionId};Object(l.R)(a).then(function(e){0===e.data.status?(n.chartPermissionInfo=e.data.channelPermission,n.chartPermissionInfo=n.permissionFormatter(n.chartPermissionInfo,1)):1===e.data.status?n.$router.replace("/login"):n.toast(e.data.statusMsg,"error")}).catch(function(e){n.loading=!1,n.toast("服务器错误，请联系管理员","error")})},permissionFormatter:function(e,t){var n=o()(e),a=i()(e);if(1===t)a.forEach(function(t,a){"id"!==n[a]&&(e[n[a]]=1===t)});else if(2===t)a.forEach(function(t,a){"id"!==n[a]&&(e[n[a]]=!0===t?1:0)});else{if(3===t)return a.includes(!0);var s=this;a.forEach(function(e,t){"id"!==n[t]?s.chartPermissionInfo[n[t]]=!1:s.chartPermissionInfo[n[t]]=""})}return e},addCompany:function(){this.resetActionInput(),this.show=2},deleteACompany:function(e,t){var n=this;this.$confirm("是否禁用“"+e.company+"(公司名称)”。点击“确定”确认禁用，点击“取消”关闭窗口，返回渠道管理页面","禁用渠道商",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){n.toast("删除成功!","success")}).catch(function(){n.toast("已取消删除!","info")})},channelNameFilter:function(e){},channelNoFilter:function(e){},getChannelParams:function(){var e=this,t={sessionid:this.userperadmin.sessionid};this.loading2=!0,Object(l.Q)(t).then(function(t){if(e.loading2=!1,0===t.data.status){if(e.channelInfo.channelList=[],e.channelInfo.channelNoList=[],e.channelInfo.channelList=t.data.channelNameList,e.channelInfo.channelNoList=t.data.channelNoList,t.data.adminIdList&&0!==t.data.adminIdList.length){var n=e;n.channelInfo.channelManList=[];try{t.data.adminIdList.forEach(function(e,t){var a=e.split(","),i={id:a[0],name:a[1]};n.channelInfo.channelManList.push(i)})}catch(e){}}}else 1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading2=!1,e.toast("服务器错误，请联系管理员","error")})},searchChannelList:function(e){var t=this,n={sessionid:this.userperadmin.sessionid,proxyId:this.channelInfo.proxyId,first:0,pageId:this.channelInfo.currentPage-1,pageSize:this.channelInfo.pageSize};void 0!==this.channelInfo.channelName&&""!==this.channelInfo.channelName&&(n.channelName=this.channelInfo.channelName.replace(/[-]/g,"")),void 0!==this.channelInfo.channelNo&&""!==this.channelInfo.channelNo&&(n.channel=this.channelInfo.channelNo.replace(/[-]/g,"")),void 0!==this.channelInfo.channelLevel&&""!==this.channelInfo.channelLevel&&(n.level=this.channelInfo.channelLevel),void 0!==this.channelInfo.channelMan&&""!==this.channelInfo.channelMan&&(n.adminId=this.channelInfo.channelMan),void 0!==this.channelInfo.appSelected&&""!==this.channelInfo.appSelected&&(n.appid=this.channelInfo.appSelected),this.loading3=!0,Object(l.S)(n).then(function(e){if(t.loading3=!1,0===e.data.status){if(e.data.channelList){var n=t;e.data.channelList.forEach(function(e,t,a){a[t].rewardPrice=n.rewardPriceFormatter(e.rewardPrice)})}t.channelTableData=e.data.channelList,e.data.listSize&&(t.channelInfo.dataSize=parseInt(e.data.listSize))}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading3=!1,t.toast("服务器错误，请联系管理员","error")})},rewardTypeIdFormatter:function(e,t,n){for(var a=0;a<this.rewardTypeInfo.typeList.length;a++)if(n===this.rewardTypeInfo.typeList[a].id)return this.rewardTypeInfo.typeList[a].name},rewardPriceFormatter:function(e,t){if(e){var n=e.split(","),a=[],i=[];if(n.length<=1)if(1===t){var s=e.split("/");a.push(s[1])}else a.push(n[0]);else this.editFcTypeData=n,n.forEach(function(e,t){var n=e.split("/");i.push({max:n[0],price:n[1]}),a[t]=0===t?"0 - "+n[0]+" : "+n[1]:parseInt(i[t-1].max)+1+" - "+n[0]+" : "+n[1]});return a}},channelTablePageSizeChange:function(e){this.channelInfo.pageSize=e,this.searchChannelList()},channelTableCurrentPageChange:function(e){this.channelInfo.currentPage=e,this.searchChannelList()},setActionChannelParams:function(e){var t=this,n={sessionid:this.userperadmin.sessionid};Object(l.T)(n).then(function(n){if(0===n.data.status){if(t.appInfo.appList=n.data.appList,t.channelAttributeInfo.attributeList=n.data.channelAttribute,t.channelTypeInfo.typeListAll=n.data.channelType,t.channelDivisionInfo.divisionListAll=n.data.channelSubdivision,n.data.adminIdList&&0!==n.data.adminIdList.length){var a=t;a.manInfo.manList=[],n.data.adminIdList.forEach(function(e,t){var n=e.split(","),i={id:n[0],name:n[1],index:n[2]};a.manInfo.manList.push(i)}),t.manInfo.manListAll=a.manInfo.manList}t.rewardTypeInfo.typeList=n.data.rewardTypeList,c=n.data.rewardTypeList,t.settlementCycleInfo.typeList=n.data.settlementCycleList,t.settlementCycleInfo.typeListAll=n.data.settlementCycleList,t.cacCostTypeInfo.typeList=n.data.costingList,e&&e(!0)}else 1===n.data.status?t.$router.replace("/login"):t.toast(n.data.statusMsg,"error")}).catch(function(e){t.loading=!1,t.toast("服务器错误，请联系管理员2","error")})},addChannel:function(){this.resetChannelInfo(),this.channelInfo.show=2,this.isEdit=!1,this.actionCompanyInfo.company="",this.actionChannelInfo.gitTimestartAndEnd=Object(r.i)()[0]},initFcOfFirstChannel:function(e){var t=this,n={sessionid:this.userperadmin.sessionid,proxyid:e};Object(l.Y)(n).then(function(e){if(0===e.data.status){var n=t;t.firstLevelFcDataList=[],e.data.payCompanyList.forEach(function(e){n.firstLevelFcDataList.push({modified:!1,appid:parseInt(e.appid),isChange:0,isStep:0,fcType:26,settlementCycle:"",cacCostType:"",stepData:"",fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}})})}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员","error")})},getFirstLevelChannelFun:function(e){var t=this,n={sessionid:this.userperadmin.sessionid,proxyid:e};this.loading5=!0,Object(l.V)(n).then(function(e){t.loading5=!1,0===e.data.status?t.firstLevelChannel=e.data.channelNo.replace("all_",""):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading5=!1,t.toast("服务器错误，请联系管理员2","error")})},editChannel:function(e,t){this.firstLevelChannel=this.getFirstLevelChannelFun(e.proxyId);var n=this;this.originChannelNo=e.channelNo,this.originChannel=e.channel,this.editChannelId=e.id,this.editRewardId=e.rewardId,this.actionChannelInfo.appId=e.appId,this.isEdit=!0,this.appInfo.appList.forEach(function(t,a){t.id===e.appId&&(n.appInfo.appSelected=a,n.channelPrefix=t.other2,n.appInfo.currentUrl=t.other)}),this.channelAttributeInfo.attributeSelected=0===e.attribute?"":e.attribute,this.channelTypeInfo.typeList=n.channelTypeInfo.typeListAll,this.attributeChange(e.attribute),this.channelTypeInfo.typeSelected=0===e.type?"":e.type,this.rewardTypeInfo.typeSelected=0===e.rewardTypeId?"":e.rewardTypeId,this.channelDivisionInfo.divisionList=this.channelDivisionInfo.divisionListAll,this.typeChange(e.type),this.channelDivisionInfo.divisionSelected=0===e.subdivision?"":e.subdivision,this.manInfo.manList=this.manInfo.manListAll,this.channelInfo.show=3,1===e.level?(this.createChannelAuthority=!0,this.actionChannelInfo.level="一级渠道",this.manInfo.manSelected=e.adminId.toString(),this.getFirstLevelPayforAppFun(e)):(this.createChannelAuthority=!1,this.actionChannelInfo.level="二级渠道",this.companyInfo.channelCount=1,this.getRewardListFun(e)),this.actionChannelInfo.channelName=e.channelName,this.actionChannelInfo.channelNo=e.channelNo,this.actionChannelInfo.channel=e.channel,this.actionChannelInfo.url=e.url,this.actionChannelInfo.isSynchro=1|e.linkage,this.actionChannelInfo.synchronous=e.synchronous,this.companyInfo.name=e.proxyId,this.actionChannelInfo.seo=e.seo,e.pwd&&""!==e.pwd?this.actionChannelInfo.pwd=e.pwd.toString():this.actionChannelInfo.pwd=""},getFirstLevelRewardAction:function(e,t){this.firstLevelChannelRewardInfo.tableData=[],this.getPayCompanyFun(e)},getPayCompanyFun:function(e,t){var n=this,a={sessionid:this.userperadmin.sessionid,proxyid:e.proxyId};Object(l.Y)(a).then(function(a){if(0===a.data.status){var i=a.data.payCompanyList,s=n.appInfo.appList;n.appInfo.payForAppList=[];for(var o=[],l=0;l<i.length;l++)for(var r=0;r<s.length;r++)if(i[l].appid===s[r].id){if(o.includes(i[l].appid))continue;o.push(i[l].appid),n.appInfo.payForAppList.push({id:s[r].id,name:s[r].name})}"fromActionChannel"===t?n.getRewardMainFun(e,n.appInfo.payForAppList):n.getFirstLevelRewardListFun(e,n.appInfo.payForAppList)}else 1===a.data.status?n.$router.replace("/login"):n.toast(a.data.statusMsg,"error")}).catch(function(e){n.toast("服务器错误，请联系管理员","error")})},getFirstLevelRewardListFun:function(e,t){for(var n=this,a=[],i=0;i<t.length;i++)a.push(t[i].id);var s={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:a.toString()};0!==a.length?(this.firstLevelChannelRewardInfo.visible=!0,this.firstLevelChannelRewardInfo.loading=!0,Object(l._9)(s).then(function(e){if(0===e.data.status){var t=n;e.data.rewardList.forEach(function(e){e.rewardPrice=t.rewardPriceFormatter(e.rewardPrice),t.firstLevelChannelRewardInfo.tableData.push(e)})}else 1===e.data.status?n.$router.replace("/login"):n.toast(e.data.statusMsg,"error");n.firstLevelChannelRewardInfo.loading=!1}).catch(function(e){n.firstLevelChannelRewardInfo.loading=!1,n.toast("服务器错误，请联系管理员","error")})):this.toast("请先配置付款公司","warning")},getFirstLevelPayforAppFun:function(e){this.getPayCompanyFun(e,"fromActionChannel")},getRewardMainFun:function(e,t){for(var n=this,a=[],i=0;i<t.length;i++)a.push(t[i].id);a=a.toString();var s={sessionid:this.userperadmin.sessionid,channelId:e.id,appid:a};Object(l._8)(s).then(function(t){if(0===t.data.status){for(var a in t.data.mainReward)t.data.mainReward[a][0]&&t.data.mainReward[a][0].date?n.actionChannelInfo.gitTimestartAndEnd=t.data.mainReward[a][0].date:n.actionChannelInfo.gitTimestartAndEnd="";var i=t.data.mainReward;n.firstLevelFcDataList.splice(0);var s=o()(i);n.mainReward.channelId=e.id;for(var l=0;l<s.length;l++){var r;if(0!==i[s[l]].length){if(1==i[s[l]].length)r={modified:!0,channelId:i[s[l]][0].channelId,id:i[s[l]][0].id,date:i[s[l]][0].date,appid:parseInt(s[l]),isStep:0,fcType:i[s[l]][0].typeId,settlementCycle:0===i[s[l]][0].settlementCycle?"":i[s[l]][0].settlementCycle,cacCostType:0===i[s[l]][0].costing?"":i[s[l]][0].costing,isChange:void 0!==i[s[l]][0].isChange?i[s[l]][0].isChange:0,stepData:i[s[l]][0].price,fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}};else{r={channelId:i[s[l]][0].channelId,id:i[s[l]][0].id,date:i[s[l]][0].date,appid:parseInt(s[l]),isStep:1,fcType:i[s[l]][0].typeId,settlementCycle:0===i[s[l]][0].settlementCycle?"":i[s[l]][0].settlementCycle,cacCostType:0===i[s[l]][0].costing?"":i[s[l]][0].costing,isChange:void 0!==i[s[l]][0].isChange?i[s[l]][0].isChange:0};var c={length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]};c.mins=[0],c.rewards=[],i[s[l]].forEach(function(e,t){t===i[s[l]].length-1?c.last.price=e.price:(c.mins.push(e.max+1),c.rewards.push({max:e.max,price:e.price}))}),c.length=i[s[l]].length-1,r.fcTypeData=c}n.firstLevelFcDataList.push(r)}else n.firstLevelFcDataList.push({modified:!1,appid:parseInt(s[l]),isStep:0,fcType:26,settlementCycle:"",cacCostType:"",stepData:"",isChange:0,fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]}})}8==n.channelAttributeInfo.attributeSelected&&n.attributeChange(8,1)}else 1===t.data.status?n.$router.replace("/login"):n.toast(t.data.statusMsg,"error")}).catch(function(e){n.toast("服务器错误，请联系管理员1","error")})},getRewardListFun:function(e){var t=this,n=[],a={sessionid:this.userperadmin.sessionid,rewardId:e.rewardId};Object(l._9)(a).then(function(e){if(0===e.data.status){n=e.data.rewardList,e.data.rewardList[0]&&e.data.rewardList[0].date?t.actionChannelInfo.gitTimestartAndEnd=e.data.rewardList[0].date:t.actionChannelInfo.gitTimestartAndEnd="",t.editRewards=n;var a=e.data.rewardList.length;if(0!==a)if(1===a)t.fcType.isStep=0,t.actionChannelInfo.isChange=e.data.rewardList[0].isChange,t.fcType.stepData=e.data.rewardList[0].price,t.fcType.typeSelected=e.data.rewardList[0].typeId,t.settlementCycleInfo.typeSelected=0===e.data.rewardList[0].settlementCycle?"":e.data.rewardList[0].settlementCycle,t.cacCostTypeInfo.typeSelected=0===e.data.rewardList[0].costing?"":e.data.rewardList[0].costing,t.manInfo.manSelected="0"===e.data.rewardList[0].adminId.toString()?"":e.data.rewardList[0].adminId.toString();else{t.fcType.isStep=1,t.actionChannelInfo.isChange=e.data.rewardList[0].isChange,t.fcType.typeSelected=e.data.rewardList[0].typeId,t.settlementCycleInfo.typeSelected=e.data.rewardList[0].settlementCycle,t.cacCostTypeInfo.typeSelected=e.data.rewardList[0].costing,t.manInfo.manSelected=e.data.rewardList[0].adminId.toString();var i=t;i.fcTypeData.mins=[0],i.fcTypeData.rewards=[],e.data.rewardList.forEach(function(e,t){t===a-1?i.fcTypeData.last.price=e.price:(i.fcTypeData.mins.push(e.max+1),i.fcTypeData.rewards.push({max:e.max,price:e.price}))}),i.fcTypeData.length=a-1}}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员1","error")})},deleteAChannel:function(e,t){var n=this;this.$confirm("是否禁用“"+e.channelName+"(渠道名称)”。点击“确定”确认禁用，点击“取消”关闭窗口，返回渠道管理页面","禁用渠道",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){n.toast("禁用成功!","success")}).catch(function(){n.toast("已取消禁用","info")})},cancelAddChannel:function(){this.resetChannelInfo(),this.channelInfo.show=1},resetChannelInfo:function(){this.firstLevelChannel="",this.companyInfo.name="",this.actionChannelInfo.level="",this.actionChannelInfo.channelName="",this.actionChannelInfo.channelNo="",this.actionChannelInfo.channel="",this.actionChannelInfo.url="",this.actionChannelInfo.isSynchro=1,this.actionChannelInfo.synchronous=0,this.actionChannelInfo.status=1,this.actionChannelInfo.pwd="",this.appInfo.appSelected="",this.channelAttributeInfo.attributeSelected="",this.channelTypeInfo.typeSelected="",this.channelDivisionInfo.divisionSelected="",this.rewardTypeInfo.typeSelected=26,this.fcType.isStep=0,this.fcType.stepData="",this.fcTypeData.last={max:999999999,price:0},this.fcTypeData.rewards=[{max:0,price:0}],this.fcTypeData.length=1,this.fcTypeData.mins=[0],this.settlementCycleInfo.typeSelected="",this.cacCostTypeInfo.typeSelected="",this.manInfo.manSelected="",this.cacCostTypeInfo.typeSelected="",this.settlementCycleInfo.typeSelected=""},saveFirstChannelFcInfo:function(e){var t=this;if(void 0!==e)for(var n=o()(this.mainReward.data),a=0;a<n.length;a++)this.mainReward.data[n[a]].forEach(function(t){t.channelId=e});var i={sessionid:this.userperadmin.sessionid,mainReward:this.mainReward.data};Object(l._19)(i).then(function(e){0===e.data.status?(t.channelInfo.show=1,t.searchChannelList(),t.resetChannelInfo(),t.getChannelParams()):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.toast("服务器错误，请联系管理员","error")})},saveChannelInfo:function(){if(!this.loading5)if(this.isEdit||""!==this.companyInfo.name)if(""!==this.actionChannelInfo.channelName)if(this.actionValidate.channelNo)this.toast("渠道编码不能为空","warning");else if(""!==this.appInfo.appSelected||"一级渠道"===this.actionChannelInfo.level)if(""!==this.channelAttributeInfo.attributeSelected)if(""!==this.channelTypeInfo.typeSelected)if(""!==this.channelDivisionInfo.divisionSelected){if(8!==this.channelAttributeInfo.attributeSelected)if("一级渠道"===this.actionChannelInfo.level){if(0===this.firstLevelFcDataList.length)return void this.toast("请先配置付款公司","warning");for(var e=0;e<this.firstLevelFcDataList.length;e++){if(0===this.firstLevelFcDataList[e].isStep&&""===this.firstLevelFcDataList[e].stepData)return void this.toast("分成单价(分成比例)不能为空","warning");if(1===this.firstLevelFcDataList[e].isStep&&(t=i()(this.firstLevelFcDataList[e].fcTypeData.rewards)).includes(0)&&t.includes("")&&0===this.firstLevelFcDataList[e].fcTypeData.last.price&&""===this.firstLevelFcDataList[e].fcTypeData.last.price)return void this.toast("分成单价(分成比例|首提人数|首提金额|注册用户数)不能为空","warning");if(""===this.firstLevelFcDataList[e].cacCostType)return void this.toast("成本计算方式不能为空","warning")}}else{if(0===this.fcType.isStep&&""===this.fcType.stepData)return void this.toast("分成单价(分成比例)不能为空","warning");var t;if(1===this.fcType.isStep&&(t=i()(this.fcTypeData.rewards)).includes(0)&&t.includes("")&&0===this.fcTypeData.last.price&&""===this.fcTypeData.last.price)return void this.toast("分成单价(分成比例|首提人数|首提金额|注册用户数)不能为空","warning");if(""===this.cacCostTypeInfo.typeSelected)return void this.toast("成本计算方式不能为空","warning")}if("一级渠道"===this.actionChannelInfo.level){for(e=0;e<this.firstLevelFcDataList.length;e++)if(""===this.firstLevelFcDataList[e].settlementCycle)return void this.toast("结算周期不能为空","warning")}else if(""===this.settlementCycleInfo.typeSelected)return void this.toast("结算周期不能为空","warning");if(""!==this.manInfo.manSelected)if(""===this.actionChannelInfo.pwd||this.actionChannelInfo.pwd.length<5)this.toast("登录密码不能为空且不能少于5位","warning");else if(this.actionChannelInfo.gitTimestartAndEnd){var n={sessionid:this.userperadmin.sessionid,proxyId:this.companyInfo.name,level:"二级渠道"===this.actionChannelInfo.level?2:1,channelName:this.actionChannelInfo.channelName,channelNamePY:"",channelNo:this.actionChannelInfo.channelNo,channel:this.actionChannelInfo.channel,isCreate:"二级渠道"===this.actionChannelInfo.level?0:this.actionChannelInfo.isCreate,appId:this.actionChannelInfo.appId,attribute:this.channelAttributeInfo.attributeSelected,type:this.channelTypeInfo.typeSelected,subdivision:this.channelDivisionInfo.divisionSelected,url:this.actionChannelInfo.url,adminId:this.manInfo.manSelected,permissionId:this.permissionId,synchronous:this.actionChannelInfo.synchronous,status:this.actionChannelInfo.status,pwd:this.actionChannelInfo.pwd,seo:this.actionChannelInfo.seo};if(3===this.channelInfo.show&&(n.id=this.editChannelId,n.rewardId=this.editRewardId),this.actionChannelInfo.rewards=[],"一级渠道"===this.actionChannelInfo.level){for(e=0;e<this.firstLevelFcDataList.length;e++){var a={},s=this.firstLevelFcDataList[e].appid;if(this.mainReward.data[s]=[],0===this.firstLevelFcDataList[e].isStep)a.appid=s,a.channelId=this.mainReward.channelId,this.firstLevelFcDataList[e].id&&(a.id=this.firstLevelFcDataList[e].id,a.date=this.firstLevelFcDataList[e].date),a.price=this.firstLevelFcDataList[e].stepData,a.order=1,a.adminId=this.manInfo.manSelected,a.updateAdminId=this.userperadmin.admin.id,a.costing=this.firstLevelFcDataList[e].cacCostType,a.isChange=this.firstLevelFcDataList[e].isChange,a.settlementCycle=this.firstLevelFcDataList[e].settlementCycle,8!==this.channelAttributeInfo.attributeSelected?a.typeId=this.firstLevelFcDataList[e].fcType:a.typeId="",this.mainReward.data[s].push(a);else{var o=this.firstLevelFcDataList[e].fcTypeData.rewards.slice();o.push(this.firstLevelFcDataList[e].fcTypeData.last),this.firstLevelFcDataList[e].modified&&this.actionChannelInfo.gitTimestartAndEnd;var l=this;o.forEach(function(t,n){t.channelId=l.mainReward.channelId,t.order=n+1,t.appid=s,t.typeId=l.firstLevelFcDataList[e].fcType,t.adminId=l.manInfo.manSelected,t.updateAdminId=l.userperadmin.admin.id,t.costing=l.firstLevelFcDataList[e].cacCostType,t.isChange=l.firstLevelFcDataList[e].isChange,t.settlementCycle=l.firstLevelFcDataList[e].settlementCycle,3===l.channelInfo.show&&l.firstLevelFcDataList[e].modified&&(t.id=l.firstLevelFcDataList[e].id,t.channelId=l.firstLevelFcDataList[e].channelId),t.date=l.actionChannelInfo.gitTimestartAndEnd,l.mainReward.data[s].push(t)})}}n.linkage=this.actionChannelInfo.isSynchro,n.mainReward=this.mainReward.data,this.saveChannelFun(n,1)}else 0===this.fcType.isStep?((a={}).price=this.fcType.stepData,a.order=1,8!==this.channelAttributeInfo.attributeSelected?a.typeId=this.rewardTypeInfo.typeSelected:a.typeId="",a.adminId=this.manInfo.manSelected,a.updateAdminId=this.userperadmin.admin.id,a.costing=this.cacCostTypeInfo.typeSelected,a.isChange=this.actionChannelInfo.isChange,a.settlementCycle=this.settlementCycleInfo.typeSelected,3===this.channelInfo.show&&0!==this.editRewards.length&&(a.id=this.editRewards[0].id,a.channelId=this.editRewards[0].channelId),a.date=this.actionChannelInfo.gitTimestartAndEnd,this.actionChannelInfo.rewards.push(a)):(this.actionChannelInfo.rewards=this.fcTypeData.rewards.slice(),this.actionChannelInfo.rewards.push(this.fcTypeData.last),l=this,this.actionChannelInfo.rewards.length!==this.editRewards.length&&this.actionChannelInfo.gitTimestartAndEnd,this.actionChannelInfo.rewards.forEach(function(e,t){e.order=t+1,e.typeId=l.rewardTypeInfo.typeSelected,e.adminId=l.manInfo.manSelected,e.updateAdminId=l.userperadmin.admin.id,e.costing=l.cacCostTypeInfo.typeSelected,e.isChange=l.actionChannelInfo.isChange,e.settlementCycle=l.settlementCycleInfo.typeSelected,3===l.channelInfo.show&&0!==l.editRewards.length&&(e.id=l.editRewards[0].id,e.channelId=l.editRewards[0].channelId),e.date=l.actionChannelInfo.gitTimestartAndEnd})),n.rewards=this.actionChannelInfo.rewards,this.saveChannelFun(n)}else this.toast("起始时间不能为空","warning");else this.toast("负责人不能为空","warning")}else this.toast("渠道细分不能为空","warning");else this.toast("渠道类型不能为空","warning");else this.toast("渠道属性不能为空","warning");else this.toast("所属APP不能为空","warning");else this.toast("渠道名称不能为空","warning");else this.toast("渠道商不能为空","warning")},saveChannelFun:function(e,t){var n=this;this.loading5=!0,Object(l.f)(e).then(function(e){n.loading5=!1,0===e.data.status?1===t?n.saveFirstChannelFcInfo(e.data.id):1===t&&n.isEdit?n.saveFirstChannelFcInfo():(n.channelInfo.show=1,n.searchChannelList(),n.resetChannelInfo(),n.getChannelParams()):1===e.data.status?n.$router.replace("/login"):n.toast(e.data.statusMsg,"error")}).catch(function(e){n.loading5=!1,n.toast("服务器错误，请联系管理员","error")})},checkChannelNo:function(e){return!(e||(""!==this.actionChannelInfo.channelNo||this.isEdit?this.actionChannelInfo.channelNo.length<4||this.actionChannelInfo.channelNo.length>25?(this.actionValidate.channelNo=!0,this.toast("渠道编码由字母或数字组成的4-25位编码","warning"),1):(this.actionValidate.channelNo=!1,0):(this.actionValidate.channelNo=!0,this.toast("渠道编码不能为空","warning"),1)))},generateTopUrl:function(){0===this.companyInfo.channelCount&&(this.actionChannelInfo.url=this.actionChannelInfo.channelName+"总账号")},noFormalChannel:function(){this.noFormal=!0,this.generateChannelCode()},generateChannelCode:function(e){var t=this;if(!this.isEdit||0!==this.editAll)if(""!==this.appInfo.appSelected||"一级渠道"===this.actionChannelInfo.level){var n=this.actionChannelInfo.channelNo===this.originChannelNo;if(this.checkChannelNo(n)||this.noFormal){if(this.isEdit)if("一级渠道"===this.actionChannelInfo.level)this.actionChannelInfo.channel=this.actionChannelInfo.channelNo;else if(void 0!==this.firstLevelChannel&&""!==this.firstLevelChannel)this.actionChannelInfo.channel=this.channelPrefix+this.firstLevelChannel+"_"+this.actionChannelInfo.channelNo;else{var a=this.actionChannelInfo.channel.split("_");this.firstLevelChannel=a[0],this.firstLevelChannel.indexOf(this.channelPrefix)>-1?this.actionChannelInfo.channel=this.firstLevelChannel+"_"+this.actionChannelInfo.channelNo:this.actionChannelInfo.channel=this.channelPrefix+this.firstLevelChannel+"_"+this.actionChannelInfo.channelNo}else if(0===this.companyInfo.channelCount)this.actionChannelInfo.channel=this.actionChannelInfo.channelNo;else{var i=this;this.companyList.forEach(function(e,t){i.companyInfo.name===e.id&&(i.actionChannelInfo.channel=i.channelPrefix+e.channelNo+"_"+i.actionChannelInfo.channelNo)})}if(this.noFormal&&(this.actionChannelInfo.channel=this.actionChannelInfo.channelNo,this.noFormal=!1),this.originChannel!==this.actionChannelInfo.channel){var s={sessionid:this.userperadmin.sessionid,channel:this.actionChannelInfo.channel};Object(l.n)(s).then(function(e){t.loading5=!1,0===e.data.status?(t.actionValidate.channelNo=!1,t.isEdit?"一级渠道"===t.actionChannelInfo.level?t.actionChannelInfo.url=t.actionChannelInfo.channelName+"总账号":t.actionChannelInfo.url=t.appInfo.currentUrl+t.actionChannelInfo.channel:0===t.companyInfo.channelCount?t.actionChannelInfo.url=t.actionChannelInfo.channelName+"总账号":""!==t.actionChannelInfo.url&&(""===t.actionChannelInfo.channelNo?t.actionChannelInfo.url=t.appInfo.currentUrl:t.actionChannelInfo.url=t.appInfo.currentUrl+t.actionChannelInfo.channel)):1===e.data.status?t.$router.replace("/login"):(t.actionValidate.channelNo=!0,t.toast(e.data.statusMsg,"error"))}).catch(function(e){t.loading5=!1,t.toast("服务器错误，请联系管理员","error")})}}}else this.toast("请先选择所属APP","warning")},selectedFormatter:function(e){1===e?this.channelInfo.channelName=this.channelInfo.channelName.replace(/[-]/g,""):this.channelInfo.channelNo=this.channelInfo.channelNo.replace(/[-]/g,"")},appChange:function(e){this.actionChannelInfo.appId=this.appInfo.appList[e].id,this.channelPrefix=this.appInfo.appList[e].other2,this.appInfo.currentUrl=this.appInfo.appList[e].other,0===this.companyInfo.channelCount?this.actionChannelInfo.url=this.actionChannelInfo.channelName+"总账号":this.actionChannelInfo.url=this.appInfo.appList[e].other+this.actionChannelInfo.channel,""!==this.actionChannelInfo.channel&&(this.actionChannelInfo.channel=this.channelPrefix+this.actionChannelInfo.channel.substr(1),this.actionChannelInfo.url=this.appInfo.currentUrl+this.actionChannelInfo.channel)},attributeChange:function(e,t){var n=this;8===e?(this.settlementCycleInfo.disabled=!0,this.settlementCycleInfo.typeSelected=23):(this.settlementCycleInfo.disabled=!1,this.settlementCycleInfo.typeSelected=""),1!=t&&(n.channelTypeInfo.typeList=[],n.channelTypeInfo.typeSelected="",this.channelTypeInfo.typeListAll.forEach(function(t,a){t.higherId===e&&n.channelTypeInfo.typeList.push(t)}))},typeChange:function(e){var t=this;t.channelDivisionInfo.divisionList=[],t.channelDivisionInfo.divisionSelected="",this.channelDivisionInfo.divisionListAll.forEach(function(n,a){n.higherId===e&&t.channelDivisionInfo.divisionList.push(n)})},rewardTypeChange:function(e){26===e?(this.fcType.text="分成单价",this.fcType.text1="注册用户",this.fcType.unitText="元"):27===e?(this.fcType.text="分成单价",this.fcType.text1="首提用户",this.fcType.unitText="元"):28===e?(this.fcType.text="分成比例",this.fcType.text1="分成比例",this.fcType.unitText="%"):(this.fcType.text="分成单价",this.fcType.text1="开户成功用户数",this.fcType.unitText="元")},addFcItem:function(e){if(void 0!==e){this.firstLevelFcDataList[e].fcTypeData.length;var t={max:0,price:0};this.firstLevelFcDataList[e].fcTypeData.rewards.push(t),this.firstLevelFcDataList[e].fcTypeData.length++}else this.fcTypeData.length,t={max:0,price:0},this.fcTypeData.rewards.push(t),this.fcTypeData.length++},minusFcItem:function(e){if(void 0!==e){if(1===this.firstLevelFcDataList[e].fcTypeData.rewards.length)return;this.firstLevelFcDataList[e].fcTypeData.rewards.pop(),this.firstLevelFcDataList[e].fcTypeData.length--}else{if(1===this.fcTypeData.rewards.length)return;this.fcTypeData.rewards.pop(),this.fcTypeData.length--}},setNextMinValue:function(e){var t=parseInt(this.fcTypeData.rewards[e].max)+1;this.fcTypeData.mins[e+1]=t},toast:function(e,t){this.$message({type:t,message:e})}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page channel-center-page"},[n("h3",{staticClass:"breadnav"},[e._v("当前位置："),n("a",{class:{link:1!==e.channelInfo.show},attrs:{href:"javascript:;"},on:{click:e.backToChannelList}},[e._v("渠道列表")]),n("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.channelInfo.show,expression:"channelInfo.show !== 1"}]},[e._v(" > "+e._s(e.channelListPosition))])]),e._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:1===this.channelInfo.show,expression:"this.channelInfo.show === 1"}],staticClass:"sub-table-wrapper"},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticClass:"actions",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[n("el-col",{attrs:{xs:24,sm:20}},[n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道名称"},model:{value:e.channelInfo.channelName,callback:function(t){e.$set(e.channelInfo,"channelName",t)},expression:"channelInfo.channelName"}},e._l(e.channelInfo.channelList,function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道号"},model:{value:e.channelInfo.channelNo,callback:function(t){e.$set(e.channelInfo,"channelNo",t)},expression:"channelInfo.channelNo"}},e._l(e.channelInfo.channelNoList,function(e,t){return n("el-option",{key:t,attrs:{label:e,value:e}})})),e._v(" "),n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道级别"},model:{value:e.channelInfo.channelLevel,callback:function(t){e.$set(e.channelInfo,"channelLevel",t)},expression:"channelInfo.channelLevel"}},e._l(e.channelInfo.channelLevalList,function(e){return n("el-option",{key:e.channelNo,attrs:{label:e.name,value:e.channelNo}})})),e._v(" "),n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.channelInfo.channelMan,callback:function(t){e.$set(e.channelInfo,"channelMan",t)},expression:"channelInfo.channelMan"}},e._l(e.channelInfo.channelManList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"选择产品"},model:{value:e.channelInfo.appSelected,callback:function(t){e.$set(e.channelInfo,"appSelected",t)},expression:"channelInfo.appSelected"}},e._l(e.appInfo.appList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),n("button",{staticClass:"btn blue",on:{click:e.searchChannelList}},[n("i",{staticClass:"fa fa-search"}),e._v("搜索")])],1),e._v(" "),n("el-col",{staticClass:"btns",attrs:{xs:24,sm:4}},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.addNewChannel,expression:"addNewChannel"}],staticClass:"btn green",on:{click:e.addChannel}},[n("i",{staticClass:"fa fa-plus"}),e._v("新增渠道")])])],1),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelTableData,border:"",size:"small"}},[n("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexFormatter1}}),e._v(" "),n("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"adminName",label:"负责人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"level",label:"渠道级别"}}),e._v(" "),n("el-table-column",{attrs:{prop:"appId",label:"产品",formatter:e.appFormatter}}),e._v(" "),n("el-table-column",{attrs:{prop:"rewardTypeId",label:"分成方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.level?n("el-button",{attrs:{type:"text",size:"small"}},[n("i",{staticClass:"fa fa-window-restore",on:{click:function(n){e.getFirstLevelRewardAction(t.row,t.$index)}}}),e._v("详情")]):e._e(),e._v(" "),1!==t.row.level?n("p",[e._v(e._s(e._f("rewardTypeIdFilter")(t.row.rewardTypeId)))]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例(或单价)"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return n("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.channelEdit,expression:"channelEdit"}],attrs:{type:"text",size:"small"},on:{click:function(n){e.editChannel(t.row,t.$index)}}},[n("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}}),e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.DividedHistory,expression:"DividedHistory"}],attrs:{type:"text",size:"small"},on:{click:function(n){e.getChannelFcHistoryFun(t.row,t.$index)}}},[n("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),e._v("分成历史")])]}}])})],1),e._v(" "),n("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.channelInfo.currentPage,"page-sizes":e.channelInfo.pageSizes,"page-size":e.channelInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.channelInfo.dataSize},on:{"size-change":e.channelTablePageSizeChange,"current-change":e.channelTableCurrentPageChange}})],1)],1),e._v(" "),4===e.show&&2===e.channelInfo.show|3===e.channelInfo.show?n("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading5,expression:"loading5"}],staticClass:"action-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[n("h4",[e._v("渠道基础信息")]),e._v(" "),n("el-row",{staticClass:"form-wrapper"},[n("el-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"input-group required"},[n("label",[e._v("渠道商")]),e._v(" "),n("el-select",{attrs:{disabled:e.isEdit,clearable:"",filterable:"","default-first-option":"",placeholder:"渠道商名称"},on:{change:e.companyChange},model:{value:e.companyInfo.name,callback:function(t){e.$set(e.companyInfo,"name",t)},expression:"companyInfo.name"}},e._l(e.companyList,function(e,t){return n("el-option",{key:e.id,attrs:{label:e.company,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"channelLevel"}},[e._v("渠道级别")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.level,expression:"actionChannelInfo.level"}],attrs:{type:"text",readonly:"true",id:"channelLevel"},domProps:{value:e.actionChannelInfo.level},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"level",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"channelName"}},[e._v("渠道名称")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channelName,expression:"actionChannelInfo.channelName"}],attrs:{type:"text",id:"channelName"},domProps:{value:e.actionChannelInfo.channelName},on:{blur:e.generateTopUrl,input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channelName",t.target.value)}}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"一级渠道"!==e.actionChannelInfo.level,expression:"actionChannelInfo.level !== '一级渠道'"}],staticClass:"input-group required"},[n("label",[e._v("所属APP")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择APP"},on:{change:e.appChange},model:{value:e.appInfo.appSelected,callback:function(t){e.$set(e.appInfo,"appSelected",t)},expression:"appInfo.appSelected"}},e._l(e.appInfo.appList,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:t}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"channelNo"}},[e._v("渠道编码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channelNo,expression:"actionChannelInfo.channelNo"}],class:{error:e.actionValidate.channelNo},attrs:{type:"text",maxLength:"25",id:"channelNo",readonly:"一级渠道"!==e.actionChannelInfo.level&&""===e.appInfo.appSelected,oninput:"value=value.replace(/[^0-9a-zA-Z\\_\\-]/g,'')",placeholder:"由字母和数字组合的4-25位编码"},domProps:{value:e.actionChannelInfo.channelNo},on:{blur:e.generateChannelCode,input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channelNo",t.target.value)}}})]),e._v(" "),e.isEdit&&0===e.editAll?e._e():n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"channelNo"}}),e._v(" "),n("button",{on:{click:e.noFormalChannel}},[n("i",{staticClass:"fa fa-arrow-down",attrs:{"aria-hidden":"true"}})])]),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"channel"}},[e._v("渠道号")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channel,expression:"actionChannelInfo.channel"}],attrs:{type:"text",id:"channel",readonly:"true"},domProps:{value:e.actionChannelInfo.channel},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channel",t.target.value)}}})]),e._v(" "),e.createChannelAuthority?n("div",{staticClass:"input-group required"},[n("label",[e._v("是否可创建子渠道")]),e._v(" "),n("el-radio-group",{model:{value:e.actionChannelInfo.isCreate,callback:function(t){e.$set(e.actionChannelInfo,"isCreate",t)},expression:"actionChannelInfo.isCreate"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("是否实时同步")]),e._v(" "),n("el-radio-group",{model:{value:e.actionChannelInfo.synchronous,callback:function(t){e.$set(e.actionChannelInfo,"synchronous",t)},expression:"actionChannelInfo.synchronous"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否（默认每日11点发布）")])],1)],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{staticStyle:{width:"auto","vertical-align":"top"}},[e._v("是否同步信息到二级渠道")]),e._v(" "),n("el-radio-group",{model:{value:e.actionChannelInfo.isSynchro,callback:function(t){e.$set(e.actionChannelInfo,"isSynchro",t)},expression:"actionChannelInfo.isSynchro"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)]),e._v(" "),n("el-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"input-group required"},[n("label",[e._v("渠道属性")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择渠道属性"},on:{change:e.attributeChange},model:{value:e.channelAttributeInfo.attributeSelected,callback:function(t){e.$set(e.channelAttributeInfo,"attributeSelected",t)},expression:"channelAttributeInfo.attributeSelected"}},e._l(e.channelAttributeInfo.attributeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("渠道类型")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择渠道类型"},on:{change:e.typeChange},model:{value:e.channelTypeInfo.typeSelected,callback:function(t){e.$set(e.channelTypeInfo,"typeSelected",t)},expression:"channelTypeInfo.typeSelected"}},e._l(e.channelTypeInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("渠道细分")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择渠道细分"},model:{value:e.channelDivisionInfo.divisionSelected,callback:function(t){e.$set(e.channelDivisionInfo,"divisionSelected",t)},expression:"channelDivisionInfo.divisionSelected"}},e._l(e.channelDivisionInfo.divisionList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group textAreaInput required"},[n("label",{attrs:{for:"url"}},[e._v("注册链接")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.url,expression:"actionChannelInfo.url"}],attrs:{id:"url",readonly:"true"},domProps:{value:e.actionChannelInfo.url},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"url",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("负责人")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.manInfo.manSelected,callback:function(t){e.$set(e.manInfo,"manSelected",t)},expression:"manInfo.manSelected"}},e._l(e.manInfo.manList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"currentDatetime"}},[e._v("登录密码")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.pwd,expression:"actionChannelInfo.pwd"}],attrs:{type:"text",id:"pwd",maxLength:"12",placeholder:"5-12位数字或字母组合",oninput:"value=value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:e.actionChannelInfo.pwd},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"pwd",t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",{staticStyle:{"vertical-align":"middle"}},[e._v("是否SEO")]),e._v(" "),n("el-radio-group",{attrs:{disabled:e.isEdit||!e.isEdit&&"一级渠道"!==e.actionChannelInfo.level},model:{value:e.actionChannelInfo.seo,callback:function(t){e.$set(e.actionChannelInfo,"seo",t)},expression:"actionChannelInfo.seo"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)])],1),e._v(" "),e.firstLevelFcDataList.length>0?n("h4",[e._v("渠道分成信息")]):e._e(),e._v(" "),e._l(e.firstLevelFcDataList,function(t,a){return"一级渠道"===e.actionChannelInfo.level&&0!==t.length?n("el-row",{key:a,staticClass:"form-wrapper"},[n("el-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"input-group required"},[n("label",[e._v("所属APP")]),e._v(" "),n("el-select",{attrs:{disabled:!0,filterable:"","default-first-option":"",placeholder:"选择APP"},model:{value:e.firstLevelFcDataList[a].appid,callback:function(t){e.$set(e.firstLevelFcDataList[a],"appid",t)},expression:"firstLevelFcDataList[index].appid"}},e._l(e.appInfo.appList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",[e._v("分成方式")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择分成方式"},on:{change:e.rewardTypeChange},model:{value:t.fcType,callback:function(n){e.$set(t,"fcType",n)},expression:"fcItem.fcType"}},e._l(e.rewardTypeInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),n("el-radio-group",{model:{value:t.isStep,callback:function(n){e.$set(t,"isStep",n)},expression:"fcItem.isStep"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[n("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(t.fcType)))]),e._v(" "),0===t.isStep?n("input",{directives:[{name:"model",rawName:"v-model",value:t.stepData,expression:"fcItem.stepData"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:t.stepData},on:{input:function(n){n.target.composing||e.$set(t,"stepData",n.target.value)}}}):e._e(),e._v(" "),1===t.isStep?n("div",{staticClass:"inner-input-group clearfix"},[n("ul",[e._l(t.fcTypeData.rewards,function(a,i){return n("li",{staticClass:"clearfix"},[n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(t.fcType))+"：")]),e._v(" "),n("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("firstFcFormatter")(t.fcTypeData.rewards[i-1])}}),e._v(" "),n("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fcTypeData.rewards[i].max,expression:"fcItem.fcTypeData.rewards[index].max"}],attrs:{type:"text",oninput:"value=value.replace(/[^0-9]/g, '')"},domProps:{value:t.fcTypeData.rewards[i].max},on:{input:function(n){n.target.composing||e.$set(t.fcTypeData.rewards[i],"max",n.target.value)}}})]),e._v(" "),n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumberFilter")(t.fcType))+"：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:a.price,expression:"item.price"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:a.price},on:{input:function(t){t.target.composing||e.$set(a,"price",t.target.value)}}}),e._v(" "),n("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(t.fcType)))])])])}),e._v(" "),n("li",[n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(t.fcType))+"：")]),e._v(" "),n("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("lastFcFormatter")(t.fcTypeData.rewards[t.fcTypeData.length-1])}}),e._v(" "),n("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),n("input",{attrs:{type:"text",value:"999999999",readonly:"true"}})]),e._v(" "),n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumberFilter")(t.fcType))+"：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.fcTypeData.last.price,expression:"fcItem.fcTypeData.last.price"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:t.fcTypeData.last.price},on:{input:function(n){n.target.composing||e.$set(t.fcTypeData.last,"price",n.target.value)}}}),e._v(" "),n("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(t.fcType)))])])])],2),e._v(" "),n("button",{on:{click:function(t){e.addFcItem(a)}}},[n("i",{staticClass:"fa fa-plus"})]),e._v(" "),n("button",{on:{click:function(t){e.minusFcItem(a)}}},[n("i",{staticClass:"fa fa-minus"})])]):e._e()])]),e._v(" "),n("el-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),n("el-select",{attrs:{disabled:e.settlementCycleInfo.disabled,filterable:"","default-first-option":"",placeholder:"选择结算周期"},model:{value:t.settlementCycle,callback:function(n){e.$set(t,"settlementCycle",n)},expression:"fcItem.settlementCycle"}},e._l(e.settlementCycleInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",[e._v("成本计算方式")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择计算方式"},model:{value:t.cacCostType,callback:function(n){e.$set(t,"cacCostType",n)},expression:"fcItem.cacCostType"}},e._l(e.cacCostTypeInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("是否脱敏")]),e._v(" "),n("el-radio-group",{model:{value:t.isChange,callback:function(n){e.$set(t,"isChange",n)},expression:"fcItem.isChange"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("起始时间")]),e._v(" "),n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择分成起始时间"},model:{value:e.actionChannelInfo.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.gitTimestartAndEnd"}})],1)])],1):e._e()}),e._v(" "),"一级渠道"!==e.actionChannelInfo.level?n("el-row",{staticClass:"form-wrapper"},[n("el-col",{attrs:{xs:24,sm:12}},[n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",[e._v("分成方式")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择分成方式"},on:{change:e.rewardTypeChange},model:{value:e.rewardTypeInfo.typeSelected,callback:function(t){e.$set(e.rewardTypeInfo,"typeSelected",t)},expression:"rewardTypeInfo.typeSelected"}},e._l(e.rewardTypeInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),n("el-radio-group",{model:{value:e.fcType.isStep,callback:function(t){e.$set(e.fcType,"isStep",t)},expression:"fcType.isStep"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required clearfix"},[n("label",{attrs:{for:""}},[e._v(e._s(e._f("fcNumberFilter")(e.rewardTypeInfo.typeSelected)))]),e._v(" "),0===e.fcType.isStep?n("input",{directives:[{name:"model",rawName:"v-model",value:e.fcType.stepData,expression:"fcType.stepData"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:e.fcType.stepData},on:{input:function(t){t.target.composing||e.$set(e.fcType,"stepData",t.target.value)}}}):e._e(),e._v(" "),1===e.fcType.isStep?n("div",{staticClass:"inner-input-group clearfix"},[n("ul",[e._l(e.fcTypeData.rewards,function(t,a){return n("li",{staticClass:"clearfix"},[n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(e.rewardTypeInfo.typeSelected))+"：")]),e._v(" "),n("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("firstFcFormatter")(e.fcTypeData.rewards[a-1])}}),e._v(" "),n("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fcTypeData.rewards[a].max,expression:"fcTypeData.rewards[index].max"}],attrs:{type:"text",oninput:"value=value.replace(/[^0-9]/g, '')"},domProps:{value:e.fcTypeData.rewards[a].max},on:{input:function(t){t.target.composing||e.$set(e.fcTypeData.rewards[a],"max",t.target.value)}}})]),e._v(" "),n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumberFilter")(e.rewardTypeInfo.typeSelected))+"：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"item.price"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:t.price},on:{input:function(n){n.target.composing||e.$set(t,"price",n.target.value)}}}),e._v(" "),n("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(e.rewardTypeInfo.typeSelected)))])])])}),e._v(" "),n("li",[n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumber1Filter")(e.rewardTypeInfo.typeSelected))+"：")]),e._v(" "),n("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("lastFcFormatter")(e.fcTypeData.rewards[e.fcTypeData.length-1])}}),e._v(" "),n("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),n("input",{attrs:{type:"text",value:"999999999",readonly:"true"}})]),e._v(" "),n("div",[n("span",{staticClass:"text"},[e._v(e._s(e._f("fcNumberFilter")(e.rewardTypeInfo.typeSelected))+"：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.fcTypeData.last.price,expression:"fcTypeData.last.price"}],attrs:{type:"text",maxLength:"5",oninput:"value=value.replace(/[^0-9\\.]/g, '')"},domProps:{value:e.fcTypeData.last.price},on:{input:function(t){t.target.composing||e.$set(e.fcTypeData.last,"price",t.target.value)}}}),e._v(" "),n("span",{staticClass:"unit"},[e._v(e._s(e._f("fcNumber2Filter")(e.rewardTypeInfo.typeSelected)))])])])],2),e._v(" "),n("button",{on:{click:e.addFcItem}},[n("i",{staticClass:"fa fa-plus"})]),e._v(" "),n("button",{on:{click:e.minusFcItem}},[n("i",{staticClass:"fa fa-minus"})])]):e._e()])]),e._v(" "),n("el-col",{attrs:{xs:24,sm:12}},[n("div",{staticClass:"input-group required"},[n("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),n("el-select",{attrs:{disabled:e.settlementCycleInfo.disabled,filterable:"","default-first-option":"",placeholder:"选择结算周期"},model:{value:e.settlementCycleInfo.typeSelected,callback:function(t){e.$set(e.settlementCycleInfo,"typeSelected",t)},expression:"settlementCycleInfo.typeSelected"}},e._l(e.settlementCycleInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:8!==e.channelAttributeInfo.attributeSelected,expression:"channelAttributeInfo.attributeSelected !== 8"}],staticClass:"input-group required"},[n("label",[e._v("成本计算方式")]),e._v(" "),n("el-select",{attrs:{filterable:"","default-first-option":"",placeholder:"选择计算方式"},model:{value:e.cacCostTypeInfo.typeSelected,callback:function(t){e.$set(e.cacCostTypeInfo,"typeSelected",t)},expression:"cacCostTypeInfo.typeSelected"}},e._l(e.cacCostTypeInfo.typeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("是否脱敏")]),e._v(" "),n("el-radio-group",{model:{value:e.actionChannelInfo.isChange,callback:function(t){e.$set(e.actionChannelInfo,"isChange",t)},expression:"actionChannelInfo.isChange"}},[n("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),n("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),n("div",{staticClass:"input-group required"},[n("label",[e._v("起始时间")]),e._v(" "),n("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择分成起始时间"},model:{value:e.actionChannelInfo.gitTimestartAndEnd,callback:function(t){e.$set(e.actionChannelInfo,"gitTimestartAndEnd",t)},expression:"actionChannelInfo.gitTimestartAndEnd"}})],1)])],1):e._e(),e._v(" "),n("div",{staticClass:"submit-btns"},[n("button",{staticClass:"btn submit",on:{click:e.saveChannelInfo}},[e._v("提交")]),e._v(" "),n("button",{staticClass:"btn cancel",on:{click:e.cancelAddChannel}},[e._v("取消")])])],2):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"渠道分成历史记录",center:"",width:"90%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading6,expression:"loading6"}],staticStyle:{width:"100%"},attrs:{data:e.fcHistoryList,height:"400",border:"","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),n("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),n("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),n("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return n("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),n("el-table-column",{attrs:{property:"date",label:"分成起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),n("el-table-column",{attrs:{property:"adminName",label:"负责人"}}),e._v(" "),n("el-table-column",{attrs:{property:"date",label:"任期起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),n("el-table-column",{attrs:{property:"updateAdminName",label:"操作人"}})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"分成详情",center:"",width:"400",visible:e.firstLevelChannelRewardInfo.visible},on:{"update:visible":function(t){e.$set(e.firstLevelChannelRewardInfo,"visible",t)}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.firstLevelChannelRewardInfo.loading,expression:"firstLevelChannelRewardInfo.loading"}],staticStyle:{width:"100%"},attrs:{data:e.firstLevelChannelRewardInfo.tableData,height:"300",border:""}},[n("el-table-column",{attrs:{property:"appid",label:"产品",formatter:e.appFormatter}}),e._v(" "),n("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),n("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return n("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])})],1)],1)],1)},staticRenderFns:[]},p=n("vSla")(h,d,!1,function(e){n("7kr7")},"data-v-31adeb33",null);t.default=p.exports}});