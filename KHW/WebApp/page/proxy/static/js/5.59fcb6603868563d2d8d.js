webpackJsonp([5],{"2kef":function(e,t){},"6dyu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("P9l9"),l={data:function(){return{userAdminInfo:null,Statrloading:!0,tableloading:!1,companyOption:[],taxpayerNumberOp:[],AccountSettlementOp:[],selectAttributesOp:[],checkCompanySelect:{company:"",taxpayerNumber:"",AccountSettlement:"",selectAttributes:""},fbsData:[],reviseVisible:!1,ruleForm:{name:"",taxpayerNum:"",address:"",tel:null,accountSettlement:"",openBank:"",selectAttribute:""},rules:{name:[{required:!0,message:"公司名称为必填",trigger:"bulr,change"}],taxpayerNum:[{required:!0,message:"纳税人识别号为必填",trigger:"bulr,change"}],address:[{required:!0,message:"地址为必填项",trigger:"bulr,change"}],tel:[{required:!0,message:"电话为必填项且合法",trigger:"change"}],accountSettlement:[{required:!0,message:"结算账号必填项",trigger:"bulr,change"}],openBank:[{required:!0,message:"开户行必填项",trigger:"bulr,change"}],selectAttribute:[{required:!0,message:"属性为必选项",trigger:"bulr,change"}]},reviseRowCompony:!1,dealisRowCompony:!1,ruleFormreviseRow:{name:"",taxpayerNum:null,address:"",tel:null,accountSettlement:"",openBank:"",selectAttribute:""},taxPayNoStatus:!1,checkCompanyStatus:!1,checkAccountNoStatus:!1}},mounted:function(){this.userAdminInfo=JSON.parse(localStorage.getItem("userperadmin")),this.getSelectChooseInfo()},methods:{getSelectChooseInfo:function(){var e={sessionid:this.userAdminInfo.sessionid},t=this;Object(r.I)(e).then(function(e){0===e.data.status&&(t.Statrloading=!1,t.selectAttributesOp=e.data.balanceAccountAttribute,t.AccountSettlementOp=e.data.accountNoList,t.taxpayerNumberOp=e.data.taxpayerNoList,t.companyOption=e.data.companyList,t.clickFindCompony()),1===e.data.status&&t.$router.replace("/login")})},companyFocus:function(){},clickFindCompony:function(){var e=this;this.tableloading=!0;var t={sessionid:this.userAdminInfo.sessionid,company:this.checkCompanySelect.company,taxpayerNo:this.checkCompanySelect.taxpayerNumber,accountNo:this.checkCompanySelect.AccountSettlement,attributeId:this.checkCompanySelect.selectAttributes},a=this;Object(r.J)(t).then(function(t){if(0===t.data.status){a.fbsData=t.data.balanceAccountList;for(var r=0;r<a.fbsData.length;r++)for(var l=0;l<a.selectAttributesOp.length;l++)a.fbsData[r].attributeId==a.selectAttributesOp[l].id&&(a.fbsData[r].name=a.selectAttributesOp[l].name);e.tableloading=!1}1===t.data.status&&a.$router.replace("/login")})},addCompany:function(){this.addDialog(),this.reviseVisible=!0,this.ruleForm.name="",this.ruleForm.taxpayerNum="",this.ruleForm.address="",this.ruleForm.tel=null,this.ruleForm.accountSettlement="",this.ruleForm.openBank="",this.ruleForm.selectAttribute="",this.taxPayNoStatus=!1,this.checkCompanyStatus=!1,this.checkAccountNoStatus=!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;if(t.checkCompanyStatus)t.$message.error("对账公司名称已存在,请更换后提交");else if(t.taxPayNoStatus)t.$message.error("纳税人识别号已存在,请更换后提交");else if(t.checkAccountNoStatus)t.$message.error("结算账号已存在,请更换后提交");else if(t.ruleForm.tel){if(!/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(t.ruleForm.tel))return void(t.ruleForm.tel="");var a={sessionid:t.userAdminInfo.sessionid,id:0,company:t.ruleForm.name,taxpayerNo:t.ruleForm.taxpayerNum,address:t.ruleForm.address,phone:t.ruleForm.tel,accountNo:t.ruleForm.accountSettlement,bank:t.ruleForm.openBank,attributeId:t.ruleForm.selectAttribute},l=t;Object(r.e)(a).then(function(e){0===e.data.status&&(l.$message({message:"新增对账公司成功",type:"success"}),l.reviseVisible=!1,l.clickFindCompony()),1===e.data.status&&l.$router.replace("/login")})}})},addDialog:function(){var e=this;this.$nextTick(function(){try{e.$refs.ruleForm.resetFields()}catch(e){}})},closeDialog:function(e){var t=this;this.$nextTick(function(){t.$refs.ruleForm.resetFields(),e()})},clickDetails:function(e,t){this.ruleFormreviseRow={name:e.company,taxpayerNum:e.taxpayerNo,address:e.address,tel:e.phone,accountSettlement:e.accountNo,openBank:e.bank,selectAttribute:e.name},this.dealisRowCompony=!0},clickRevise:function(e,t){this.ruleFormreviseRow={name:e.company,taxpayerNum:e.taxpayerNo,address:e.address,tel:e.phone,accountSettlement:e.accountNo,openBank:e.bank,selectAttribute:e.attributeId,id:e.id},this.taxPayNoStatus=!1,this.checkCompanyStatus=!1,this.checkAccountNoStatus=!1,this.reviseRowCompony=!0},reviseSubmit:function(){var e=this;this.$refs.ruleFormrev.validate(function(t){if(!t)return!1;if(e.checkCompanyStatus)e.$message.error("对账公司名称已存在,请更换后提交");else if(e.taxPayNoStatus)e.$message.error("纳税人识别号已存在,请更换后提交");else if(e.checkAccountNoStatus)e.$message.error("结算账号已存在,请更换后提交");else if(e.ruleFormreviseRow.tel){if(!/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/.test(e.ruleFormreviseRow.tel))return void(e.ruleFormreviseRow.tel="");var a={sessionid:e.userAdminInfo.sessionid,id:e.ruleFormreviseRow.id,company:e.ruleFormreviseRow.name,taxpayerNo:e.ruleFormreviseRow.taxpayerNum,address:e.ruleFormreviseRow.address,phone:e.ruleFormreviseRow.tel,accountNo:e.ruleFormreviseRow.accountSettlement,bank:e.ruleFormreviseRow.openBank,attributeId:e.ruleFormreviseRow.selectAttribute},l=e;Object(r.e)(a).then(function(e){0===e.data.status&&(l.$message({message:"修改对账公司成功",type:"success"}),l.reviseRowCompony=!1,l.clickFindCompony()),1===e.data.status&&l.$router.replace("/login")})}})},taxpayerNo:function(e){var t={sessionid:this.userAdminInfo.sessionid,taxpayerNo:e},a=this;Object(r.u)(t).then(function(e){0===e.data.status&&(a.taxPayNoStatus=!1),1===e.data.status&&(a.$router.replace("/login"),a.taxPayNoStatus=!1),2===e.data.status&&(a.$message.error("纳税人识别号已存在"),a.taxPayNoStatus=!0)})},componyStatusR:function(e){var t={sessionid:this.userAdminInfo.sessionid,company:e},a=this;Object(r.o)(t).then(function(e){0===e.data.status&&(a.checkCompanyStatus=!1),1===e.data.status&&(a.$router.replace("/login"),a.checkCompanyStatus=!1),2===e.data.status&&(a.$message.error("对账公司名称已存在"),a.checkCompanyStatus=!0)})},accountStatus:function(e){var t={sessionid:this.userAdminInfo.sessionid,accountNo:e},a=this;Object(r.l)(t).then(function(e){0===e.data.status&&(a.checkAccountNoStatus=!1),1===e.data.status&&(a.$router.replace("/login"),a.checkAccountNoStatus=!1),2===e.data.status&&(a.$message.error("结算账号已存在"),a.checkAccountNoStatus=!0)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"输入/选择公司"},on:{focus:e.companyFocus},model:{value:e.checkCompanySelect.company,callback:function(t){e.$set(e.checkCompanySelect,"company",t)},expression:"checkCompanySelect.company"}},e._l(e.companyOption,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"纳税人识别号"},on:{focus:e.companyFocus},model:{value:e.checkCompanySelect.taxpayerNumber,callback:function(t){e.$set(e.checkCompanySelect,"taxpayerNumber",t)},expression:"checkCompanySelect.taxpayerNumber"}},e._l(e.taxpayerNumberOp,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"结算账号"},on:{focus:e.companyFocus},model:{value:e.checkCompanySelect.AccountSettlement,callback:function(t){e.$set(e.checkCompanySelect,"AccountSettlement",t)},expression:"checkCompanySelect.AccountSettlement"}},e._l(e.AccountSettlementOp,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",size:"small",placeholder:"选择属性"},on:{focus:e.companyFocus},model:{value:e.checkCompanySelect.selectAttributes,callback:function(t){e.$set(e.checkCompanySelect,"selectAttributes",t)},expression:"checkCompanySelect.selectAttributes"}},e._l(e.selectAttributesOp,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-col",{staticClass:"marginRight",attrs:{span:2,offset:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.clickFindCompony}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-plus"},on:{click:e.addCompany}})],1)],1)],1),e._v(" "),a("div",{staticClass:"tableStyle"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"100%"},attrs:{data:e.fbsData,border:"",size:"mini","element-loading-text":"拼命加载中...","highlight-current-row":!0}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"属性"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taxpayerNo",label:"纳税人识别号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"accountNo",label:"结算账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"最后更新时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateAdminName",label:"操作人"}}),e._v(" "),a("el-table-column",{attrs:{label:"管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{"close-transition":"",type:"text",size:"small"},on:{click:function(a){e.clickDetails(t.row,t.$index)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{"close-transition":"",type:"text",size:"small"},on:{click:function(a){e.clickRevise(t.row,t.$index)}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"addCompanyModle"},[a("el-dialog",{attrs:{title:"新增",visible:e.reviseVisible,width:"50%","before-close":e.closeDialog},on:{"update:visible":function(t){e.reviseVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"公司:",prop:"name"}},[a("el-input",{attrs:{size:"small"},on:{input:function(t){e.componyStatusR(e.ruleForm.name)}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纳税人识别号:",prop:"taxpayerNum"}},[a("el-input",{attrs:{size:"small",maxlength:20},on:{input:function(t){e.taxpayerNo(e.ruleForm.taxpayerNum)}},model:{value:e.ruleForm.taxpayerNum,callback:function(t){e.$set(e.ruleForm,"taxpayerNum",t)},expression:"ruleForm.taxpayerNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"tel"}},[a("el-input",{attrs:{maxlength:20,size:"small"},model:{value:e.ruleForm.tel,callback:function(t){e.$set(e.ruleForm,"tel",t)},expression:"ruleForm.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算账号:",prop:"accountSettlement"}},[a("el-input",{attrs:{maxlength:30,size:"small"},on:{input:function(t){e.accountStatus(e.ruleForm.accountSettlement)}},model:{value:e.ruleForm.accountSettlement,callback:function(t){e.$set(e.ruleForm,"accountSettlement",t)},expression:"ruleForm.accountSettlement"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户银行:",prop:"openBank"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleForm.openBank,callback:function(t){e.$set(e.ruleForm,"openBank",t)},expression:"ruleForm.openBank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性:",prop:"selectAttribute"}},[a("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.ruleForm.selectAttribute,callback:function(t){e.$set(e.ruleForm,"selectAttribute",t)},expression:"ruleForm.selectAttribute"}},e._l(e.selectAttributesOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1),e._v(" "),a("div",{staticClass:"addCompanyModle"},[a("el-dialog",{attrs:{title:e.ruleFormreviseRow.name,visible:e.reviseRowCompony,width:"50%"},on:{"update:visible":function(t){e.reviseRowCompony=t}}},[a("el-form",{ref:"ruleFormrev",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormreviseRow,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"户名:",prop:"name"}},[a("el-input",{attrs:{size:"small"},on:{input:function(t){e.componyStatusR(e.ruleFormreviseRow.name)}},model:{value:e.ruleFormreviseRow.name,callback:function(t){e.$set(e.ruleFormreviseRow,"name",t)},expression:"ruleFormreviseRow.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"纳税人识别号:",prop:"taxpayerNum"}},[a("el-input",{attrs:{size:"small"},on:{input:function(t){e.taxpayerNo(e.ruleFormreviseRow.taxpayerNum)}},model:{value:e.ruleFormreviseRow.taxpayerNum,callback:function(t){e.$set(e.ruleFormreviseRow,"taxpayerNum",t)},expression:"ruleFormreviseRow.taxpayerNum"}},[e._v("</>")])],1),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleFormreviseRow.address,callback:function(t){e.$set(e.ruleFormreviseRow,"address",t)},expression:"ruleFormreviseRow.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"tel"}},[a("el-input",{attrs:{maxlength:20,size:"small"},model:{value:e.ruleFormreviseRow.tel,callback:function(t){e.$set(e.ruleFormreviseRow,"tel",t)},expression:"ruleFormreviseRow.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结算账号:",prop:"accountSettlement"}},[a("el-input",{attrs:{maxlength:30,size:"small"},on:{input:function(t){e.accountStatus(e.ruleFormreviseRow.accountSettlement)}},model:{value:e.ruleFormreviseRow.accountSettlement,callback:function(t){e.$set(e.ruleFormreviseRow,"accountSettlement",t)},expression:"ruleFormreviseRow.accountSettlement"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开户银行:",prop:"openBank"}},[a("el-input",{attrs:{size:"small"},model:{value:e.ruleFormreviseRow.openBank,callback:function(t){e.$set(e.ruleFormreviseRow,"openBank",t)},expression:"ruleFormreviseRow.openBank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性:",prop:"selectAttribute"}},[a("el-select",{attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.ruleFormreviseRow.selectAttribute,callback:function(t){e.$set(e.ruleFormreviseRow,"selectAttribute",t)},expression:"ruleFormreviseRow.selectAttribute"}},e._l(e.selectAttributesOp,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.reviseSubmit}},[e._v("提交")])],1)],1)],1),e._v(" "),a("div",{staticClass:"addCompanyModle"},[a("el-dialog",{attrs:{title:e.ruleFormreviseRow.name,visible:e.dealisRowCompony,width:"50%"},on:{"update:visible":function(t){e.dealisRowCompony=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleFormreviseRow,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"户名:",prop:"name"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"纳税人识别号:",prop:"taxpayerNum"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.taxpayerNum))])]),e._v(" "),a("el-form-item",{attrs:{label:"地址:",prop:"address"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.address))])]),e._v(" "),a("el-form-item",{attrs:{label:"电话:",prop:"tel"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.tel))])]),e._v(" "),a("el-form-item",{attrs:{label:"结算账号:",prop:"accountSettlement"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.accountSettlement))])]),e._v(" "),a("el-form-item",{attrs:{label:"开户银行:",prop:"openBank"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.openBank))])]),e._v(" "),a("el-form-item",{attrs:{label:"属性:",prop:"selectAttribute"}},[a("span",[e._v(e._s(e.ruleFormreviseRow.selectAttribute))])])],1)],1)],1)])},staticRenderFns:[]},s=a("vSla")(l,o,!1,function(e){a("2kef"),a("bXuN")},"data-v-2b04f4df",null);t.default=s.exports},bXuN:function(e,t){}});