webpackJsonp([9],{CzMT:function(t,a){},sSYQ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("3cXf"),l=e.n(s),i=e("P9l9"),n={data:function(){return{sessionid:"",length:100,min:0,max:100,Statrloading:!0,newDate:"",gitTime:"",dataTablechange:"",dataList:[{value:"-1",label:"全部"}],reate:"",qudaoNum:"",qudaoNumArry:[],textarea:"",tableData3:[],multipleSelection:[],tableStaus:!1}},methods:{getSearchInfo:function(t){var a=this;clearInterval(void 0);var e={sessionid:t};e=l()(e),Object(i.l)(e).then(function(t){if(0===t.data.status){for(var e=0;e<t.data.channelNoList.length;e++)a.qudaoNumArry.push({label:t.data.channelNoList[e].split(",")[1],value:t.data.channelNoList[e]});a.dataList=t.data.fromTypeList,a.Statrloading=!1,a.searchData()}1===t.data.status&&(a.$router.replace("/login"),a.Statrloading=!1)})},findTime:function(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1,s=t.getDate();this.newDate=a+"-"+e+"-"+s},dataTime:function(){},tablechange:function(){this.dataTablechange=""},qudaoNumFocus:function(){this.qudaoNum=""},inputReate:function(){this.reate>100&&(this.$message.error("输入必须为100以内的数字"),this.reate=null)},addDataBackInfo:function(){var t=this;if(this.gitTime)if(this.dataTablechange)if(this.reate)if(this.qudaoNum)if(this.textarea){var a=(new Date).valueOf(),e=this.qudaoNum.split(","),s={sessionid:this.sessionid,id:a,startDate:this.gitTime[0],endDate:this.gitTime[1],tableId:this.dataTablechange,optimization:this.reate,channelId:e[0],channel:e[1],channelName:e[2],comment:this.textarea,adminId:this.sessionid},n=l()(s);Object(i.d)(n).then(function(a){0===a.data.status&&t.searchData(),1===a.data.status&&t.$message.error("添加失败，请重新添加")})}else this.$message.error("备注为必填项");else this.$message.error("渠道编码为必填项");else this.$message.error("优化比例为必填项");else this.$message.error("数据表选择为必填项");else this.$message.error("日期范围为必填项")},handleSelectionChange:function(t){this.multipleSelection=t},deletDataBack:function(t,a){var e=this,s={sessionid:this.sessionid,id:t.id},i=l()(s);this.$confirm("确认删除？").then(function(t){e.deleteFun(i)}).catch(function(t){})},batchDelete:function(){var t=this;this.$confirm("确认删除？").then(function(a){if(t.multipleSelection.length>0){for(var e=[],s=0;s<t.multipleSelection.length;s++)e.push(t.multipleSelection[s].id);var i={sessionid:t.sessionid,id:e.toString()},n=l()(i);t.deleteFun(n)}}).catch(function(t){})},AkeyHeavyRun:function(){var t=this,a={sessionid:this.sessionid},e=l()(a);Object(i._3)(e).then(function(a){0===a.data.status&&t.searchData(),1===a.data.status&&(t.$message.error("一键重跑失败"),t.$router.replace("/login"))})},searchData:function(){this.tableStaus=!0;var t={sessionid:this.sessionid},a=l()(t),e=this;Object(i.J)(a).then(function(t){if(0===t.data.status){e.tableData3=t.data.optimizationTaskList;for(var a=0;a<e.tableData3.length;a++){e.tableData3[a].optimization+="%",0==e.tableData3[a].status?e.tableData3[a].progressMsg="暂未开始":1==e.tableData3[a].status?e.tableData3[a].progressMsg=t.data.optimizationTaskList[a].progressMsg:2==e.tableData3[a].status&&(e.tableData3[a].progressMsg="已完成");for(var s=0;s<e.dataList.length;s++)e.tableData3[a].tableId===e.dataList[s].id&&(e.tableData3[a].tableName=e.dataList[s].name)}e.tableStaus=!1}1===t.data.status&&e.$router.replace("/login")})},deleteFun:function(t){var a=this;Object(i.o)(t).then(function(t){0===t.data.status&&a.searchData()})},clickGetNewData:function(){this.searchData()}},mounted:function(){var t=JSON.parse(localStorage.getItem("userperadmin"));this.sessionid=t.sessionid,this.getSearchInfo(this.sessionid),this.findTime()}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"databackrun"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Statrloading,expression:"Statrloading"}],staticClass:"seachInput",attrs:{"element-loading-text":"拼命加载中..."}},[e("el-row",[e("el-col",{attrs:{span:3}},[e("span",{staticClass:"fontColor"},[t._v("*")]),e("span",{staticClass:"fontColorSize"},[t._v("选择重跑数据日期:")])]),t._v(" "),e("el-col",{attrs:{span:3}},[e("div",{staticClass:"block"},[e("el-date-picker",{attrs:{size:"small",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","unlink-panels":"",editable:!1,"value-format":"yyyy-MM-dd"},on:{focus:t.dataTime},model:{value:t.gitTime,callback:function(a){t.gitTime=a},expression:"gitTime"}})],1)])],1),t._v(" "),e("div",{staticClass:"lineHeight"}),t._v(" "),e("el-row",[e("el-col",{attrs:{span:3}},[e("span",{staticClass:"fontColor"},[t._v("*")]),e("span",{staticClass:"fontColorSize"},[t._v("选择重跑数据报表:")])]),t._v(" "),e("el-col",{attrs:{span:4}},[e("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","default-first-option":"",size:"small",placeholder:"输入/选择数据报表"},on:{focus:t.tablechange},model:{value:t.dataTablechange,callback:function(a){t.dataTablechange=a},expression:"dataTablechange"}},t._l(t.dataList,function(t,a){return e("el-option",{key:a,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),e("el-col",{attrs:{span:2,offset:1}},[e("span",{staticClass:"fontColor"},[t._v("*")]),e("span",{staticClass:"fontColorSize"},[t._v("优化比例:")])]),t._v(" "),e("el-col",{attrs:{span:3}},[e("el-input",{staticClass:"inputReate",attrs:{placeholder:"请输入优化比例",clearable:"",size:"small",type:"text"},nativeOn:{keyup:function(a){return t.inputReate(a)}},model:{value:t.reate,callback:function(a){t.reate=a},expression:"reate"}})],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("span",{staticClass:"lilv"},[t._v("%")])]),t._v(" "),e("el-col",{attrs:{span:2}},[e("span",{staticClass:"fontColor"},[t._v("*")]),e("span",{staticClass:"fontColorSize"},[t._v("渠道编码:")])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","default-first-option":"",size:"small",placeholder:"输入/选择渠道编码"},on:{focus:t.qudaoNumFocus},model:{value:t.qudaoNum,callback:function(a){t.qudaoNum=a},expression:"qudaoNum"}},t._l(t.qudaoNumArry,function(t,a){return e("el-option",{key:a,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),e("div",{staticClass:"lineHeight"}),t._v(" "),e("el-row",[e("el-col",{attrs:{span:3}},[e("span",{staticClass:"fontColor"},[t._v("*")]),e("span",{staticClass:"fontColorSize"},[t._v("备注:")])]),t._v(" "),e("el-col",{attrs:{span:10}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"输入内容最多200字符",maxlength:t.length},model:{value:t.textarea,callback:function(a){t.textarea=a},expression:"textarea"}})],1),t._v(" "),e("el-col",{attrs:{span:9,offset:2}},[e("el-button",{staticClass:"addDataBackInfo",attrs:{type:"primary",size:"small"},on:{click:t.addDataBackInfo}},[t._v("添加")])],1)],1),t._v(" "),e("div",{staticClass:"lineHeight"}),t._v(" "),e("div",{staticClass:"clickNewData"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.clickGetNewData}},[t._v("点击刷新")])],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableStaus,expression:"tableStaus"}],staticClass:"table",attrs:{"element-loading-text":"数据刷新中"}},[e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData3,"tooltip-effect":"dark",border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),e("el-table-column",{attrs:{prop:"tableName",label:"重跑报表"}}),t._v(" "),e("el-table-column",{attrs:{label:"重跑数据日期","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.startDate))]),e("span",[t._v("~")]),e("span",[t._v(t._s(a.row.endDate))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"channel",label:"渠道编码"}}),t._v(" "),e("el-table-column",{attrs:{prop:"optimization",label:"优化比例"}}),t._v(" "),e("el-table-column",{attrs:{prop:"comment",label:"备注"}}),t._v(" "),e("el-table-column",{attrs:{prop:"adminName",label:"创建人"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=a.row.status,expression:"scope.row.status !=1"}],attrs:{type:"text",size:"small"},on:{click:function(e){t.deletDataBack(a.row,a.$index)}}},[e("i",{staticClass:"el-icon-delete"})])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"progressMsg",label:"进度"}})],1)],1),t._v(" "),e("div",{staticClass:"lineHeight"}),t._v(" "),e("div",{staticClass:"tableButton"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:t.batchDelete}},[t._v("批量删除")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.AkeyHeavyRun}},[t._v("一键重跑")])],1)],1)])},staticRenderFns:[]},r=e("Z0/y")(n,o,!1,function(t){e("CzMT")},"data-v-2148fc84",null);a.default=r.exports}});