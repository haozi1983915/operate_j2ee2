webpackJsonp([2],{"8PlC":function(t,e){},g0kB:function(t,e){},o0Mo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("P9l9"),r=a("dia3"),s={data:function(){return{userperadmin:{},searchInfo:{loading:!1,reportSelected:"",reportList:[],dateRange:[],startDate:"",endDate:""},tableInfo:{loading:!1,data:[],currentPage:1,pageSize:10,pageSizes:[10,20,50,100,500,1e3],dataSize:0}}},mounted:function(){this.userperadmin=JSON.parse(localStorage.getItem("userperadmin")),this.getReportTypeFun()},methods:{getReportTypeFun:function(){var t=this,e={sessionid:this.userperadmin.sessionid};this.searchInfo.loading=!0,Object(n.T)(e).then(function(e){t.searchInfo.loading=!1,0===e.data.status?t.searchInfo.reportList=e.data.fromTypeList:1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.searchInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},searchTableDataFun:function(){this.searchInfo.dateRange||(this.searchInfo.dateRange=[]),0!==this.searchInfo.dateRange.length||""!==this.searchInfo.reportSelected?(0!==this.searchInfo.dateRange.length&&(this.searchInfo.dateRange[0]=Object(r.a)(this.searchInfo.dateRange[0]),this.searchInfo.dateRange[1]=Object(r.a)(this.searchInfo.dateRange[1])),this.getRedoHistoryListFun()):this.toast("请至少选择一个查询条件","warning")},getRedoHistoryListFun:function(){var t=this,e={sessionid:this.userperadmin.sessionid,queryType:1,minDate:void 0===this.searchInfo.dateRange[0]?"":this.searchInfo.dateRange[0],maxDate:void 0===this.searchInfo.dateRange[1]?"":this.searchInfo.dateRange[1],tableId:this.searchInfo.reportSelected};this.tableInfo.loading=!0,this.tableInfo.data=[],Object(n.S)(e).then(function(e){t.tableInfo.loading=!1,0===e.data.status?t.tableInfo.data=e.data.optimizationTaskList:1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.tableInfo.loading=!1,t.toast("服务器错误，请联系管理员","error")})},getDetailFun:function(t){},actionDateFormatter:function(t){return Object(r.c)(t.id)},optiFormatter:function(t){return t.optimization+"%"},dateRangeFormatter:function(t){return t.startDate+" 至 "+t.endDate},reportFormatter:function(t){for(var e=this.searchInfo.reportList.copyWithin(0,0),a=t.tableId,n=0;n<e.length;n++)if(e[n].id===t.tableId){a=e[n].name.trim();break}return a},pageSizeChange:function(t){},currentPageChange:function(t){},toast:function(t,e){this.$message({type:e,message:t})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[t._m(0),t._v(" "),a("section",{staticClass:"table-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.searchInfo.loading,expression:"searchInfo.loading"}],staticClass:"search-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"fleft"},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"输入/选择报表"},model:{value:t.searchInfo.reportSelected,callback:function(e){t.$set(t.searchInfo,"reportSelected",e)},expression:"searchInfo.reportSelected"}},t._l(t.searchInfo.reportList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"fleft"},[a("span",{staticClass:"label"},[t._v("选择日期:")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.searchInfo.dateRange,callback:function(e){t.$set(t.searchInfo,"dateRange",e)},expression:"searchInfo.dateRange"}})],1),t._v(" "),a("button",{staticClass:"btn primary",on:{click:t.searchTableDataFun}},[a("i",{staticClass:"fa fa-search"}),t._v("查询")])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableInfo.loading,expression:"tableInfo.loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableInfo.data,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tableId",label:"重跑报表",formatter:t.reportFormatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"重跑数据日期",formatter:t.dateRangeFormatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"optimization",label:"优化比例(%)",formatter:t.optiFormatter}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作时间",formatter:t.actionDateFormatter}}),t._v(" "),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"left",effect:"light"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("p",{staticClass:"tooltip-title"},[t._v("详情")]),t._v("\n\t\t\t\t\t\t  \t\t"+t._s(e.row.comment)+"\n\t\t\t\t\t\t  \t")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[a("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})])],1)]}}])})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bread-nav"},[e("p",[this._v("当前位置：数据中心 > 重跑历史")])])}]},i=a("Z0/y")(s,o,!1,function(t){a("8PlC"),a("g0kB")},"data-v-f4f72a10",null);e.default=i.exports}});