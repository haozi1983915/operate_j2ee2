webpackJsonp([1],{"/QmQ":function(e,t){},"8I/B":function(e,t){},HBSQ:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("VCXJ"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("X4nt")({name:"App"},i,!1,function(e){a("VyL3")},null,null).exports,o=a("zO6J"),l={data:function(){return{sysName:"渠道代理后台管理系统",collapsed:!1,sysUserName:"zhoufeiyue"}},methods:{handleopen:function(){},handleclose:function(){},handleselect:function(e,t){},logout:function(){var e=this;this.$confirm("确认退出吗?","提示",{}).then(function(){localStorage.removeItem("userpermission"),localStorage.removeItem("userId"),localStorage.removeItem("userperadmin"),e.$router.replace("/login")}).catch(function(){})},showMenu:function(e,t){this.$refs.menuCollapsed.getElementsByClassName("submenu-hook-"+e)[0].style.display=t?"block":"none"},collapse:function(){this.collapsed=!this.collapsed;var e=document.getElementById("lastclass");0===e.offsetWidth&&(e.style.width="230px")}},mounted:function(){var e=localStorage.getItem("userInfo"),t=sessionStorage.getItem("userInfosession");this.sysUserName=e?e||"":t||""}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"container"},[a("el-col",{staticClass:"header",attrs:{span:24}},[a("el-col",{staticClass:"logo",class:e.collapsed?"logo-collapse-width":"logo-width",attrs:{span:10}},[e._v("\n        "+e._s(e.collapsed?"":e.sysName)+"\n      ")]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"tools",on:{click:function(t){t.preventDefault(),e.collapse(t)}}},[a("i",{staticClass:"el-icon-tickets"})])]),e._v(" "),a("el-col",{staticClass:"userinfo",attrs:{span:10}},[a("el-dropdown",{attrs:{trigger:"hover"}},[a("span",{staticClass:"el-dropdown-link userinfo-inner"},[e._v(e._s(e.sysUserName))]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){e.logout(t)}}},[e._v("退出登录")])],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"main",attrs:{span:24}},[a("aside",{class:e.collapsed?"menu-collapsed":"menu-expanded"},[a("el-menu",{directives:[{name:"show",rawName:"v-show",value:!e.collapsed,expression:"!collapsed"}],staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,id:"lastclass","unique-opened":"",router:"","background-color":"#324057","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleopen,close:e.handleclose,select:e.handleselect}},[e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():[t.leaf?e._e():a("el-submenu",{attrs:{index:n+""}},[a("template",{slot:"title"},[a("i",{class:t.iconCls}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return t.hidden?e._e():a("el-menu-item",{key:t.path,attrs:{index:t.path}},[e._v(e._s(t.name))])})],2),e._v(" "),t.leaf&&t.children.length>0?a("el-menu-item",{attrs:{index:t.children[0].path}},[a("i",{class:t.iconCls}),e._v(e._s(t.children[0].name))]):e._e()]})],2),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.collapsed,expression:"collapsed"}],ref:"menuCollapsed",staticClass:"el-menu el-menu-vertical-demo collapsed"},e._l(e.$router.options.routes,function(t,n){return t.hidden?e._e():a("li",{staticClass:"el-submenu item"},[t.leaf?[a("li",{staticClass:"el-submenu"},[a("div",{staticClass:"el-submenu__title el-menu-item",class:e.$route.path==t.children[0].path?"is-active":"",staticStyle:{"padding-left":"20px",height:"56px","line-height":"56px",padding:"0 20px"},on:{click:function(a){e.$router.push(t.children[0].path)}}},[a("i",{class:t.iconCls})])])]:[a("div",{staticClass:"el-submenu__title",staticStyle:{"padding-left":"20px"},on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},[a("i",{class:t.iconCls})]),e._v(" "),a("ul",{staticClass:"el-menu submenu",class:"submenu-hook-"+n,on:{mouseover:function(t){e.showMenu(n,!0)},mouseout:function(t){e.showMenu(n,!1)}}},e._l(t.children,function(t){return t.hidden?e._e():a("li",{key:t.path,staticClass:"el-menu-item",class:e.$route.path==t.path?"is-active":"",staticStyle:{"padding-left":"40px"},on:{click:function(a){e.$router.push(t.path)}}},[e._v(e._s(t.name))])}))]],2)}))],1),e._v(" "),a("section",{staticClass:"content-container"},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-col",{staticClass:"content-wrapper",attrs:{span:24}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)],1)])])],1)},staticRenderFns:[]};var c=a("X4nt")(l,r,!1,function(e){a("j+Ac")},"data-v-e0a99b2a",null).exports,d=a("3cXf"),h=a.n(d),p=a("2sCs"),u=a.n(p),m="http://10.68.6.168:8080/operate/Index/",f=function(e){return u.a.post(m+"getChannelParameter",e)},v=function(e){return u.a.post(m+"getReward",e)},g=function(e){return u.a.post(m+"getChannelAttribute",e)},I={data:function(){return{forgetPws:!0,uesrEmail:"",logining:!1,ruleForm2:{email:"",pwd:""},rules2:{email:[{required:!0,message:"请输入账号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},mounted:function(){var e=localStorage.getItem("userInfo");console.log(e),e?(this.ruleForm2.email=e,this.uesrEmail=e):(this.ruleForm2={email:"",pwd:""},this.uesrEmail="")},methods:{handleSubmit2:function(){var e=this,t=this;this.$refs.ruleForm2.validate(function(a){if(!a)return console.log("error submit!!"),!1;e.logining=!0;var n,i=h()(e.ruleForm2);(n=i,u.a.post(m+"login",n)).then(function(a){if(console.log(a.data),0===a.data.status){if(t.checked)localStorage.setItem("userInfo",e.ruleForm2.email);else localStorage.setItem("userInfo",""),sessionStorage.setItem("userInfosession",e.ruleForm2.email);localStorage.setItem("userId",a.data.sessionid),localStorage.setItem("userpermission",a.data.admin.level);var n=h()(a.data);localStorage.setItem("userperadmin",n),t.logining=!1,t.$router.push("/Channelmanagement")}else console.log(a.data.statusMsg),t.$message.error(a.data.statusMsg),t.logining=!1}).catch(function(e){t.$message.error("登录失败,请联系管理员")})})},forgetPwsNum:function(){this.forgetPws=!this.forgetPws},returnLogin:function(){this.forgetPws=!this.forgetPws},sendSet:function(){var e=this;if(e.uesrEmail){/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(e.uesrEmail)||(e.$refs.isTrueEmail.innerText="邮箱格式不正确",setTimeout(function(){e.$refs.isTrueEmail.innerText=" "},1500))}else e.$refs.isTrueEmail.innerText="用户名不能为空",setTimeout(function(){e.$refs.isTrueEmail.innerText=" "},1500)}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.forgetPws,expression:"forgetPws"}],ref:"ruleForm2",staticClass:"demo-ruleForm login-container",staticStyle:{"margin-bottom":"0px"},attrs:{model:e.ruleForm2,rules:e.rules2,"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("渠道代理系统登录")]),e._v(" "),a("el-form-item",{attrs:{prop:"email"}},[a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm2.email,callback:function(t){e.$set(e.ruleForm2,"email",t)},expression:"ruleForm2.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"pwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm2.pwd,callback:function(t){e.$set(e.ruleForm2,"pwd",t)},expression:"ruleForm2.pwd"}})],1),e._v(" "),a("el-checkbox",{staticClass:"remember",attrs:{checked:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住账号")]),e._v(" "),a("el-button",{staticClass:"forgetPws",on:{click:e.forgetPwsNum}},[e._v("忘记密码?")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},nativeOn:{click:function(t){t.preventDefault(),e.handleSubmit2(t)}}},[e._v("登录")])],1)],1),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.forgetPws,expression:"!forgetPws"}],staticClass:"demo-ruleForm login-container",staticStyle:{"margin-bottom":"0px"},attrs:{"label-position":"left","label-width":"0px"}},[a("h3",{staticClass:"title"},[e._v("忘记密码")]),e._v(" "),a("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.uesrEmail,callback:function(t){e.uesrEmail=t},expression:"uesrEmail"}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"80%"},attrs:{type:"text"},on:{click:e.returnLogin}},[e._v("返回登录")]),e._v(" "),a("el-form-item",{staticStyle:{width:"100%"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.sendSet(t)}}},[e._v("提交")])],1),e._v(" "),a("span",{ref:"isTrueEmail",staticClass:"titleInfo"})],1)],1)},staticRenderFns:[]};var b,C=a("X4nt")(I,y,!1,function(e){a("wigo")},"data-v-0783be82",null).exports,w=a("a3Yh"),_=a.n(w),x=a("MgeX"),S=a.n(x),T=a("ZLEe"),k=a.n(T),P=function(e,t){var a=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();if(i=i<10?"0"+i:i,void 0!==t){var s=e.getHours();s=s<10?"0"+s:s;var o=e.getMinutes();o=o<10?"0"+o:o;var l=e.getSeconds();return a+"-"+n+"-"+i+" "+s+":"+o+":"+(l=l<10?"0"+l:l)}return a+"-"+n+"-"+i},L={data:function(){return{userperadmin:{},first:0,show:1,companyList:[],companySelected:"",fuzzySearchCompany:"",loading:!1,loading1:!1,loading2:!1,loading3:!1,loading4:!1,loading5:!1,companyTableData:[],currentPage:1,pageSizes:[10,20,50],pageSize:10,dataSize:0,editId:"",createTime:"",channelCou:"",permissionId:"",actionCompanyInfo:{sessionid:"",company:"",bankAccount:"",bank:"",dutyParagraph:"",phone:"",address:"",contacts:"",mobileno:"",email:"",pwd:""},actionValidate:{mobileNo:!1,email:!1,channelNo:!1},isEdit:!1,editChannelId:"",editRewardId:"",editRewards:[],channelInfo:{proxyId:"",channelName:"",channelList:[],channelNo:"",channelNoList:[],channelLevel:"",channelLevalList:[{channelNo:"",name:"全部渠道级别"},{channelNo:1,name:"一级渠道"},{channelNo:2,name:"二级渠道"}],channelMan:"",channelManList:[],currentPage:1,pageSizes:[10,20,50],pageSize:10,dataSize:0,first:0,show:1},currentCompany:"",currentFirstLevelChannelNo:"",channelTableData:[],companyInfo:{id:"",name:"",channelCount:0},createChannelAuthority:!1,channelAttributeList:[],channelTypeList:[],subdivisionList:[],hasError:!1,actionChannelInfo:{sessionid:"",proxyId:"",higherChannelId:"",level:"",channelName:"",channelNamePY:"",channelNo:"",channel:"",isCreate:1,appId:"",attribute:"",type:"",subdivision:"",url:"",rewardId:"",adminId:"",permissionId:"",rewards:[]},appInfo:{appList:[],appSelected:""},channelAttributeInfo:{attributeList:[],attributeSelected:"",attributeIdSelected:"",parentIdSelected:""},channelTypeInfo:{typeListAll:[],typeList:[],typeSelected:""},channelDivisionInfo:{divisionListAll:[],divisionList:[],divisionSelected:""},fcType:{isStep:0,stepData:"",text:"分成单价",text1:"首提人数",unitText:"元"},fcTypeData:{length:1,last:{max:999999999,price:0},rewards:[{max:0,price:0}],mins:[0]},editFcTypeData:[],rewardTypeInfo:{typeList:[],typeSelected:26},settlementCycleInfo:{typeListAll:[],typeList:[],typeSelected:""},cacCostTypeInfo:{typeListAll:[],typeList:[],typeSelected:""},manInfo:{manListAll:[],manList:[],manSelected:""},datetimeInfo:{currentDate:"",currentDatetime:""},chartPermissionInfo:{id:0,registerChartPermission:!1,loginChartPermission:!1,applyChartPermission:!1,loanAcctChartPermission:!1,cashNumCharPermission:!1,firstCashAmtChartPermission:!1,totalCashAmtChartPermission:!1},fcHistoryList:[],dialogVisible:!1}},mounted:function(){var e=this,t=JSON.parse(localStorage.getItem("userperadmin"));this.userperadmin=t;var a,n={sessionid:t.sessionid};this.loading1=!0,(a=n,u.a.post(m+"getProxyNameList",a)).then(function(t){console.log(t),console.log("=========="),e.loading1=!1,0===t.data.status?e.companyList=t.data.proxyList:1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading1=!1,e.toast("服务器错误，请联系管理员","error")}),this.getChannelList(),this.getChannelParams()},filters:{firstFcFormatter:function(e){return e?parseInt(e.max)+1:0}},computed:{current:function(){return 1===this.show?"渠道商列表":2===this.show?"新增渠道商":3===this.show?"编辑渠道商信息":"子渠道商列表"},searchPage:function(){return this.currentPage-1},channelListPosition:function(){return 2===this.channelInfo.show?"新增渠道":"编辑渠道信息"}},methods:(b={timeStempFormatter:function(e,t,a){return n=e.date,i=new Date(n),P(i,1);var n,i},getChannelFcHistoryFun:function(e,t){var a=this;this.dialogVisible=!0;var n={sessionid:this.userperadmin.sessionid,channelId:e.id};console.log("getChannelFcHistoryFun parameter",n),this.fcHistoryList=[],v(n).then(function(e){if(console.log(e),0===e.data.status){a.fcHistoryList=e.data.rewardList;var t=a;a.fcHistoryList.forEach(function(e,a,n){console.log(e.rewardPrice),n[a].rewardPrice=t.rewardPriceFormatter(e.rewardPrice,1)}),console.log("fcHistoryList",a.fcHistoryList)}else 1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){console.log("error",e),a.toast("服务器错误，请联系管理员1","error")})},checkCompanyFun:function(){console.log("companySelected",this.companySelected)},checkMobileNo:function(){return""!==this.actionCompanyInfo.mobileno&&11===this.actionCompanyInfo.mobileno.length&&/^1[3|4|5|6|7|8|9][0-9]{9}$/.test(this.actionCompanyInfo.mobileno)?(this.actionValidate.mobileNo=!1,!0):(this.toast("联系人不正确","warning"),this.actionValidate.mobileNo=!0,!1)},checkEmail:function(){return""===this.actionCompanyInfo.email||-1===this.actionCompanyInfo.email.indexOf("@")||-1===this.actionCompanyInfo.email.indexOf(".")?(this.actionValidate.email=!0,this.toast("联系人邮箱不正确","warning"),!1):(this.actionValidate.email=!1,!0)},checkMobileNoFun:function(){var e=this;if((2===this.show||3===this.show)&&this.checkMobileNo()){var t,a={sessionid:this.userperadmin.sessionid,mobileNo:this.actionCompanyInfo.mobileno};console.log("checkMobileNoFun parameter",a),(t=a,u.a.post(m+"checkMobileNo",t)).then(function(t){console.log("checkMobileNoReg",t),0===t.data.status||(1===t.data.status?e.$router.replace("/login"):(e.hasError=!0,e.toast(t.data.statusMsg,"error")))}).catch(function(t){console.log("error",t),e.toast("服务器错误，请联系管理员","error")})}},checkEmailFun:function(){var e=this;if((2===this.show||3===this.show)&&this.checkEmail()){var t,a={sessionid:this.userperadmin.sessionid,email:this.actionCompanyInfo.email};console.log("checkEmailFun parameter",a),(t=a,u.a.post(m+"checkEmail",t)).then(function(t){console.log("checkEmailReg",t),0===t.data.status||(1===t.data.status?e.$router.replace("/login"):(e.hasError=!0,e.toast(t.data.statusMsg,"error")))}).catch(function(t){console.log("error",t),e.toast("服务器错误，请联系管理员","error")})}},companyFilter:function(e){this.fuzzySearchCompany=e},searchByCompany:function(){var e,t=parseInt(this.companySelected);""===this.companySelected?this.getChannelList():isNaN(t)?(e={sessionid:this.userperadmin.sessionid,company:this.companySelected,first:0},console.log("parameter",e),this.getChannelList(e)):(e={sessionid:this.userperadmin.sessionid,id:this.companySelected,first:0},console.log("parameter",e),this.getChannelList(e))},getChannelList:function(e){var t=this;if(!this.loading){if(!e)e={sessionid:this.userperadmin.sessionid,first:this.first,pageId:this.searchPage,pageSize:this.pageSize};var a;this.loading=!0,(a=e,u.a.post(m+"getProxy",a)).then(function(e){console.log("渠道商信息列表"),console.log(e),t.loading=!1,0===e.data.status?(e.data.listSize&&(t.dataSize=parseInt(e.data.listSize)),t.companyTableData=e.data.proxyList):1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading=!1,t.toast("服务器错误，请联系管理员","error")})}},pageSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.first=1,this.getChannelList()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.getChannelList()},cancelAdd:function(){this.resetActionInput(),this.show=1},saveCompanyInfo:function(){var e,t=this;if(!this.loading4)if(console.log(this.actionCompanyInfo),console.log(this.actionCompanyInfo.bankAccount),""!==this.actionCompanyInfo.company)if(""!==this.actionCompanyInfo.bankAccount)if(""!==this.actionCompanyInfo.bank)if(""!==this.actionCompanyInfo.dutyParagraph&&18===this.actionCompanyInfo.dutyParagraph.length)if(""!==this.actionCompanyInfo.phone)if(""!==this.actionCompanyInfo.address)if(""!==this.actionCompanyInfo.contacts)if(""!==this.actionCompanyInfo.mobileno&&11===this.actionCompanyInfo.mobileno.length)if(""!==this.actionCompanyInfo.email)if(-1!==this.actionCompanyInfo.email.indexOf("@"))if(""!==this.actionCompanyInfo.pwd||2!==this.show){var a,n=this.chartPermissionInfo,i=this.permissionFormatter(n,3);if(n=this.permissionFormatter(n,2),i)(e=this.actionCompanyInfo).channelPermission=n,2===this.show&&(e.sessionid=this.userperadmin.sessionid),3===this.show&&(e.id=this.editId,e.channelCou=this.channelCou,e.permissionId=this.permissionId,e.createTime=this.createTime),console.log(e),this.loading4=!0,(a=e,u.a.post(m+"addProxy",a)).then(function(e){console.log(e),t.loading4=!1,0===e.data.status?(t.toast("保存成功","success"),t.show=1,t.getChannelList()):1===e.data.status?t.$router.replace("/login"):(t.chartPermissionInfo=t.permissionFormatter(t.chartPermissionInfo,1),t.toast(e.data.statusMsg,"error"))}).catch(function(e){t.loading4=!1,t.toast("服务器错误，请联系管理员","error")});else this.toast("请选择账户权限","warning")}else this.toast("初始密码不能为空","warning");else this.toast("联系人邮箱格式不正确","warning");else this.toast("联系人邮箱不能为空","warning");else this.toast("联系人电话不能为空且长度为11","warning");else this.toast("联系人不能为空","warning");else this.toast("公司地址不能为空","warning");else this.toast("公司电话不能为空","warning");else this.toast("税号不能为空且长度为18","warning");else this.toast("开户行不能为空","warning");else this.toast("银行账号不能为空","warning");else this.toast("公司名称不能为空","warning")},backToIndex:function(){this.show=1,this.channelInfo.show=1},backToChannelList:function(){this.show=4,this.channelInfo.show=1}},_()(b,"backToChannelList",function(){this.channelInfo.show=1}),_()(b,"subChannels",function(e,t){console.log(e),this.show=4,this.channelTableData=[],this.channelInfo.proxyId=e.id,this.companyInfo.id=e.id,this.companyInfo.name=e.company,this.companyInfo.channelCount=e.channelCou,this.currentCompany=e.company,this.permissionId=e.permissionId,this.currentFirstLevelChannelNo=e.channelNo,0===this.companyInfo.channelCount?(this.actionChannelInfo.level="一级渠道",this.createChannelAuthority=!0):(this.actionChannelInfo.level="二级渠道",this.createChannelAuthority=!1),console.log("进入渠道页面自动查询"),this.searchChannelList()}),_()(b,"resetActionInput",function(){console.log("resetActionInput"),this.actionCompanyInfo.company="",this.actionCompanyInfo.bankAccount="",this.actionCompanyInfo.bank="",this.actionCompanyInfo.dutyParagraph="",this.actionCompanyInfo.phone="",this.actionCompanyInfo.address="",this.actionCompanyInfo.contacts="",this.actionCompanyInfo.mobileno="",this.actionCompanyInfo.email="",this.actionCompanyInfo.pwd="",this.permissionFormatter(this.chartPermissionInfo,4)}),_()(b,"editCompany",function(e,t){var a=this;this.show=3,this.editId=e.id,this.createTime=e.createTime,this.channelCou=e.channelCou,this.permissionId=e.permissionId,this.actionCompanyInfo.sessionid=this.userperadmin.sessionid,this.actionCompanyInfo.company=e.company,this.actionCompanyInfo.bankAccount=void 0===e.bankAccount?"0":e.bankAccount,this.actionCompanyInfo.bank=void 0===e.bank?"0":e.bank,this.actionCompanyInfo.dutyParagraph=void 0===e.dutyParagraph?"0":e.dutyParagraph,this.actionCompanyInfo.phone=void 0===e.phone?"0":e.phone,this.actionCompanyInfo.address=void 0===e.address?"0":e.address,this.actionCompanyInfo.contacts=e.contacts,this.actionCompanyInfo.mobileno=e.mobileno,this.actionCompanyInfo.email=e.email,this.actionCompanyInfo.pwd=e.pwd;var n,i={sessionid:this.userperadmin.sessionid,permissionId:e.permissionId};console.log(i),(n=i,u.a.post(m+"getChannelPermission",n)).then(function(e){console.log("getChannelPermissionReg"),console.log(e),0===e.data.status?(a.chartPermissionInfo=e.data.channelPermission,a.chartPermissionInfo=a.permissionFormatter(a.chartPermissionInfo,1),console.log(a.chartPermissionInfo)):1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){a.loading=!1,a.toast("服务器错误，请联系管理员","error")})}),_()(b,"permissionFormatter",function(e,t){var a=k()(e),n=S()(e);if(1===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=1===t)});else if(2===t)n.forEach(function(t,n){"id"!==a[n]&&(e[a[n]]=!0===t?1:0)});else{if(3===t)return n.includes(!0);var i=this;n.forEach(function(e,t){"id"!==a[t]?i.chartPermissionInfo[a[t]]=!1:i.chartPermissionInfo[a[t]]=""})}return e}),_()(b,"addCompany",function(){this.resetActionInput(),this.show=2}),_()(b,"deleteACompany",function(e,t){var a=this;console.log(e),this.$confirm("是否禁用“"+e.company+"(公司名称)”。点击“确定”确认禁用，点击“取消”关闭窗口，返回渠道管理页面","禁用渠道商",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.toast("删除成功!","success")}).catch(function(){a.toast("已取消删除!","info")})}),_()(b,"channelNameFilter",function(e){console.log(e)}),_()(b,"channelNoFilter",function(e){console.log(e)}),_()(b,"getChannelParams",function(){var e=this,t={sessionid:this.userperadmin.sessionid};console.log(t),this.loading2=!0,f(t).then(function(t){if(console.log(t),e.loading2=!1,0===t.data.status){if(e.channelInfo.channelList=t.data.channelNameList,e.channelInfo.channelNoList=t.data.channelNoList,t.data.adminIdList&&0!==t.data.adminIdList.length){var a=e;a.channelInfo.channelManList=[];try{t.data.adminIdList.forEach(function(e,t){var n=e.split(","),i={id:n[0],name:n[1]};console.log(i),a.channelInfo.channelManList.push(i)})}catch(e){console.log(e)}}}else 1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading2=!1,e.toast("服务器错误，请联系管理员","error")})}),_()(b,"searchChannelList",function(){var e,t=this,a={sessionid:this.userperadmin.sessionid,proxyId:this.channelInfo.proxyId,first:0,pageId:this.channelInfo.currentPage-1,pageSize:this.channelInfo.pageSize};void 0!==this.channelInfo.channelName&&""!==this.channelInfo.channelName&&(a.channelName=this.channelInfo.channelName),void 0!==this.channelInfo.channelNo&&""!==this.channelInfo.channelNo&&(a.channel=this.channelInfo.channelNo),void 0!==this.channelInfo.channelLevel&&""!==this.channelInfo.channelLevel&&(a.level=this.channelInfo.channelLevel),void 0!==this.channelInfo.channelMan&&""!==this.channelInfo.channelMan&&(a.adminId=this.channelInfo.channelMan),console.log(a),this.loading3=!0,(e=a,u.a.post(m+"getChannel",e)).then(function(e){if(console.log("channelTableData"),console.log(e),t.loading3=!1,0===e.data.status){if(e.data.channelList){var a=t;e.data.channelList.forEach(function(e,t,n){console.log(e.rewardPrice),n[t].rewardPrice=a.rewardPriceFormatter(e.rewardPrice)})}t.channelTableData=e.data.channelList,e.data.listSize&&(t.channelInfo.dataSize=parseInt(e.data.listSize))}else 1===e.data.status?t.$router.replace("/login"):t.toast(e.data.statusMsg,"error")}).catch(function(e){t.loading3=!1,t.toast("服务器错误，请联系管理员","error")})}),_()(b,"rewardTypeIdFormatter",function(e,t,a){return 26===a?"CPA单价":27===a?"CPS单价":28===a?"CPS比例":a}),_()(b,"rewardPriceFormatter",function(e,t){if(e){var a=e.split(","),n=[],i=[];if(a.length<=1)if(1===t){var s=e.split("/");n.push(s[1])}else n.push(a[0]);else this.editFcTypeData=a,a.forEach(function(e,t){var a=e.split("/");i.push({max:a[0],price:a[1]}),n[t]=0===t?"0 - "+a[0]+" : "+a[1]:parseInt(i[t-1].max)+1+" - "+a[0]+" : "+a[1]});return n}}),_()(b,"channelTablePageSizeChange",function(e){this.channelInfo.pageSize=e}),_()(b,"channelTableCurrentPageChange",function(e){this.channelInfo.currentPage=e}),_()(b,"setActionChannelParams",function(e){var t,a=this,n={sessionid:this.userperadmin.sessionid};(t=n,u.a.post(m+"getChannelValue",t)).then(function(t){if(console.log("新增|编辑渠道"),console.log(t),0===t.data.status){if(a.appInfo.appList=t.data.appList,a.channelAttributeInfo.attributeList=t.data.channelAttribute,a.channelTypeInfo.typeListAll=t.data.channelType,a.channelDivisionInfo.divisionListAll=t.data.channelSubdivision,t.data.adminIdList&&0!==t.data.adminIdList.length){var n=a;n.manInfo.manList=[],t.data.adminIdList.forEach(function(e,t){var a=e.split(","),i={id:a[0],name:a[1],index:a[2]};n.manInfo.manList.push(i)}),a.manInfo.manListAll=n.manInfo.manList}a.rewardTypeInfo.typeList=t.data.rewardTypeList,a.settlementCycleInfo.typeList=t.data.settlementCycleList,a.settlementCycleInfo.typeListAll=t.data.settlementCycleList,a.cacCostTypeInfo.typeList=t.data.costingList,e&&e(!0)}else 1===t.data.status?a.$router.replace("/login"):a.toast(t.data.statusMsg,"error")}).catch(function(e){console.log("error",e),a.loading=!1,a.toast("服务器错误，请联系管理员2","error")})}),_()(b,"addChannel",function(){this.channelInfo.show=2,this.isEdit=!1,this.setActionChannelParams()}),_()(b,"editChannel",function(e,t){var a=this,n=this;this.editChannelId=e.id,this.editRewardId=e.rewardId,this.actionChannelInfo.appId=e.appId,this.isEdit=!0;var i="",s=[];this.setActionChannelParams(function(t){if(t){i=t,n.appInfo.appList.forEach(function(t,a){t.id===e.appId&&(n.appInfo.appSelected=a)}),n.channelAttributeInfo.attributeSelected=e.attribute,n.channelTypeInfo.typeList=n.channelTypeInfo.typeListAll,n.channelTypeInfo.typeSelected=e.type,n.channelDivisionInfo.divisionList=n.channelDivisionInfo.divisionListAll,n.channelDivisionInfo.divisionSelected=e.subdivision,n.manInfo.manList=n.manInfo.manListAll,console.log("rewardList",s);var a=s.length;0!==a&&(console.log("manList",n.manInfo.manList),1===a?(n.fcType.isStep=0,n.fcType.stepData=s[0].price,n.fcType.typeSelected=s[0].typeId,n.settlementCycleInfo.typeSelected=s[0].settlementCycle,n.cacCostTypeInfo.typeSelected=s[0].costing,n.manInfo.manSelected=s[0].adminId.toString()):(n.fcType.isStep=1,n.fcType.typeSelected=s[0].typeId,n.settlementCycleInfo.typeSelected=s[0].settlementCycle,n.cacCostTypeInfo.typeSelected=s[0].costing,n.manInfo.manSelected=s[0].adminId.toString(),n.fcTypeData.mins=[0],n.fcTypeData.rewards=[],s.forEach(function(e,t){t===a-1?n.fcTypeData.last.price=e.price:(n.fcTypeData.mins.push(e.max+1),n.fcTypeData.rewards.push({max:e.max,price:e.price}))}),n.fcTypeData.length=a-1,console.log("mins",n.fcTypeData.mins)))}});var o={sessionid:this.userperadmin.sessionid,rewardId:e.rewardId};console.log("getRewardParams",o),v(o).then(function(e){if(console.log("getRewardReg"),console.log(e),0===e.data.status){if(s=e.data.rewardList,a.editRewards=s,console.log("thisFlag",i),i){console.log("manList",a.manInfo.manList);var t=e.data.rewardList.length;if(0!==t)if(1===t)a.fcType.isStep=0,a.fcType.stepData=e.data.rewardList[0].price,a.fcType.typeSelected=e.data.rewardList[0].typeId,a.settlementCycleInfo.typeSelected=e.data.rewardList[0].settlementCycle,a.cacCostTypeInfo.typeSelected=e.data.rewardList[0].costing,a.manInfo.manSelected=e.data.rewardList[0].adminId.toString();else{a.fcType.isStep=1,a.fcType.typeSelected=e.data.rewardList[0].typeId,a.settlementCycleInfo.typeSelected=e.data.rewardList[0].settlementCycle,a.cacCostTypeInfo.typeSelected=e.data.rewardList[0].costing,a.manInfo.manSelected=e.data.rewardList[0].adminId.toString();var n=a;n.fcTypeData.mins=[0],n.fcTypeData.rewards=[],e.data.rewardList.forEach(function(e,a){a===t-1?n.fcTypeData.last.price=e.price:(n.fcTypeData.mins.push(e.max+1),n.fcTypeData.rewards.push({max:e.max,price:e.price}))}),n.fcTypeData.length=t-1,console.log("mins",n.fcTypeData.mins)}}}else 1===e.data.status?a.$router.replace("/login"):a.toast(e.data.statusMsg,"error")}).catch(function(e){console.log("error",e),a.toast("服务器错误，请联系管理员1","error")}),this.channelInfo.show=3,this.actionChannelInfo.level=1===e.level?"一级渠道":"二级渠道",this.actionChannelInfo.channelName=e.channelName,this.actionChannelInfo.channelNo=e.channelNo,this.actionChannelInfo.channel=e.channel,this.actionChannelInfo.url=e.url}),_()(b,"deleteAChannel",function(e,t){var a=this;this.$confirm("是否禁用“"+e.channelName+"(渠道名称)”。点击“确定”确认禁用，点击“取消”关闭窗口，返回渠道管理页面","禁用渠道",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.toast("禁用成功!","success")}).catch(function(){a.toast("已取消禁用","info")})}),_()(b,"cancelAddChannel",function(){this.resetChannelInfo(),this.channelInfo.show=1}),_()(b,"resetChannelInfo",function(){this.actionChannelInfo.channelName="",this.actionChannelInfo.channelNo="",this.actionChannelInfo.channel="",this.actionChannelInfo.url="",this.appInfo.appSelected="",this.channelAttributeInfo.attributeSelected="",this.channelTypeInfo.typeSelected="",this.channelDivisionInfo.divisionSelected="",this.rewardTypeInfo.typeSelected=26,this.fcType.isStep=0,this.fcType.stepData="",this.fcTypeData.last={max:999999999,price:0},this.fcTypeData.rewards=[{max:0,price:0}],this.fcTypeData.mins=[0],this.settlementCycleInfo.typeSelected="",this.cacCostTypeInfo.typeSelected="",this.manInfo.manSelected="",this.manInfo.manSelected="",this.cacCostTypeInfo.typeSelected="",this.settlementCycleInfo.typeSelected=""}),_()(b,"saveChannelInfo",function(){var e=this;if(!this.loading5)if(""!==this.actionChannelInfo.channelName)if(this.actionValidate.channelNo)this.toast("渠道号不能为空","warning");else if(""!==this.appInfo.appSelected)if(""!==this.channelAttributeInfo.attributeSelected)if(""!==this.channelTypeInfo.typeSelected)if(""!==this.channelDivisionInfo.divisionSelected)if(0!==this.fcType.isStep||""!==this.fcType.stepData){if(1===this.fcType.isStep){var t=S()(this.fcTypeData.rewards);if(t.includes(0)&&t.includes("")&&0===this.fcTypeData.last.price&&""===this.fcTypeData.last.price)return void this.toast("分成单价(分成比例|首提人数|首提金额|注册用户数)不能为空","warning")}if(""!==this.settlementCycleInfo.typeSelected)if(""!==this.cacCostTypeInfo.typeSelected)if(""!==this.manInfo.manSelected){if(this.actionChannelInfo.rewards=[],0===this.fcType.isStep){var a={};a.price=this.fcType.stepData,a.order=1,a.typeId=this.rewardTypeInfo.typeSelected,a.adminId=this.manInfo.manSelected,a.updateAdminId=this.userperadmin.admin.id,a.costing=this.cacCostTypeInfo.typeSelected,a.settlementCycle=this.settlementCycleInfo.typeSelected,3===this.channelInfo.show&&(a.id=this.editRewards[0].id,a.channelId=this.editRewards[0].channelId,a.date=this.editRewards[0].date),this.actionChannelInfo.rewards.push(a)}else{this.actionChannelInfo.rewards=this.fcTypeData.rewards.slice(),this.actionChannelInfo.rewards.push(this.fcTypeData.last);var n=this,i=new Date;i=P(i,1),this.actionChannelInfo.rewards.forEach(function(e,t){e.order=t+1,e.typeId=n.rewardTypeInfo.typeSelected,e.adminId=n.manInfo.manSelected,e.updateAdminId=n.userperadmin.admin.id,e.costing=n.cacCostTypeInfo.typeSelected,e.settlementCycle=n.settlementCycleInfo.typeSelected,3===n.channelInfo.show&&(e.id=n.editRewards[0].id,e.channelId=n.editRewards[0].channelId,e.date=n.editRewards[0].date)})}var s,o={sessionid:this.userperadmin.sessionid,proxyId:this.companyInfo.id,level:"二级渠道"===this.actionChannelInfo.level?2:1,channelName:this.actionChannelInfo.channelName,channelNamePY:"",channelNo:this.actionChannelInfo.channelNo,channel:this.actionChannelInfo.channel,isCreate:"二级渠道"===this.actionChannelInfo.level?0:this.actionChannelInfo.isCreate,appId:this.actionChannelInfo.appId,attribute:this.channelAttributeInfo.attributeSelected,type:this.channelTypeInfo.typeSelected,subdivision:this.channelDivisionInfo.divisionSelected,url:this.actionChannelInfo.url,adminId:this.manInfo.manSelected,permissionId:this.permissionId,rewards:this.actionChannelInfo.rewards};3===this.channelInfo.show&&(o.id=this.editChannelId,o.rewardId=this.editRewardId),console.log(o),this.loading5=!0,(s=o,u.a.post(m+"addChannel",s)).then(function(t){console.log("保存新增|编辑渠道"),console.log(t),e.loading5=!1,0===t.data.status?(e.channelInfo.show=1,e.searchChannelList(),e.resetChannelInfo(),e.getChannelParams()):1===t.data.status?e.$router.replace("/login"):e.toast(t.data.statusMsg,"error")}).catch(function(t){e.loading5=!1,e.toast("服务器错误，请联系管理员","error")})}else this.toast("负责人不能为空","warning");else this.toast("成本计算方式不能为空","warning");else this.toast("结算周期不能为空","warning")}else this.toast("分成单价(分成比例)不能为空","warning");else this.toast("渠道细分不能为空","warning");else this.toast("渠道类型不能为空","warning");else this.toast("渠道属性不能为空","warning");else this.toast("所属APP不能为空","warning");else this.toast("渠道名称不能为空","warning")}),_()(b,"checkChannelNo",function(){return""===this.actionChannelInfo.channelNo?(this.actionValidate.channelNo=!0,this.toast("渠道号不能为空","warning"),!1):(this.actionValidate.channelNo=!1,!0)}),_()(b,"generateChannelCode",function(e){var t=this;if(console.log("e",e),this.checkChannelNo()){var a,n={sessionid:this.userperadmin.sessionid,channelNo:this.actionChannelInfo.channelNo};console.log("checkChannelNoReg parameter",n),(a=n,u.a.post(m+"checkChannelNo",a)).then(function(e){if(console.log("checkChannelNoReg",e),t.loading5=!1,0===e.data.status){t.actionValidate.channelNo=!1,0===t.companyInfo.channelCount?t.actionChannelInfo.channel=t.actionChannelInfo.channelNo:t.actionChannelInfo.channel=t.currentFirstLevelChannelNo+"_"+t.actionChannelInfo.channelNo;var a=t.actionChannelInfo.url.split("=");""===t.actionChannelInfo.channelNo?t.actionChannelInfo.url=a[0]+"=":t.actionChannelInfo.url=a[0]+"="+t.actionChannelInfo.channel}else 1===e.data.status?t.$router.replace("/login"):(t.actionValidate.channelNo=!0,t.toast(e.data.statusMsg,"error"))}).catch(function(e){t.loading5=!1,console.log("error",e),t.toast("服务器错误，请联系管理员","error")})}}),_()(b,"appChange",function(e){this.actionChannelInfo.appId=this.appInfo.appList[e].id,this.actionChannelInfo.url=this.appInfo.appList[e].other+this.actionChannelInfo.channel}),_()(b,"attributeChange",function(e){var t=this;t.channelTypeInfo.typeList=[],t.channelTypeInfo.typeSelected="",this.channelTypeInfo.typeListAll.forEach(function(a,n){a.higherId===e&&t.channelTypeInfo.typeList.push(a)})}),_()(b,"typeChange",function(e){var t=this;t.channelDivisionInfo.divisionList=[],t.channelDivisionInfo.divisionSelected="",this.channelDivisionInfo.divisionListAll.forEach(function(a,n){a.higherId===e&&t.channelDivisionInfo.divisionList.push(a)})}),_()(b,"rewardTypeChange",function(e){console.log(e),26===e?(this.fcType.text="分成单价",this.fcType.text1="注册用户",this.fcType.unitText="元"):27===e?(this.fcType.text="分成单价",this.fcType.text1="首提用户",this.fcType.unitText="元"):(this.fcType.text="分成比例",this.fcType.text1="首提金额",this.fcType.unitText="%")}),_()(b,"addFcItem",function(){this.fcTypeData.length;this.fcTypeData.rewards.push({max:0,price:0}),this.fcTypeData.length++}),_()(b,"minusFcItem",function(){this.fcTypeData.rewards.pop(),this.fcTypeData.length--}),_()(b,"setNextMinValue",function(e){console.log(e);var t=parseInt(this.fcTypeData.rewards[e].max)+1;this.fcTypeData.mins[e+1]=t,console.log(this.fcTypeData.rewards),console.log(this.fcTypeData.mins)}),_()(b,"toast",function(e,t){this.$message({type:t,message:e})}),b)},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page channel-center-page"},[a("h3",{staticClass:"breadnav"},[e._v("当前位置："),a("a",{attrs:{href:"javascript:;"},on:{click:e.backToIndex}},[e._v("渠道商管理")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.show&&4!==e.show,expression:"show !== 1 && show !== 4"}]},[e._v(" > "+e._s(e.current))]),a("span",{directives:[{name:"show",rawName:"v-show",value:4===e.show,expression:"show === 4"}]},[e._v(" > "),a("a",{attrs:{href:"javascript:;"},on:{click:e.backToChannelList}},[e._v("渠道列表")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1!==e.channelInfo.show,expression:"channelInfo.show !== 1"}]},[e._v(" > "+e._s(e.channelListPosition))])])]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1===e.show,expression:"show === 1"}],staticClass:"list-wrapper"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticClass:"actions",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-col",{attrs:{xs:24,sm:20}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"公司名称"},model:{value:e.companySelected,callback:function(t){e.companySelected=t},expression:"companySelected"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.company,value:e.id}})})),e._v(" "),a("span",{staticClass:"btn blue",on:{click:e.searchByCompany}},[a("i",{staticClass:"fa fa-search"})])],1),e._v(" "),a("el-col",{staticClass:"btns",attrs:{xs:24,sm:4}},[a("span",{staticClass:"btn green",on:{click:e.addCompany}},[a("i",{staticClass:"fa fa-plus"})])])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.companyTableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"公司名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"联系人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"email"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobileno",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.subChannels(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-table",attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editCompany(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteACompany(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}})])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)],1),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:2===e.show||3===e.show,expression:"show === 2 || show === 3"}],staticClass:"action-wrapper"},[a("h4",[e._v("渠道商账户信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"company"}},[e._v("公司名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.company,expression:"actionCompanyInfo.company"}],attrs:{type:"text",id:"company"},domProps:{value:e.actionCompanyInfo.company},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"company",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"bankAccount"}},[e._v("银行账户")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.bankAccount,expression:"actionCompanyInfo.bankAccount"}],attrs:{type:"text",id:"bankAccount",maxLength:"19",oninput:"value=value.replace(/[^0-9]/g,'')"},domProps:{value:e.actionCompanyInfo.bankAccount},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"bankAccount",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"bank"}},[e._v("开户行")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.bank,expression:"actionCompanyInfo.bank"}],attrs:{type:"text",id:"bank"},domProps:{value:e.actionCompanyInfo.bank},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"bank",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"dutyParagraph"}},[e._v("税号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.dutyParagraph,expression:"actionCompanyInfo.dutyParagraph"}],attrs:{type:"text",id:"dutyParagraph",maxLength:"18",oninput:"value=value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:e.actionCompanyInfo.dutyParagraph},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"dutyParagraph",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"phone"}},[e._v("公司电话")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.phone,expression:"actionCompanyInfo.phone"}],attrs:{type:"text",id:"phone",maxLength:"11",oninput:"value=value.replace(/[^0-9]/g,'')"},domProps:{value:e.actionCompanyInfo.phone},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"phone",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"address"}},[e._v("公司地址")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.address,expression:"actionCompanyInfo.address"}],attrs:{type:"text",id:"address"},domProps:{value:e.actionCompanyInfo.address},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"address",t.target.value)}}})])]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"contacts"}},[e._v("联系人")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.contacts,expression:"actionCompanyInfo.contacts"}],attrs:{type:"text",id:"contacts"},domProps:{value:e.actionCompanyInfo.contacts},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"contacts",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"mobileno"}},[e._v("联系人电话")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.mobileno,expression:"actionCompanyInfo.mobileno"}],class:{error:e.actionValidate.mobileNo},attrs:{type:"text",id:"mobileno",maxLength:"11",oninput:"value=value.replace(/[^0-9]/g,'')"},domProps:{value:e.actionCompanyInfo.mobileno},on:{blur:e.checkMobileNoFun,input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"mobileno",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"email"}},[e._v("联系人邮箱")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.email,expression:"actionCompanyInfo.email"}],class:{error:e.actionValidate.email},attrs:{type:"text",id:"email"},domProps:{value:e.actionCompanyInfo.email},on:{blur:e.checkEmailFun,input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"email",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group",class:{required:2===e.show}},[a("label",{attrs:{for:"pwd"}},[e._v("账号初始密码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionCompanyInfo.pwd,expression:"actionCompanyInfo.pwd"}],attrs:{type:"password",id:"pwd"},domProps:{value:e.actionCompanyInfo.pwd},on:{input:function(t){t.target.composing||e.$set(e.actionCompanyInfo,"pwd",t.target.value)}}})])])],1),e._v(" "),a("el-row",{staticClass:"form-wrapper permission-wrapper"},[a("h4",[e._v("账户权限")]),e._v(" "),a("div",{staticClass:"form-wrapper"},[a("div",{staticClass:"input-group required"},[a("label",[e._v("请选择您所需要的报表内容")]),e._v(" "),a("div",[a("el-checkbox",{model:{value:e.chartPermissionInfo.registerChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"registerChartPermission",t)},expression:"chartPermissionInfo.registerChartPermission"}},[e._v("注册数")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.loginChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"loginChartPermission",t)},expression:"chartPermissionInfo.loginChartPermission"}},[e._v("登录数")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.applyChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"applyChartPermission",t)},expression:"chartPermissionInfo.applyChartPermission"}},[e._v("申请人数")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.loanAcctChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"loanAcctChartPermission",t)},expression:"chartPermissionInfo.loanAcctChartPermission"}},[e._v("授信人数")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.cashNumCharPermission,callback:function(t){e.$set(e.chartPermissionInfo,"cashNumCharPermission",t)},expression:"chartPermissionInfo.cashNumCharPermission"}},[e._v("放款人数")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.firstCashAmtChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"firstCashAmtChartPermission",t)},expression:"chartPermissionInfo.firstCashAmtChartPermission"}},[e._v("首次提现总金额(元)")]),e._v(" "),a("el-checkbox",{model:{value:e.chartPermissionInfo.totalCashAmtChartPermission,callback:function(t){e.$set(e.chartPermissionInfo,"totalCashAmtChartPermission",t)},expression:"chartPermissionInfo.totalCashAmtChartPermission"}},[e._v("提现总金额(元)")])],1)])])]),e._v(" "),a("div",{staticClass:"submit-btns"},[a("button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading4,expression:"loading4"}],staticClass:"btn submit",attrs:{"element-loading-spinner":"el-icon-loading"},on:{click:e.saveCompanyInfo}},[e._v("提交")]),e._v(" "),a("button",{staticClass:"btn cancel",on:{click:e.cancelAdd}},[e._v("取消")])])],1),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:4===e.show&&1===this.channelInfo.show,expression:"show === 4 && this.channelInfo.show === 1"}],staticClass:"sub-table-wrapper"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticClass:"actions",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("el-col",{attrs:{xs:24,sm:20}},[a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道名称"},model:{value:e.channelInfo.channelName,callback:function(t){e.$set(e.channelInfo,"channelName",t)},expression:"channelInfo.channelName"}},e._l(e.channelInfo.channelList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"渠道号"},model:{value:e.channelInfo.channelNo,callback:function(t){e.$set(e.channelInfo,"channelNo",t)},expression:"channelInfo.channelNo"}},e._l(e.channelInfo.channelNoList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道级别"},model:{value:e.channelInfo.channelLevel,callback:function(t){e.$set(e.channelInfo,"channelLevel",t)},expression:"channelInfo.channelLevel"}},e._l(e.channelInfo.channelLevalList,function(e){return a("el-option",{key:e.channelNo,attrs:{label:e.name,value:e.channelNo}})})),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.channelInfo.channelMan,callback:function(t){e.$set(e.channelInfo,"channelMan",t)},expression:"channelInfo.channelMan"}},e._l(e.channelInfo.channelManList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("span",{staticClass:"btn blue",on:{click:e.searchChannelList}},[a("i",{staticClass:"fa fa-search"})])],1),e._v(" "),a("el-col",{staticClass:"btns",attrs:{xs:24,sm:4}},[a("span",{staticClass:"btn green",on:{click:e.addChannel}},[a("i",{staticClass:"fa fa-plus"})])])],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],staticClass:"table-wrapper",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("p",{staticClass:"table-title"},[e._v("当前渠道商："),a("span",[e._v(e._s(e.currentCompany))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.channelTableData,border:"",size:"small"}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelName",label:"渠道名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelNo",label:"渠道号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adminName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"渠道级别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardTypeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return a("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.editChannel(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-pencil-square-o",attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.deleteAChannel(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}})]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.getChannelFcHistoryFun(t.row,t.$index)}}},[a("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}})])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.channelInfo.currentPage,"page-sizes":e.channelInfo.pageSizes,"page-size":e.channelInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.channelInfo.dataSize},on:{"size-change":e.channelTablePageSizeChange,"current-change":e.channelTableCurrentPageChange}})],1)],1),e._v(" "),4===e.show&&2===e.channelInfo.show|3===e.channelInfo.show?a("section",{staticClass:"action-wrapper"},[a("h4",[e._v("渠道基础信息")]),e._v(" "),a("el-row",{staticClass:"form-wrapper"},[a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"companyName"}},[e._v("归属渠道商")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.companyInfo.name,expression:"companyInfo.name"}],attrs:{type:"text",readonly:"true",id:"companyName"},domProps:{value:e.companyInfo.name},on:{input:function(t){t.target.composing||e.$set(e.companyInfo,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelLevel"}},[e._v("渠道级别")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.level,expression:"actionChannelInfo.level"}],attrs:{type:"text",readonly:"true",id:"channelLevel"},domProps:{value:e.actionChannelInfo.level},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"level",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelName"}},[e._v("渠道名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channelName,expression:"actionChannelInfo.channelName"}],attrs:{type:"text",id:"channelName"},domProps:{value:e.actionChannelInfo.channelName},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channelName",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channelNo"}},[e._v("渠道号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channelNo,expression:"actionChannelInfo.channelNo"}],class:{error:e.actionValidate.channelNo},attrs:{type:"text",id:"channelNo",readonly:e.isEdit,oninput:"value=value.replace(/[^0-9a-zA-Z]/g,'')"},domProps:{value:e.actionChannelInfo.channelNo},on:{blur:e.generateChannelCode,input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channelNo",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"channel"}},[e._v("渠道编码")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.channel,expression:"actionChannelInfo.channel"}],attrs:{type:"text",id:"channel",readonly:"true"},domProps:{value:e.actionChannelInfo.channel},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"channel",t.target.value)}}})]),e._v(" "),e.createChannelAuthority?a("div",{staticClass:"input-group required"},[a("label",[e._v("是否可创建子渠道")]),e._v(" "),a("el-radio-group",{model:{value:e.actionChannelInfo.isCreate,callback:function(t){e.$set(e.actionChannelInfo,"isCreate",t)},expression:"actionChannelInfo.isCreate"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e(),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("所属APP")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择APP"},on:{change:e.appChange},model:{value:e.appInfo.appSelected,callback:function(t){e.$set(e.appInfo,"appSelected",t)},expression:"appInfo.appSelected"}},e._l(e.appInfo.appList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:t}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道属性")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道属性"},on:{change:e.attributeChange},model:{value:e.channelAttributeInfo.attributeSelected,callback:function(t){e.$set(e.channelAttributeInfo,"attributeSelected",t)},expression:"channelAttributeInfo.attributeSelected"}},e._l(e.channelAttributeInfo.attributeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道类型")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道类型"},on:{change:e.typeChange},model:{value:e.channelTypeInfo.typeSelected,callback:function(t){e.$set(e.channelTypeInfo,"typeSelected",t)},expression:"channelTypeInfo.typeSelected"}},e._l(e.channelTypeInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("渠道细分")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择渠道细分"},model:{value:e.channelDivisionInfo.divisionSelected,callback:function(t){e.$set(e.channelDivisionInfo,"divisionSelected",t)},expression:"channelDivisionInfo.divisionSelected"}},e._l(e.channelDivisionInfo.divisionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{xs:24,sm:12}},[a("div",{staticClass:"input-group textAreaInput required"},[a("label",{attrs:{for:"url"}},[e._v("注册链接")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.actionChannelInfo.url,expression:"actionChannelInfo.url"}],attrs:{id:"url",readonly:"true"},domProps:{value:e.actionChannelInfo.url},on:{input:function(t){t.target.composing||e.$set(e.actionChannelInfo,"url",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("分成方式")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择分成方式"},on:{change:e.rewardTypeChange},model:{value:e.rewardTypeInfo.typeSelected,callback:function(t){e.$set(e.rewardTypeInfo,"typeSelected",t)},expression:"rewardTypeInfo.typeSelected"}},e._l(e.rewardTypeInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"email"}},[e._v("是否阶梯")]),e._v(" "),a("el-radio-group",{model:{value:e.fcType.isStep,callback:function(t){e.$set(e.fcType,"isStep",t)},expression:"fcType.isStep"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("div",{staticClass:"input-group required clearfix"},[a("label",{attrs:{for:""}},[e._v(e._s(e.fcType.text)+e._s(e.fcType.unitText))]),e._v(" "),0===e.fcType.isStep?a("input",{directives:[{name:"model",rawName:"v-model",value:e.fcType.stepData,expression:"fcType.stepData"}],attrs:{type:"text"},domProps:{value:e.fcType.stepData},on:{input:function(t){t.target.composing||e.$set(e.fcType,"stepData",t.target.value)}}}):e._e(),e._v(" "),1===e.fcType.isStep?a("div",{staticClass:"inner-input-group clearfix"},[a("ul",[e._l(e.fcTypeData.rewards,function(t,n){return a("li",{staticClass:"clearfix"},[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e.fcType.text1)+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("firstFcFormatter")(e.fcTypeData.rewards[n-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fcTypeData.rewards[n].max,expression:"fcTypeData.rewards[index].max"}],attrs:{type:"text"},domProps:{value:e.fcTypeData.rewards[n].max},on:{input:function(t){t.target.composing||e.$set(e.fcTypeData.rewards[n],"max",t.target.value)}}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e.fcType.text)+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"item.price"}],attrs:{type:"text"},domProps:{value:t.price},on:{input:function(a){a.target.composing||e.$set(t,"price",a.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e.fcType.unitText))])])])}),e._v(" "),a("li",[a("div",[a("span",{staticClass:"text"},[e._v(e._s(e.fcType.text1)+"：")]),e._v(" "),a("input",{attrs:{type:"text",readonly:"true"},domProps:{value:e._f("firstFcFormatter")(e.fcTypeData.rewards[e.fcTypeData.length-1])}}),e._v(" "),a("span",{staticClass:"seperate"},[e._v("~")]),e._v(" "),a("input",{attrs:{type:"text",value:"999999999",readonly:"true"}})]),e._v(" "),a("div",[a("span",[e._v(e._s(e.fcType.text)+"：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fcTypeData.last.price,expression:"fcTypeData.last.price"}],attrs:{type:"text"},domProps:{value:e.fcTypeData.last.price},on:{input:function(t){t.target.composing||e.$set(e.fcTypeData.last,"price",t.target.value)}}}),e._v(" "),a("span",{staticClass:"unit"},[e._v(e._s(e.fcType.unitText))])])])],2),e._v(" "),a("button",{on:{click:e.addFcItem}},[a("i",{staticClass:"fa fa-plus"})]),e._v(" "),a("button",{on:{click:e.minusFcItem}},[a("i",{staticClass:"fa fa-minus"})])]):e._e()]),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",{attrs:{for:"pwd"}},[e._v("结算周期")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择结算周期"},model:{value:e.settlementCycleInfo.typeSelected,callback:function(t){e.$set(e.settlementCycleInfo,"typeSelected",t)},expression:"settlementCycleInfo.typeSelected"}},e._l(e.settlementCycleInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("成本计算方式")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择计算方式"},model:{value:e.cacCostTypeInfo.typeSelected,callback:function(t){e.$set(e.cacCostTypeInfo,"typeSelected",t)},expression:"cacCostTypeInfo.typeSelected"}},e._l(e.cacCostTypeInfo.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",{staticClass:"input-group required"},[a("label",[e._v("负责人")]),e._v(" "),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"选择负责人"},model:{value:e.manInfo.manSelected,callback:function(t){e.$set(e.manInfo,"manSelected",t)},expression:"manInfo.manSelected"}},e._l(e.manInfo.manList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),a("div",{staticClass:"submit-btns"},[a("button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading5,expression:"loading5"}],staticClass:"btn submit",attrs:{"element-loading-spinner":"el-icon-loading"},on:{click:e.saveChannelInfo}},[e._v("提交")]),e._v(" "),a("button",{staticClass:"btn cancel",on:{click:e.cancelAddChannel}},[e._v("取消")])])],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"渠道分成历史记录",center:"",width:"70%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fcHistoryList,height:"400",border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{property:"typeId",label:"分成方式",formatter:e.rewardTypeIdFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rewardPrice",label:"分成比例 | 单价"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rewardPrice,function(t){return a("p",{attrs:{"close-transition":""}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"分成起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"adminName",label:"负责人"}}),e._v(" "),a("el-table-column",{attrs:{property:"date",label:"任期起始时间",sortable:"",formatter:e.timeStempFormatter}}),e._v(" "),a("el-table-column",{attrs:{property:"updateAdminName",label:"操作人"}})],1)],1)],1)},staticRenderFns:[]};var z=a("X4nt")(L,N,!1,function(e){a("/QmQ")},"data-v-6ea9f9c8",null).exports,A={data:function(){return{sessionidobj:{},savelog:!1,modeTitle:"",addInfo:{},creatAdminId:"",name:"",dialogVisible:!1,loading:!0,data4:[{id:1,label:"免费流量",children:[{id:3,label:"BD",children:[{id:7,label:"甲方合作"}]},{id:10,label:"市场",children:[{id:7,label:"应用市场"}]}]},{id:2,label:"付费流量",children:[{id:5,label:"BD",children:[{id:9,label:"CPS业务"},{id:10,label:"贷款超市"},{id:11,label:"甲方合作"}]},{id:6,label:"市场",children:[{id:12,label:"应用市场"},{id:13,label:"程序化购物"},{id:14,label:"ASO"}]}]}],defaultProps:{children:"children",label:"label"},data5:[]}},mounted:function(){var e=JSON.parse(localStorage.getItem("userperadmin")).sessionid;this.sessionidobj=h()({sessionid:e}),this.creatAdminId=e,this.getChannel(this.sessionidobj)},methods:{getChannel:function(e){var t=this,a=this;a.data5=[],g(e).then(function(e){if(0===e.data.status){t.loading=!1;for(var n=e.data.channelAttribute,i=e.data.channelType,s=e.data.channelSubdivision,o=0;o<n.length;o++){var l=a.formatDate(n[o].updateTime),r=n[o].id,c=n[o].creatAdmin,d=n[o].higherId,h=n[o].type,p=n[o].creatAdminId,u=n[o].name,m=n[o].updateAdmin,f=n[o].updateAdminId,v=n[o].updateTime,g=u+"/创建:"+c+"/最后操作:"+m+"/修改:"+l;a.data5.push({id:r,label:g,creatAdmin:c,higherId:d,type:h,creatAdminId:p,name:u,updateAdmin:m,updateAdminId:f,updateTime:v}),a.data5[o].children=[];for(var I=0;I<i.length;I++)if(n[o].id===i[I].higherId){var y=a.formatDate(i[I].updateTime),b=i[I].id,C=i[I].creatAdmin,w=i[I].higherId,_=i[I].type,x=i[I].creatAdminId,S=i[I].name,T=i[I].updateAdmin,k=i[I].updateAdminId,P=i[I].updateTime,L=S+"/创建:"+C+"/最后操作:"+T+"/修改:"+y;a.data5[o].children.push({id:b,label:L,creatAdmin:C,higherId:w,type:_,creatAdminId:x,name:S,updateAdmin:T,updateAdminId:k,updateTime:P})}}for(o=0;o<a.data5.length;o++)for(I=0;I<a.data5[o].children.length;I++){a.data5[o].children[I].children=[];for(var N=0;N<s.length;N++)if(a.data5[o].children[I].id==s[N].higherId){var z=a.formatDate(s[N].updateTime),A=s[N].id,D=s[N].creatAdmin,$=s[N].higherId,F=s[N].type,q=s[N].creatAdminId,M=s[N].name,E=s[N].updateAdmin,V=s[N].updateAdminId,R=s[N].updateTime,O=M+"/创建:"+D+"/最后操作:"+E+"/修改:"+z;a.data5[o].children[I].children.push({id:A,label:O,creatAdmin:D,higherId:$,type:F,creatAdminId:q,name:M,updateAdmin:E,updateAdminId:V,updateTime:R})}}a.data4=a.data5}1===e.data.status&&(t.loading=!1,t.$router.replace("/login"))}).catch(function(e){t.$message.error("数据获取失败,请联系管理员")})},appendFirst:function(){this.addInfo={},this.modeTitle="添加",this.dialogVisible=!0;var e=(new Date).valueOf();this.addInfo={sessionid:this.creatAdminId,creatAdminId:this.creatAdminId,name:this.name,higherId:0,updateAdminId:this.creatAdminId,updateTime:e,type:3}},append:function(e,t){this.addInfo={},this.dialogVisible=!0;var a=(new Date).valueOf();0===t&&(this.modeTitle="添加--"+e.name+"--子标签",this.addInfo={sessionid:this.creatAdminId,creatAdminId:this.creatAdminId,name:this.name,higherId:e.id,updateAdminId:this.creatAdminId,updateTime:a,type:e.type+1}),1===t&&(this.modeTitle="修改:"+e.name,this.addInfo={sessionid:this.creatAdminId,creatAdminId:e.creatAdminId,name:this.name,higherId:e.higherId,updateAdminId:this.creatAdminId,updateTime:a,type:e.type,id:e.id})},saveAddInfo:function(){this.savelog=!0;var e=this;e.addInfo.name?function(e){return u.a.post(m+"saveChannelAttribute",e)}(h()(e.addInfo)).then(function(t){0===t.data.status&&(e.savelog=!1,e.dialogVisible=!1,e.$message({message:"保存成功",type:"success"}),e.getChannel(e.sessionidobj)),1===t.data.status&&(e.savelog=!1,e.dialogVisible=!1,e.$router.replace("/login"))}).catch(function(t){e.$message.error("保存失败")}):(e.savelog=!1,e.$message.error("添加的名字不能为空"))},renderContent:function(e,t){var a=this,n=t.node,i=t.data,s=(t.store,n.label.indexOf("/")),o=n.label.substring(0,s),l=n.label.substring(s);return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",null,[e("span",{style:"font-size:0.7rem;color:#333333"},[o]),e("span",{style:"font-size:0.6rem;color:#999999"},[l])]),e("span",null,[e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.append(i,0)}}},[i.type<=4?"添加":""]),e("el-button",{style:"font-size: 12px;",attrs:{type:"text"},on:{click:function(){return a.append(i,1)}}},["修改"]),e("el-button",{style:"font-size: 12px;display:none",attrs:{type:"text"},on:{click:function(){return a.remove(n,i)}}},["删除"])])])}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"channelclass",attrs:{"element-loading-text":"拼命加载中..."}},[a("div",{staticClass:"addfrist"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.appendFirst}})],1),e._v(" "),a("div",{staticClass:"tree"},[a("el-tree",{attrs:{data:e.data4,props:e.defaultProps,"default-expand-all":"","node-key":"id","expand-on-click-node":!1,"render-content":e.renderContent}}),e._v(" "),a("el-dialog",{attrs:{title:e.modeTitle,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-input",{attrs:{placeholder:"请输入添加名称内容"},model:{value:e.addInfo.name,callback:function(t){e.$set(e.addInfo,"name",t)},expression:"addInfo.name"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.savelog},on:{click:e.saveAddInfo}},[e._v("保存")])],1)],1)],1)])},staticRenderFns:[]};var $=a("X4nt")(A,D,!1,function(e){a("8I/B")},null,null).exports,F={data:function(){return{sessionid:"",Statrloading:!0,channelType:[],channelSubdivision:[],newDate:"",qudaoInfo:{valuequdao:"",optionsqudao:[],optionsqudaonum:[],valuequdaonum:""},fuzheren:[],fuzherenname:"",qudaoshuxing:[{value:"-1",label:"全部"}],qudaoshuxingname:"",options4:[],qudaoClass:"",gitTimeold:"",gitTimeNew:{},checkList:["渠道","渠道号","渠道分类","负责人","H5","额度"],iconImg:"fa fa-sun-o",iconImgIndex:1,fbsData:[],tableloading:!1,fontCheack:{qudao:!1,qudaoNumber:!1,qudaoClass:!1,fuzeren:!1,H5:!1,moneySize:!1},secrchSetData:{},currentPage:1,pageSizes:[10,20,50],dataSize:0,pagesize:10,first:0,dataTimeDay:0,dataTimeMoth:0,baobiaoSearchIndex:0}},methods:{sharchInfoSelect:function(e){var t=!1,a=!1,n=this,i={sessionid:e},s=h()(i);f(s).then(function(e){if(console.log(e.data),0===e.data.status)for(var a=0;a<e.data.adminIdList.length;a++){var i=e.data.adminIdList[a],s=e.data.adminIdList[a].split(",")[1];n.fuzheren.push({value:i,label:s}),n.qudaoInfo.optionsqudao=e.data.channelNameList,n.qudaoInfo.optionsqudaonum=e.data.channelNoList,t=!0}1===e.data.status&&n.$router.replace("/login")}),g(s).then(function(e){if(console.log(e.data),0===e.data.status){for(var t=0;t<e.data.channelAttribute.length;t++){var i=e.data.channelAttribute[t].id,s=e.data.channelAttribute[t].name;n.qudaoshuxing.push({value:i,label:s})}n.channelType=e.data.channelType,n.channelSubdivision=e.data.channelSubdivision,a=!0}1===e.data.status&&n.$router.replace("/login")});var o=setInterval(function(){n.baobiaoSearchIndex++,t&&a?(n.Statrloading=!1,clearInterval(o),n.baobiaoSearchIndex=0,n.search()):(n.baobiaoSearchIndex<2?n.sharchInfoSelect(this.sessionid):(clearInterval(o),n.baobiaoSearchIndex=4),n.Statrloading=!0)},2e3)},qudaoProprFilter:function(e){this.qudaoClass="",this.options4=[{options:[{value:"-1,-1",label:"全部"}]}];for(var t=0;t<this.channelType.length;t++){if(e===this.channelType[t].higherId){var a=this.channelType[t].id,n=this.channelType[t].name;this.options4.push({label:n,id:a})}for(var i=1;i<this.options4.length;i++){this.options4[i].options=[];for(var s=0;s<this.channelSubdivision.length;s++)this.options4[i].id===this.channelSubdivision[s].higherId&&this.options4[i].options.push({value:this.channelSubdivision[s].higherId+","+this.channelSubdivision[s].id,label:this.channelSubdivision[s].name})}}},findTime:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();this.newDate=t+"-"+a+"-"+n},tableTimeStyle:function(){this.iconImgIndex++,this.iconImgIndex<=2?2===this.iconImgIndex&&(this.iconImg="fa fa-moon-o"):(this.iconImgIndex=1,this.iconImg="fa fa-sun-o"),this.currentPage=1,this.first=0,this.search()},pageSizeChange:function(e){this.pagesize=e,this.first=1,this.pagesize,this.search()},currentPageChange:function(e){this.currentPage=e,this.first=1,this.search()},search:function(){var e=this;this.tableloading=!0,this.fontCheack.qudao=!1,this.fontCheack.qudaoNumber=!1,this.fontCheack.qudaoClass=!1,this.fontCheack.fuzeren=!1,this.fontCheack.H5=!1,this.fontCheack.moneySize=!1,this.gitTimeold?(this.gitTimeNew.satrt=this.gitTimeold[0],this.gitTimeNew.end=this.gitTimeold[1]):(this.gitTimeNew.satrt="",this.gitTimeNew.end=""),this.secrchSetData={sessionid:this.sessionid,channelName:this.qudaoInfo.valuequdao?this.qudaoInfo.valuequdao:"",channelNo:this.qudaoInfo.valuequdaonum?this.qudaoInfo.valuequdaonum:"",adminId:this.fuzherenname?this.fuzherenname.split(",")[0]:"",adminName:this.fuzherenname?this.fuzherenname.split(",")[1]:"",attribute:this.qudaoshuxingname&&"-1"!=this.qudaoshuxingname?this.qudaoshuxingname:"",type:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[0]:"",subdivision:this.qudaoClass&&"-1,-1"!=this.qudaoClass?this.qudaoClass.split(",")[1]:"",minDate:this.gitTimeNew.satrt,maxDate:this.gitTimeNew.end,dateType:this.iconImgIndex?this.iconImgIndex:"",pageId:this.currentPage-1,pageSize:this.pagesize,first:this.first};var t,a=this,n=h()(this.secrchSetData);if(console.log(n),(t=n,u.a.post(m+"getReportform",t)).then(function(t){console.log(t.data),0===t.data.status&&(1===e.secrchSetData.dateType&&(a.fbsData=t.data.reportforms_day),2===e.secrchSetData.dateType&&(a.fbsData=t.data.reportforms_month),t.data.listSize?(1===e.secrchSetData.dateType&&(a.dataTimeDay=parseInt(t.data.listSize),a.dataSize=a.dataTimeDay),2===e.secrchSetData.dateType&&(a.dataTimeMoth=parseInt(t.data.listSize),a.dataSize=a.dataTimeMoth)):a.dataSize=a.dataSize,a.tableloading=!1),1===t.data.status&&a.$router.replace("/login")}).catch(function(e){a.$message.error("数据搜索失败"),a.tableloading=!1}),console.log(this.checkList),this.checkList.length>0)for(var i=0;i<this.checkList.length;i++)"渠道"===this.checkList[i]?this.fontCheack.qudao=!0:"渠道号"===this.checkList[i]?this.fontCheack.qudaoNumber=!0:"渠道分类"===this.checkList[i]?this.fontCheack.qudaoClass=!0:"负责人"===this.checkList[i]?this.fontCheack.fuzeren=!0:"H5"===this.checkList[i]?this.fontCheack.H5=!0:"额度"===this.checkList[i]&&(this.fontCheack.moneySize=!0);console.log(this.secrchSetData)},focusQudao:function(){this.qudaoInfo.valuequdao=""},focusQudaonum:function(){this.qudaoInfo.valuequdaonum=""}},mounted:function(){var e=localStorage.getItem("userperadmin");this.sessionid=JSON.parse(e).sessionid,this.findTime(),this.sharchInfoSelect(this.sessionid)}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reportCenter"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],attrs:{"element-loading-text":"拼命加载中..."}},[a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"",clearable:"","allow-create":"","default-first-option":"",placeholder:"渠道"},on:{focus:e.focusQudao},model:{value:e.qudaoInfo.valuequdao,callback:function(t){e.$set(e.qudaoInfo,"valuequdao",t)},expression:"qudaoInfo.valuequdao"}},e._l(e.qudaoInfo.optionsqudao,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{filterable:"","allow-create":"",clearable:"","default-first-option":"",placeholder:"渠道号"},on:{focus:e.focusQudaonum},model:{value:e.qudaoInfo.valuequdaonum,callback:function(t){e.$set(e.qudaoInfo,"valuequdaonum",t)},expression:"qudaoInfo.valuequdaonum"}},e._l(e.qudaoInfo.optionsqudaonum,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择负责人"},model:{value:e.fuzherenname,callback:function(t){e.fuzherenname=t},expression:"fuzherenname"}},e._l(e.fuzheren,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{clearable:"",placeholder:"选择渠道属性"},on:{change:e.qudaoProprFilter},model:{value:e.qudaoshuxingname,callback:function(t){e.qudaoshuxingname=t},expression:"qudaoshuxingname"}},e._l(e.qudaoshuxing,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"templeMaring",attrs:{placeholder:"选择渠道分类"},model:{value:e.qudaoClass,callback:function(t){e.qudaoClass=t},expression:"qudaoClass"}},e._l(e.options4,function(t){return a("el-option-group",{key:t.label,attrs:{label:t.label}},e._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))}))],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-value":e.newDate,"unlink-panels":"","value-format":"yyyy-MM-dd"},model:{value:e.gitTimeold,callback:function(t){e.gitTimeold=t},expression:"gitTimeold"}})],1)])],1),e._v(" "),a("div",{staticStyle:{height:"1rem"}}),e._v(" "),a("el-row",{attrs:{span:24}},[a("el-col",{attrs:{span:1}},[a("span",{staticClass:"fontchange"},[e._v("字段:")])]),e._v(" "),a("el-col",{staticClass:"cheackTop",attrs:{span:17}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"渠道号"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-checkbox",{attrs:{label:"渠道分类"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-checkbox",{attrs:{label:"负责人"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"H5"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-checkbox",{attrs:{label:"额度"}})],1)],1)],1),e._v(" "),a("el-col",{staticClass:"downsharchRight",attrs:{span:6}},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"info",icon:"el-icon-search",size:"mini"},on:{click:e.search}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{class:e.iconImg,attrs:{type:"success",size:"mini"},on:{click:e.tableTimeStyle}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"fa fa-cloud-download",attrs:{type:"primary",size:"mini"}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.Statrloading,expression:"Statrloading"}],staticClass:"table-wrapper",attrs:{"element-loading-text":"拼命加载中..."}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableloading,expression:"tableloading"}],staticStyle:{width:"98%"},attrs:{data:e.fbsData,border:"",align:"right",size:"mini","element-loading-text":"拼命加载中..."}},[a("el-table-column",{attrs:{prop:"date",label:"时间",width:"100",sortable:""}}),e._v(" "),e.fontCheack.qudao?a("el-table-column",{attrs:{prop:"channelName",label:"渠道"}}):e._e(),e._v(" "),e.fontCheack.qudaoNumber?a("el-table-column",{attrs:{prop:"channel",label:"渠道号"}}):e._e(),e._v(" "),e.fontCheack.qudaoClass?a("el-table-column",{attrs:{prop:"channelType",label:"渠道分类"}}):e._e(),e._v(" "),e.fontCheack.fuzeren?a("el-table-column",{attrs:{prop:"adminName",label:"负责人"}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"h5Click",label:"H5点击",sortable:""}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"h5Register",label:"H5注册",sortable:""}}):e._e(),e._v(" "),e.fontCheack.H5?a("el-table-column",{attrs:{prop:"activation",label:"激活",sortable:""}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"register",label:"注册数",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"upload",label:"进件数",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"account",label:"开户数",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"loan",label:"放款数",sortable:""}}),e._v(" "),e.fontCheack.moneySize?a("el-table-column",{attrs:{prop:"credit",label:"授信总额",sortable:""}}):e._e(),e._v(" "),e.fontCheack.moneySize?a("el-table-column",{attrs:{prop:"perCapitaCredit",label:"人均批额",sortable:""}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetPer",label:"首提人数",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstGetSum",label:"首贷总额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"channelSum",label:"渠道提现总额",sortable:""}})],1),e._v(" "),a("el-pagination",{staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1)])},staticRenderFns:[]};var M=a("X4nt")(F,q,!1,function(e){a("sRXx")},"data-v-5449385e",null).exports,E={data:function(){return{isShow:!0,tableshow:!1,loading:!1,userpermission:null,userperadmin:{},dialogVisible:!1,userlevel:[],superior:[],userdepartment:[],seach:{sessionid:"",name:"",email:"",departmentId:"",level:"",pageId:0,pageSize:10,first:0},currentPage:1,pageSizes:[10,20,50],dataSize:0,pagesize:10,fbsData:[],ruleForm:{sessionid:"",email:"",pwd:"",name:"",departmentId:"",level:"",higherId:""},addSaveLoading:!1}},mounted:function(){this.seach.sessionid=parseInt(localStorage.getItem("userId")),this.userpermission=parseInt(localStorage.getItem("userpermission"));var e=localStorage.getItem("userperadmin");this.userperadmin=JSON.parse(e),this.ruleForm.sessionid=this.userperadmin.sessionid,this.userpermission>2?this.isShow=!1:this.isShow=!0,this.secrch()},methods:{secrch:function(){var e=this;if(console.log(this.seach),this.seach.email){if(!/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(this.seach.email))return void this.$message.error("输入邮箱格式不正确")}"0"===this.seach.departmentId?this.seach.departmentId="":"0"===this.seach.level&&(this.seach.level=""),this.loading=!0;var t,a=h()(this.seach);console.log(a),(t=a,u.a.post(m+"getAdmin",t)).then(function(t){if(console.log(t.data),0===t.data.status)if(e.fbsData=t.data.adminList,e.fbsData.length<1)e.loading=!1,e.tableshow=!1;else{for(var a=0;a<e.fbsData.length;a++)e.fbsData[a].date=e.formatDate(e.fbsData[a].date),5===e.fbsData[a].departmentId?e.fbsData[a].departmentId="运营部":6===e.fbsData[a].departmentId?e.fbsData[a].departmentId="技术部":7===e.fbsData[a].departmentId&&(e.fbsData[a].departmentId="市场部"),1===e.fbsData[a].level?e.fbsData[a].level="一级账号":2===e.fbsData[a].level?e.fbsData[a].level="二级账号":3===e.fbsData[a].level&&(e.fbsData[a].level="三级账号");t.data.listSize?e.dataSize=parseFloat(t.data.listSize):e.dataSize=e.dataSize,e.loading=!1,e.tableshow=!0}else 1===t.data.status&&(e.tableshow=!1,e.$router.replace("/login"))}).catch(function(t){e.loading=!1,e.$message.error("数据拉取失败"),console.log(t)})},addUser:function(){var e=this;this.ruleForm.email="",this.ruleForm.pwd="",this.ruleForm.name="",this.ruleForm.departmentId="",this.ruleForm.level="",this.ruleForm.higherId="",this.userdepartment=[],5===this.userperadmin.admin.departmentId?this.userdepartment.push({name:"运营部",id:5}):6===this.userperadmin.admin.departmentId?this.userdepartment.push({name:"技术部",id:6}):7===this.userperadmin.admin.departmentId&&this.userdepartment.push({name:"市场部",id:7}),this.userlevel=[],console.log(this.userperadmin.admin.level),1===this.userperadmin.admin.level?this.userlevel=[{name:"二级账号",id:2},{name:"三级账号",id:3}]:this.userlevel=[{name:"三级账号",id:3}];var t,a={sessionid:this.userperadmin.sessionid};a=h()(a),(t=a,u.a.post(m+"AdminParameter",t)).then(function(t){console.log(t.data),0===t.data.status&&(e.superior=t.data.adminList,console.log(e.superior),e.dialogVisible=!0),1===t.data.status&&e.$router.replace("/login")}).catch(function(t){e.$message.error("获取负责人信息失败")})},pageSizeChange:function(e){this.seach.pageSize=e,this.seach.first=1,this.secrch()},currentPageChange:function(e){this.seach.pageId=1*e-1,this.seach.first=1,this.secrch()},adminuser:function(e,t){console.log(e),console.log(t)},readonlyuser:function(e,t){console.log(e),console.log(t)},deleteuser:function(e,t){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;if(console.log(t.ruleForm),""===t.ruleForm.email)t.$message.error("邮箱不能为空");else if(""===t.ruleForm.pwd)t.$message.error("密码不能为空");else if(""===t.ruleForm.name)t.$message.error("姓名不能为空");else if(""===t.ruleForm.departmentId)t.$message.error("职能部门不能为空");else if(""===t.ruleForm.level)t.$message.error("账号级别不能为空");else if(""===t.ruleForm.higherId)t.$message.error("上司不能为空");else if(t.ruleForm.email){if(!/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(t.ruleForm.email))return void t.$message.error("输入邮箱格式不正确");t.addSaveLoading=!0;var a=t,n=h()(a.ruleForm);(i=n,u.a.post(m+"addAdmin",i)).then(function(e){console.log(e.data),0===e.data.status&&(a.$message({message:e.data.statusMsg,type:"success"}),a.addSaveLoading=!1,a.dialogVisible=!1,a.secrch()),1===e.data.status&&(a.$router.replace("/login"),a.addSaveLoading=!1,a.dialogVisible=!1)}).catch(function(e){a.addSaveLoading=!1,a.dialogVisible=!1,a.$message.error("保存失败")})}var i})}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"UserControl"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{xs:3,sm:3,md:4}},[a("el-input",{attrs:{placeholder:"姓名搜索"},model:{value:e.seach.name,callback:function(t){e.$set(e.seach,"name",t)},expression:"seach.name"}})],1),e._v(" "),a("el-col",{attrs:{xs:3,sm:3,md:4}},[a("el-input",{attrs:{placeholder:"邮箱搜索"},model:{value:e.seach.email,callback:function(t){e.$set(e.seach,"email",t)},expression:"seach.email"}})],1),e._v(" "),a("el-col",{attrs:{xs:4,sm:3,md:4}},[a("el-select",{attrs:{placeholder:"选择职能部门"},model:{value:e.seach.departmentId,callback:function(t){e.$set(e.seach,"departmentId",t)},expression:"seach.departmentId"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"市场部",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"运营部",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"技术部",value:"6"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:4,sm:3,md:4}},[a("el-select",{attrs:{placeholder:"选择账号等级"},model:{value:e.seach.level,callback:function(t){e.$set(e.seach,"level",t)},expression:"seach.level"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"一级账号",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"二级账号",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"三级账号",value:"3"}})],1)],1),e._v(" "),a("el-col",{attrs:{xs:10,sm:8,md:6}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.secrch}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addUser}})],1)],1),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"90%"},attrs:{data:e.fbsData,border:"",size:"small","element-loading-text":"拼命加载中..."}},[a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"departmentId",label:"职能部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"level",label:"账号等级"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"创建时间",width:"150"}})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.tableshow,expression:"tableshow"}],staticClass:"paginationWrapper",attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.dataSize},on:{"size-change":e.pageSizeChange,"current-change":e.currentPageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"创建新用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"邮箱(账号)",prop:"email"}},[a("el-input",{model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[a("el-input",{model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职能部门",prop:"departmentId"}},[a("el-select",{attrs:{placeholder:"选择职能部门"},model:{value:e.ruleForm.departmentId,callback:function(t){e.$set(e.ruleForm,"departmentId",t)},expression:"ruleForm.departmentId"}},e._l(e.userdepartment,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1),e._v(" "),a("el-form-item",{attrs:{label:"账号级别",prop:"level"}},[a("el-select",{attrs:{placeholder:"选择账号级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},e._l(e.userlevel,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1),e._v(" "),a("el-form-item",{attrs:{label:"上司",prop:"higherId"}},[a("el-select",{attrs:{placeholder:"默认创建者"},model:{value:e.ruleForm.higherId,callback:function(t){e.$set(e.ruleForm,"higherId",t)},expression:"ruleForm.higherId"}},e._l(e.superior,function(e){return a("div",[a("el-option",{attrs:{label:e.name,value:e.id}})],1)}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.addSaveLoading},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var R=a("X4nt")(E,V,!1,function(e){a("yFPn")},"data-v-29d719d8",null).exports;n.default.use(o.a);var O=new o.a({routes:[{path:"/Login",component:C,name:"",hidden:!0},{path:"/",redirect:"/Login",hidden:!0},{path:"/",component:c,name:"渠道中心",iconCls:"el-icon-message",children:[{path:"/Channelmanagement",component:z,name:"渠道商管理"},{path:"/Channelclass",component:$,name:"渠道分类配置"}]},{path:"/",component:c,name:"",iconCls:"el-icon-date",leaf:!0,children:[{path:"/ReportCenter",component:M,name:"报表中心"}]},{path:"/",component:c,name:"",iconCls:"el-icon-date",leaf:!0,children:[{path:"/UserControl",component:R,name:"用户管理"}]}]}),H=a("mwE6"),B=a.n(H),j=(a("cU5d"),a("kf6B"),a("9rMa"));n.default.use(j.a);var X=new j.a.Store({state:{sessionid:"",level:null},mutations:{userId:function(e,t){e.sessionid=t},userpermission:function(e,t){e.level=t}}});a("HBSQ");n.default.config.productionTip=!1,n.default.use(B.a),new n.default({el:"#app",router:O,store:X,components:{App:s},template:"<App/>"}),n.default.prototype.formatDate=function(e){var t=(e=new Date(e)).getFullYear(),a=e.getMonth()+1,n=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return t+"-"+a+"-"+n+" "+i+":"+s+":"+(o>10?o:"0"+o)},n.default.prototype.dataToMs=function(e){return new Date(e).getTime()}},VyL3:function(e,t){},cU5d:function(e,t){},"j+Ac":function(e,t){},kf6B:function(e,t){!function(e,t){var a=e.documentElement,n="orientationchange"in window?"orientationchange":"resize",i=function(){var e,t,n=(t=navigator.userAgent,navigator.appVersion,e={trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webkit:t.indexOf("AppleWebkit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:t.indexOf("Mobile")>-1||t.indexOf("mobile")>-1,ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),wechat:t.indexOf("MicroMessenger")>-1},(navigator.browserLanguge||navigator.language).toLowerCase(),e.ios||e.iPhone||e.iPad?e.mobile?"ios_mobile":"ios_pc":e.android?"android":"pc"),i=a.clientWidth,s="landscape",o=16;i&&("pc"==n||"ios_pc"==n?(o=i<=1204?Math.floor(i/54):Math.floor(i/70),s="horizontal"):o=Math.floor(i/23),a.style.fontSize=o+"px",a.className=s)};i(),e.addEventListener&&(t.addEventListener(n,i,!1),e.addEventListener("DOMContentLoaded",i,!1))}(document,window)},sRXx:function(e,t){},wigo:function(e,t){},yFPn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.32ee4d0cb688ee4b54f5.js.map